!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Scintilla",[],e):"object"==typeof exports?exports.Scintilla=e():t.Scintilla=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=358)}([function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){"use strict";e.__esModule=!0;var n,a=(n=i(329))&&n.__esModule?n:{default:n};e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,a.default)(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}()},function(t,e,i){t.exports={default:i(301),__esModule:!0}},function(t,e,i){"use strict";e.__esModule=!0;var n=s(i(299)),a=s(i(295)),r=s(i(12));function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,r.default)(e)));t.prototype=(0,a.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(n.default?(0,n.default)(t,e):t.__proto__=e)}},function(t,e,i){"use strict";e.__esModule=!0;var n,a=(n=i(12))&&n.__esModule?n:{default:n};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,a.default)(e))&&"function"!=typeof e?t:e}},function(t,e,i){t.exports={default:i(331),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={NONE:0,IDLE:1,PENDING:2,LOADING:3,PROCESSING:4,ERROR:5,FINISHED:6,DONE:7}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),r=s(i(68));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i){if((0,n.default)(this,t),this.unique=i||!0,this.childs=[],null!==e&&Array.isArray(e))for(var a=0;a<e.length;a++)this.push(e[a])}return(0,a.default)(t,[{key:"first",value:function(){return this.childs.length>0?this.childs[0]:null}},{key:"last",value:function(){if(this.childs.length>0){var t=this.childs.length-1;return this.childs[t]}return null}},{key:"push",value:function(t){return this.unique?-1===this.indexOf(t)&&this.childs.push(t):this.childs.push(t),t}},{key:"pushFront",value:function(t){return this.unique?-1===this.indexOf(t)&&this.childs.unshift(t):this.childs.unshift(t),t}},{key:"insert",value:function(t,e){return void 0===e&&(e=0),0===this.childs.length?this.push(t):(e>=0&&e<=this.childs.length&&(this.unique?-1===this.indexOf(t)&&this.childs.splice(e,0,t):this.childs.splice(e,0,t)),t)}},{key:"indexOf",value:function(t){return this.childs.indexOf(t)}},{key:"get",value:function(t){return this.childs[t]}},{key:"at",value:function(t){return this.childs[t]}},{key:"erase",value:function(t){var e=this.childs.indexOf(t),i=null;return-1!==e&&(i=this.childs.splice(e,1)),i}},{key:"eraseAt",value:function(t){var e=this.childs[t];return e&&this.childs.splice(t,1),e}},{key:"eraseList",value:function(t,e,i){if(void 0===i&&(i=!1),Array.isArray(t)){void 0===e&&(e=t.length);for(var n=0;n<e;n++){var a=t[n];this.erase(a)}}else{void 0===e&&(e=t.size);for(var r=0;r<e;r++){var s=t.childs[r];this.erase(s)}}}},{key:"eraseIndexedList",value:function(t){var e=t.length;if(Array.isArray(t))for(var i=0;i<e;i++){var n=t[i];this.eraseAt(n)}else for(var a=0;a<e;a++){var r=t.childs[a];this.eraseAt(r)}return this}},{key:"pop",value:function(){return this.childs.pop()}},{key:"popFront",value:function(){return this.childs.shift()}},{key:"has",value:function(t){return this.childs.indexOf(t)>-1}},{key:"hasAt",value:function(t){return void 0!==this.childs[t]}},{key:"empty",value:function(){return 0===this.childs.length}},{key:"clear",value:function(){return this.childs.length=0,this}},{key:"splice",value:function(t,e,i){return void 0===i?this.childs.splice(t,e):this.childs.splice(t,e,i)}},{key:"destroy",value:function(){this.clear(),this.childs=[],this.parent=null}},{key:"concat",value:function(t,e){return void 0===e&&(e=!1),this.childs=e?this.childs.concat(t.childs.splice(0)):this.childs.concat(t.childs),this}},{key:"each",value:function(t){for(var e=[],i=this.childs,n=void 0,a=1;a<arguments.length;a++)e.push(arguments[a]);for(var r=0;r<i.length;r++)if(void 0!==(n=t(i[r],r,e)))return n;return n}},{key:"sort",value:function(t){if(void 0!==t)return(0,r.default)(this.childs,t)}},{key:"find",value:function(t){if(void 0!==t){for(var e=this.childs.length,i=0;i<e;i++)if(t(this.childs[i]))return this.childs[i];return null}}},{key:"swap",value:function(t,e){if(t!==e){var i=this.indexOf(t),n=this.indexOf(e);if(i<0||n<0)throw new Error("DataList.swap: Could not swap childrens. The objects are not in the list.");return this.list[i]=t,this.list[n]=e,this}}},{key:"swapByIndex",value:function(t,e){if(t!==e){var i=this.at(t),n=this.at(e);if(void 0===i||void 0===n)throw new Error("DataList.swapByIndex: Could not swap childrens by index. The objects are not in the list.");return this.list[t]=i,this.list[e]=n,this}}},{key:"reverse",value:function(){return this.childs.reverse(),this}},{key:"content",value:function(){return this.childs}},{key:"size",get:function(){return this.childs.length}},{key:"length",get:function(){return this.childs.length}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=(n=i(5))&&n.__esModule?n:{default:n},r={toRadian:Math.PI/180,toDegree:180/Math.PI,TAU:2*Math.PI,EPSILON:Math.pow(2,-52),HALFPI:1.5707963267948966,floor:function(t){return t>>0},round:function(t){return~~(.5+t)},abs:function(t){return t<0?-t:t},max:function(t,e){return t<e?e:t},min:function(t,e){return e<t?e:t},sign:function(t){return t<0?-1:t>0?1:0},clamp:function(t,e,i){return t>e?t<i?t:i:e},lerp:function(t,e,i){return(1-i)*t+i*e},clampedLerp:function(t,e,i){return i=r.clamp(i,0,1),r.lerp(t,e,i)},impreciseLerp:function(t,e,i){return t+i*(e-t)},distance:function(t,e,i,n){return Math.sqrt((t-=i)*t+(e-=n)*e)},angleBetween:function(t,e,i,n){var a=this.toDegree(Math.atan2(n-e,i-t));return a<0&&a>=-180&&(a=360+a),a},radianToDegree:function(t){return t*r.toDegree},degreeToRadian:function(t){return t*r.toRadian},manhattan:function(t,e,i,n){return{x:r.abs(i-t),y:r.abs(n-e)}},inManhattanRadius:function(t,e,i,n,a,r){void 0===r&&(r=a);var s=this.manhattan(t,e,i,n);return s.x<=a&&s.y<=r},average:function(){var t=arguments.length;return 0===t?0:this.sum.apply(this,arguments)/t},sum:function(){var t=arguments.length;if(0===t)return 0;for(var e=arguments[0],i=1;i<t;i++)e+=arguments[i];return e},sub:function(){var t=arguments.length;if(0===t)return 0;for(var e=arguments[0],i=1;i<t;i++)e-=arguments[i];return e},lerpAngle:function(t,e,i){var n=e,a=t;Math.abs(n-a)>180&&(n>a?a+=360:n+=360);var r=a+(n-a)*i;return r>=0&&r<=360?r:r%360}};(0,a.default)(r),e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(5)),a=u(i(12)),r=u(i(0)),s=u(i(1));function u(t){return t&&t.__esModule?t:{default:t}}var o=new(function(){function t(){(0,r.default)(this,t)}return(0,s.default)(t,[{key:"value",value:function(t,e,i){var n=void 0===t?"undefined":(0,a.default)(t);return t&&"number"!==n&&"string"!==n&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:i}},{key:"propertyValue",value:function(t,e,i){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(e.indexOf(".")){for(var n=e.split("."),a=t,r=i,s=0;s<n.length;s++){if(!a.hasOwnProperty(n[s])){r=i;break}r=a[n[s]],a=a[n[s]]}return r}return i}return i}}]),t}());(0,n.default)(o),e.default=o},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.GameSystems=void 0,(n=i(49))&&n.__esModule;var a=e.GameSystems={},r={register:function(t,e,i,n){a[t]={name:i,system:e,init:n}}};e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={none:0,image:1,audio:2,text:3,svg:4,script:5,json:6,webFont:7,tilemapJSON:8,spritesheet:9,animMachine:10};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var n=s(i(356)),a=s(i(340)),r="function"==typeof a.default&&"symbol"==typeof n.default?function(t){return typeof t}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t};function s(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof a.default&&"symbol"===r(n.default)?function(t){return void 0===t?"undefined":r(t)}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":void 0===t?"undefined":r(t)}},function(t,e){var i=t.exports={version:"2.5.4"};"number"==typeof __e&&(__e=i)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=new(((n=i(180))&&n.__esModule?n:{default:n}).default);e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={None:-1,Image:0,Tilemap:1,Animation:2,Spritesheet:3,AnimationMachine:4};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(291)),a=s(i(0)),r=s(i(1));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,a.default)(this,t),this._content={},this._size=0}return(0,r.default)(t,[{key:"set",value:function(t,e){return this.has(t)||this._size++,this._content[t]=e,this}},{key:"get",value:function(t){return void 0===t?null:this.has(t)?this._content[t]:null}},{key:"at",value:function(t){var e=0;for(var i in this._content){if(t===e)return this._content[i];e++}return null}},{key:"has",value:function(t){return this._content.hasOwnProperty(t)}},{key:"contains",value:function(t){for(var e in this._content)if(entries[e]===t)return!0;return!1}},{key:"keys",value:function(){return(0,n.default)(this._content)}},{key:"values",value:function(){var t=[],e=this._content;for(var i in e)t.push(entries[i]);return t}},{key:"remove",value:function(t){if(!this.has(t))return null;var e=this._content[t];return delete this._content[t],this._size--,e}},{key:"erase",value:function(t){return!!this.has(t)&&(delete this._content[t],this._size--,!0)}},{key:"eraseList",value:function(t){if(void 0===t)return this;var e=t.length;if(Array.isArray(t))for(var i=0;i<e;i++){var n=t[i];this.erase(n)}return this}},{key:"clear",value:function(){for(var t in this._content)delete this._content[t];return this._size=0,this}},{key:"slowSize",value:function(){return(0,n.default)(_contents).length}},{key:"each",value:function(t){var e=this._content;for(var i in e)if(!1===t(i,e[i]))break;return this}},{key:"find",value:function(t){if(void 0!==t){var e=this._content;for(var i in e)if(t(i,e[i]))return e[i];return null}}},{key:"size",get:function(){return this._size}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(0)),a=f(i(1)),r=f(i(9)),s=f(i(55)),u=f(i(6)),o=f(i(11)),l=f(i(54)),d=f(i(21));function f(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){if((0,n.default)(this,t),this.type=r.default.value(e,"type",null),this.tag=r.default.value(e,"tag",null),this.useExternal=r.default.value(e,"useExternal",!1),null===this.type||null===this.tag)throw new Error("Loader.File: Invalid tag.");this.url=r.default.value(e,"url",void 0),void 0===this.url?this.url=r.default.value(e,"path","")+this.tag+"."+r.default.value(e,"ext",""):"function"!=typeof this.url&&(this.useExternal&&void 0===this.useExternal||(this.url=r.default.value(e,"path","").concat(this.url))),this.type===o.default.webFont&&this.type===o.default.spritesheet||(this.xhrSettings=s.default.createSettings(r.default.value(e,"responseType",void 0)),r.default.value(e,"xhrSettings",!1)&&(this.xhrSettings=s.default.merge(this.xhrSettings,r.default.value(e,"xhrSettings",{})))),this.loader=null,this.state=u.default.PENDING,this.totalBytes=0,this.loadedBytes=0,this.progress=0,this.data=void 0,this.source=null,this.xhrRequest=null,this.config=r.default.value(e,"config",{}),this.crossOrigin=void 0,this.onComplete=void 0}return(0,a.default)(t,[{key:"load",value:function(t){this.loader=t,this.state===u.default.FINISHED?(this.onDone(),l.default.call(this.loader,this)):(this.source=d.default.getURL(this.url,t.baseURL),0===this.source.indexOf("data:")||null==this.source?console.warn("Loader.File.load: unsupported URI."):this.xhrRequest=s.default.createFileRequest(this,t.xhr))}},{key:"onLoad",value:function(t){this.clearXHR(),t.target&&200!==t.target.status?l.default.call(this.loader,this):(void 0!==this.onPostLoad&&this.onPostLoad(this.loader,this.xhrRequest),l.default.call(this.loader,this))}},{key:"onError",value:function(t){console.error('Loader.File: Error on load file: "'+this.url+'".'),this.clearXHR(),l.default.call(this.loader,this)}},{key:"onProgress",value:function(t){t.lengthComputable&&(this.loadedBytes=t.loaded,this.totalBytes=t.total,this.progress=Math.min(this.loadedBytes/this.totalBytes,1))}},{key:"onDone",value:function(){this.state=u.default.DONE,this.loader.game.events.dispatch("file_complete_"+this.tag)}},{key:"onProcessing",value:function(t){this.state=u.default.PROCESSING,this.onDone(),t(this)}},{key:"clearXHR",value:function(){this.xhrRequest&&(this.xhrRequest.onload=void 0,this.xhrRequest.onerror=void 0,this.xhrRequest.onprogress=void 0)}}]),t}();e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return void 0===e&&(e=!0),!this.isOK()&&e?-1:(t.type===n.default.webFont&&void 0===this.webFontLoader&&(this.webFontLoader=new a.default("webFontLoader","https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"),this._filesQueue.insert(this.webFontLoader),this._filesQueueCount++,this.game.events.create("file_postload_webFontLoader").subscribeOnce(function(){t.fontLoad()})),t.path=this.path,this._filesQueue.insert(t),this._filesQueueCount++,t)};var n=r(i(11)),a=r(i(90));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={isFunction:function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},isClass:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},isArray:function(t){return Array.isArray(t)},isNumber:function(t){return!isNaN(t)},isString:function(t){return"string"==typeof t||t instanceof String}};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(0)),a=l(i(1)),r=l(i(8)),s=l(i(261)),u=l(i(64)),o=l(i(26));function l(t){return t&&t.__esModule?t:{default:t}}function d(t){t._css="rgba("+t._r+","+t._g+","+t._b+","+t._a+")"}l(i(256));var f=function(){function t(e,i,a,r){(0,n.default)(this,t),this._r=e||0,this._g=i||0,this._b=a||0,this._a=r||1,this._css=null,d(this)}return(0,a.default)(t,[{key:"set",value:function(t,e,i,n){return this._r=t||0,this._g=e||0,this._b=i||0,void 0!==n&&(this._a=n),d(this),this}},{key:"setRGBA",value:function(t,e,i,n){if(void 0!==t)return this._r=Math.round(t/255),this._g=Math.round(e/255),this._b=Math.round(i/255),void 0!==n&&(this._a=Math.round(n/255)),d(this),this}},{key:"setColor",value:function(t,e){return this._r=t.r,this._g=t.g,this._b=t.b,this._a=void 0!==e?e:t.a,d(this),this}},{key:"parse",value:function(t){var e=(0,s.default)(t);return this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,d(this),this}},{key:"lerp",value:function(t,e){return this._r=r.default.lerp(this._r,t.r),this._g=r.default.lerp(this._g,t.g),this._b=r.default.lerp(this._b,t.b),this._a=r.default.lerp(this._a,t.a),d(this),this}},{key:"to32",value:function(){}},{key:"toCSS",value:function(){}},{key:"toInt",value:function(){}},{key:"toHex",value:function(){}},{key:"rgba",get:function(){return this._css}},{key:"r",get:function(){return this._r}},{key:"g",get:function(){return this._g}},{key:"b",get:function(){return this._b}},{key:"a",get:function(){return this._a},set:function(t){this._a=t,d(this)}}],[{key:"ease",value:function(e,i,n,a,r,s,l){void 0===a&&(a=o.default.LINEAR),void 0===r&&(r=0),void 0===s&&(s=3);var d=u.default.in;switch(r){case 1:d=u.default.out;break;case 2:d=u.default.inout}return void 0===l&&(l=new t),l.set(d.by(a,e.r,i.r,n,s),d.by(a,e.g,i.g,n,s),d.by(a,e.b,i.b,n,s),d.by(a,e.a,i.a,n,s)),l}},{key:"red",get:function(){return new t(255,0,0)}},{key:"green",get:function(){return new t(0,255,0)}},{key:"blue",get:function(){return new t(0,0,255)}},{key:"cyan",get:function(){return new t(0,255,255)}},{key:"magenta",get:function(){return new t(255,0,255)}},{key:"yellow",get:function(){return new t(255,255,0)}},{key:"black",get:function(){return new t(0)}},{key:"white",get:function(){return new t(255)}},{key:"gray",get:function(){return new t(127.5)}},{key:"transparent",get:function(){return new t(0,0,0,0)}}]),t}();e.default=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={getExtension:function(t){return t.substring(t.lastIndexOf(".")+1,t.length)||""},getFilename:function(t){return t.split("\\").pop().split("/").pop()||t},getFilenameWithoutExtension:function(t){return this.removeExtension(this.getFilename(t))},removeExtension:function(t){return t.substr(0,t.lastIndexOf("."))||t},getPath:function(t){return t.substr(0,t.lastIndexOf("/")+1)||""},getRootPath:function(t){return t.substr(0,t.indexOf("/")+1)||t},getPathWithoutRoot:function(t){var e=t.indexOf("/")+1||0,i=t.lastIndexOf("/")-e+1||t.length;return t.substr(e,i)||t},getDirectoryName:function(t){var e=t.split("/");return e.length<=1?e[e.length-1]:e[e.length-2]},getURL:function(t,e){return t?t.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t:e+t:null}};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(2)),a=l(i(0)),r=l(i(1)),s=l(i(4)),u=l(i(3)),o=l(i(48));function l(t){return t&&t.__esModule?t:{default:t}}l(i(33));var d=function(t){function e(t,i){(0,a.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"render",t||"renderable",i));return r._layerID=0,r._depth=0,r._alpha=1,r._depthSorting=0,r._bounds=new o.default,r._originInPixels={x:0,y:0},r._originIsDirty=!0,r}return(0,u.default)(e,t),(0,r.default)(e,[{key:"bounds",get:function(){return this._bounds}},{key:"depth",get:function(){return this._depthSorting},set:function(t){return void 0!==this.entity.game&&t!==this._depthSorting&&(this._depthSorting=t,this.entity.game.system.events.dispatch("__render_layersorting",this._layerID)),this}},{key:"layerName",get:function(){}},{key:"layer",get:function(){return this._layerID},set:function(t){this.game}},{key:"alpha",get:function(){return this._alpha},set:function(t){this._alpha=t}}]),e}(l(i(47)).default);e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={NONE:0,FADEIN:1,FADEOUT:2,FADEINOUT:3,IDLE:4};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EASE_BACK_CONST=void 0;var n,a=(n=i(5))&&n.__esModule?n:{default:n},r={NONE:0,STEPPED:1,LINEAR:2,CUT:3,SINE:4,QUADRATIC:5,CUBIC:6,QUARTIC:7,QUINTIC:8,POWER:9,EXPONENTIAL:10,CIRC:11,BACK:12,ELASTIC:13,BOUNCE:14};e.EASE_BACK_CONST=1.70158,(0,a.default)(r),e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1)),r=u(i(16)),s=u(i(130));function u(t){return t&&t.__esModule?t:{default:t}}var o=new(function(){function t(){(0,n.default)(this,t),this.proxyModules=new r.default}return(0,a.default)(t,[{key:"attach",value:function(t,e,i){var n=t.attached;if(n.has(e))throw new Error("ModuleManager.attach: Could not attach module "+e+". Already exists");if(!this.proxyModules.has(e))throw new Error("ModuleManager.attach: Module type "+e+" don't exists.");var a=this.proxyModules.get(e)(t,i);return(0,s.default)(a,t.entity),n.set(a.type,a),"render"===a.type&&t._pendingModulesInitialization.push(a),a}},{key:"register",value:function(t,e){o.proxyModules.has(t)||o.proxyModules.set(t,e)}}]),t}());e.default=o},function(t,e,i){var n=i(349),a=i(85);t.exports=function(t){return n(a(t))}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){t.exports=!i(40)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(41),a=i(150),r=i(83),s=Object.defineProperty;e.f=i(30)?Object.defineProperty:function(t,e,i){if(n(t),e=r(e,!0),n(i),a)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),r=s(i(1));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i,a,r){(0,n.default)(this,t),this.x=e||0,this.y=i||0,this.width=a||0,this.height=r||0}return(0,r.default)(t,[{key:"set",value:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this}},{key:"setPostion",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setSize",value:function(t,e){return this.width=t,this.height=e,this}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}},{key:"intersects",value:function(e){return t.intersects(this,e)}},{key:"contains",value:function(e,i){return t.contains(this,e,i)}},{key:"center",get:function(){var t={};return t.x=this.x+this.width/2,t.y=this.y+this.height/2,t}}],[{key:"intersects",value:function(t,e){return!(t.width<=0||t.height<=0||e.width<=0||e.height<=0||t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)}},{key:"contains",value:function(t,e,i){return!(t.width<=0&&t.height<=0)&&e>t.x&&e<t.x+t.width&&i>=t.y&&i<t.y+t.height}},{key:"intersectionArea",value:function(t,e){var i=new scintilla.Rect;return scintilla.Rect.intersects(t,e)&&(i.y=Math.max(a.y,b.y),i.x=Math.max(a.x,b.x),i.width=Math.min(a.x+a.width,b.x+b.width)-i.x,i.height=Math.min(a.y+a.height,b.y+b.height)-i.y),i}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),r=s(i(8));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i,a){(0,n.default)(this,t),this.x=e||0,this.y=i||0,this.managed=a||void 0}return(0,a.default)(t,[{key:"set",value:function(t,e){return this.x=t,this.y=e||t,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"move",value:function(t,e){return this.x+=t,this.y+=e,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"scale",value:function(t,e){return this.x*=t,this.y*=e||t,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"rotate",value:function(t){var e=this.x,i=this.y;return this.x=e*Math.cos(t)-i*Math.sin(t),this.y=e*Math.sin(t)+i*Math.cos(t),void 0!==this.managed&&this.managed.markDirty(),this}},{key:"rotateAround",value:function(t,e){var i=this.x-e.x,n=this.y-e.y,a=Math.cos(t),r=Math.sin(t);return this.x=e.x+(a*i-r*n),this.y=e.y+(r*i+a*n),void 0!==this.managed&&this.managed.markDirty(),this}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"normalize",value:function(){var t=this.length();return t>0&&(this.x=this.x/t,this.y=this.y/t),void 0!==this.managed&&this.managed.markDirty(),this}},{key:"round",value:function(){return this.x=r.default.round(this.x),this.y=r.default.round(this.y),this}},{key:"reverse",value:function(){return this.x=-this.x,this.y=-this.y,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"perp",value:function(){var t=this.x;return this.x=this.y,this.y=-t,void 0!==this.managed&&this.managed.markDirty(),this}},{key:"dot",value:function(e){return t.dot(this,e)}},{key:"project",value:function(e){return t.project(this,e)}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"length",value:function(){return Math.sqrt(this.squaredLenght())}},{key:"toString",value:function(){return"{ x: "+this.x+", y: "+this.y+" }"}},{key:"squaredLenght",value:function(){return t.dot(this,this)}},{key:"magnitude",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normal",get:function(){var e=this.magnitude;return new t(this.x/e,this.y/e)}}],[{key:"abs",value:function(e){return new t(Math.abs(e.x),Math.abs(e.y))}},{key:"scalar",value:function(t,e){return t.x*e.y-t.y*e.x}},{key:"distance",value:function(t,e){return r.default.distance(t.x,t.y,e.x,e.y)}},{key:"angleBetween",value:function(t,e){return r.default.angleBetween(t.x,t.y,e.x,e.y)}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"project",value:function(e,i){var n=t.dot(e,i);return new t(n/(i.x*i.x+i.y*i.y)*i.x,n/(i.x*i.x+i.y*i.y)*i.y)}},{key:"projectNormal",value:function(e,i){var n=t.dot(e,i);return new t(n/i.x,n/i.y)}},{key:"reflect",value:function(e,i){var n=t.project(e,i);return n.scale(2),n.sub(e),n}},{key:"reflectNormal",value:function(e,i){var n=t.projectNormal(e,i);return n.scale(2),n.sub(e),n}},{key:"lerp",value:function(e,i,n){return new t(r.default.lerp(e.x,i.x,n),r.default.lerp(e.y,i.y,n))}}]),t}();e.default=u,t.exports=u},function(t,e,i){var n=i(37),a=i(13),r=i(40);t.exports=function(t,e){var i=(a.Object||{})[t]||Object[t],s={};s[t]=e(i),n(n.S+n.F*r(function(){i(1)}),"Object",s)}},function(t,e,i){var n=i(79)("wks"),a=i(50),r=i(25).Symbol,s="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=s&&r[t]||(s?r:a)("Symbol."+t))}).store=n},function(t,e,i){var n=i(31),a=i(52);t.exports=i(30)?function(t,e,i){return n.f(t,e,a(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(25),a=i(13),r=i(151),s=i(36),u=i(29),o=function(t,e,i){var l,d,f,c=t&o.F,h=t&o.G,v=t&o.S,y=t&o.P,_=t&o.B,p=t&o.W,m=h?a:a[e]||(a[e]={}),g=m.prototype,M=h?n:v?n[e]:(n[e]||{}).prototype;for(l in h&&(i=e),i)(d=!c&&M&&void 0!==M[l])&&u(m,l)||(f=d?M[l]:i[l],m[l]=h&&"function"!=typeof M[l]?i[l]:_&&d?r(f,n):p&&M[l]==f?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):y&&"function"==typeof f?r(Function.call,f):f,y&&((m.virtual||(m.virtual={}))[l]=f,t&o.R&&g&&!g[l]&&s(g,l,f)))};o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,o.U=64,o.R=128,t.exports=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i){(0,n.default)(this,t),e=e||0,i=i||0,this.a=[],this.a[0]=e,this.a[1]=i,this.a[2]=i,this.a[3]=i,this.a[4]=e,this.a[5]=i,this.a[6]=i,this.a[7]=i,this.a[8]=e}return(0,a.default)(t,[{key:"at",value:function(t,e){return this.a[t+3*e]}},{key:"set",value:function(t,e,i){return this.a[t+3*e]=i,this}},{key:"setIdentity",value:function(){return this.setTransform(1,0,0,0,1,0,0,0,1)}},{key:"setTransform",value:function(t,e,i,n,a,r,s,u,o){return this.a[0]=t,this.a[1]=e,this.a[2]=i,this.a[3]=n,this.a[4]=a,this.a[5]=r,this.a[6]=s,this.a[7]=u,this.a[8]=o,this}},{key:"translate",value:function(t,e){return this.a[6]=this.a[0]*t+this.a[3]*e+this.a[6],this.a[7]=this.a[1]*t+this.a[4]*e+this.a[7],this}},{key:"scale",value:function(t,e){return this.a[0]*=t,this.a[1]*=t,this.a[3]*=e,this.a[4]*=e,this.a[6]*=t,this.a[7]*=e,this}},{key:"rotate",value:function(t){var e=Math.cos(t),i=Math.sin(t);return this.radianRotate(e,i)}},{key:"radianRotate",value:function(t,e){return this.transform(t,e,-e,t,0,0)}},{key:"transform",value:function(t,e,i,n,a,r){var s=this.a[0],u=this.a[1],o=this.a[3],l=this.a[4],d=this.a[6],f=this.a[7];return this.a[0]=t*s+e*o,this.a[1]=t*u+e*l,this.a[3]=i*s+n*o,this.a[4]=i*u+n*l,this.a[6]=a*s+r*o+d,this.a[7]=a*u+r*l+f,this}},{key:"setModelMatrix",value:function(t,e,i,n){return this.a[0]=i.x*e.x,this.a[1]=i.y*e.x,this.a[3]=-i.y*e.y,this.a[4]=i.x*e.y,this.a[6]=t.x,this.a[7]=t.y,this}},{key:"multiply",value:function(t){var e=this.a[0],i=this.a[1],n=this.a[3],a=this.a[4],r=this.a[6],s=this.a[7];return this.a[0]=t.a[0]*e+t.a[1]*n,this.a[1]=t.a[0]*i+t.a[1]*a,this.a[3]=t.a[3]*e+t.a[4]*n,this.a[4]=t.a[3]*i+t.a[4]*a,this.a[6]=t.a[6]*e+t.a[7]*n+r,this.a[7]=t.a[6]*i+t.a[7]*a+s,this}},{key:"concat",value:function(t){var e=this.a[0],i=this.a[1],n=this.a[3],a=this.a[4],r=this.a[6],s=this.a[7];return this.a[0]=e*t.a[0]+i*t.a[3],this.a[1]=e*t.a[1]+i*t.a[4],this.a[3]=n*t.a[0]+a*t.a[3],this.a[4]=n*t.a[1]+a*t.a[4],this.a[6]=r*t.a[0]+s*t.a[3]+t.a[6],this.a[7]=r*t.a[1]+s*t.a[4]+t.a[7],this}},{key:"transformPoint",value:function(t,e){var i={x:0,y:0};return i.x=t*this.a[0]+e*this.a[3]+this.a[6],i.y=t*this.a[1]+e*this.a[4]+this.a[7],i}},{key:"transpose",value:function(){return this.setAll(mat.a[0],mat.a[3],mat.a[6],mat.a[1],mat.a[4],mat.a[7],mat.a[2],mat.a[5],mat.a[8])}},{key:"toString",value:function(){for(var t="",e=0;e<3;e++){for(var i=0;i<3;i++)t+=this.at(i,e)+" ";t+="\n"}return t}}],[{key:"identity",value:function(){return new t(1)}},{key:"zero",value:function(){return new t(0)}},{key:"transpose",value:function(e){return t.zero.setAll(e.a[0],e.a[3],e.a[6],e.a[1],e.a[4],e.a[7],e.a[2],e.a[5],e.a[8])}},{key:"multiplySlow",value:function(e,i){for(var n=t.zero(),a=void 0,r=0;r<3;++r)for(var s=0;s<3;++s)for(var u=0;u<3;++u)a=n.at(r,u),a+=e.at(r,s)*i.at(s,u),n.set(r,u,a);return n}}]),t}();e.default=s},function(t,e,i){"use strict";var n=d(i(0)),a=d(i(1)),r=d(i(326)),s=d(i(324)),u=d(i(323)),o=d(i(322)),l=d(i(141));function d(t){return t&&t.__esModule?t:{default:t}}var f=new(function(){function t(){(0,n.default)(this,t),this._userAgent=navigator.userAgent,this._osInfo=(0,r.default)(this._userAgent),this._browser=(0,s.default)(this._userAgent),this._features=(0,u.default)(this._osInfo),this._audio=(0,o.default)(this._browser)}return(0,a.default)(t,[{key:"info",get:function(){return this._userAgent}},{key:"platformName",get:function(){return this._osInfo.name}},{key:"mobile",get:function(){return this._osInfo.mobile}},{key:"desktop",get:function(){return this._osInfo.desktop}},{key:"os",get:function(){return this._osInfo.os}},{key:"environment",get:function(){return this._osInfo.environment}},{key:"browserName",get:function(){return this._browser.name}},{key:"browserVersion",get:function(){return this._browser.version}},{key:"features",get:function(){return this._features}},{key:"supportAudio",get:function(){return this._audio.audioData}},{key:"supportWebAudio",get:function(){return this._audio.webAudio}},{key:"audioFormats",get:function(){return this._audio.format}}]),t}());(0,l.default)(f),t.exports=f},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){var n=i(24);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){null!==t&&void 0!==e.image&&null!==e.image&&(null!==t.resource&&t.resource===e.image||t.setImage(e.image,!1),t.setFrameRect(e.frame))}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),r=s(i(232));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){(0,n.default)(this,t),this.name=e||"New Scene"}return(0,a.default)(t,[{key:"preloadDone",value:function(t){void 0!==this.scene&&(0,r.default)(this.scene,t)}},{key:"instanceDestroy",value:function(t){t.destroy&&t.destroy();var e=this.instances.indexOf(t);this.instances.splice(e,1)}},{key:"addGameObject",value:function(t,e){var i=void 0;return(i=0==arguments.length?new scintilla.GameObject:void 0!==e&&e?t.clone():t)._id=this.instances.length,i._game=this.game,this.instances.push(i),i.start(),i}},{key:"setBounds",value:function(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={NONE:0,IDLE:1,PRESSED:2,IDLEPRESSED:3,RELEASED:4}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={NONE:0,IN:1,OUT:2,WAIT:3,IDLE:4};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(15));function r(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,i){(0,n.default)(this,t),this.name=e||"Resource",this.type=i||a.default.None}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(5)),a=s(i(0)),r=s(i(1));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i,r){(0,a.default)(this,t),this._moduleType=e||"none",this._moduleName=i||"noName",this._enabled=!0,this.entity=null,this.moduleManager=r||null,(0,n.default)(this._moduleType),(0,n.default)(this._moduleName),null!==r&&(this.entity=r.entity)}return(0,r.default)(t,[{key:"type",get:function(){return this._moduleType}},{key:"name",get:function(){return this._moduleName}},{key:"enabled",get:function(){return this._enabled},set:function(t){(t=!!t)!==this._enabled&&(this._enabled=t)}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),r=s(i(33));function s(t){return t&&t.__esModule?t:{default:t}}s(i(32));var u=function(){function t(e,i,a,s){(0,n.default)(this,t),e=e||1/0,i=i||1/0,a=a||-1/0,s=s||-1/0,this.min=new r.default(e,i),this.max=new r.default(e+a,i+s)}return(0,a.default)(t,[{key:"set",value:function(t,e,i,n){return this.min.set(t,e),this.max.set(i,n),this}},{key:"setMin",value:function(t,e){return this.min.x=t,this.min.y=e,this}},{key:"setMax",value:function(t,e){return this.max.x=t,this.max.y=e,this}},{key:"move",value:function(t,e){this.min.x+=t,this.min.y+=e,this.max.x+=t,this.max.y+=e}},{key:"intersects",value:function(t){return this.max.x>=t.min.x&&this.max.y>=t.min.y&&this.min.x<=t.max.x&&this.min.y<=t.max.y||this.min.x>=t.max.x&&this.min.y>=t.max.y&&this.max.x<=t.min.x&&this.max.y<=t.min.y}},{key:"contains",value:function(t,e){return t>this.min.x&&e>this.min.y&&t<this.max.x&&e<this.max.y}},{key:"expand",value:function(t,e){e=e||t,this.max.x>this.min.x?(this.min.x-=t,this.max.x+=t):(this.min.x+=t,this.max.x-=t),this.max.y>this.min.y?(this.min.y-=e,this.max.y+=e):(this.min.y+=e,this.max.y-=e)}},{key:"merge",value:function(e){return e instanceof t?(this.min.x=Math.min(this.min.x,e.min.x),this.min.y=Math.min(this.min.y,e.min.y),this.max.x=Math.max(this.max.x,e.max.x),this.max.y=Math.max(this.max.y,e.max.y),this):e instanceof r.default?this.mergeWithPoint(e.x,e.y):(this.min.x=Math.min(this.min.x,e),this.min.y=Math.min(this.min.y,e),this.max.x=Math.max(this.max.x,e),this.max.y=Math.max(this.max.y,e),this)}},{key:"mergeWithPoint",value:function(t,e){return this.min.x=Math.min(this.min.x,t),this.min.y=Math.min(this.min.y,e),this.max.x=Math.max(this.max.x,t),this.max.y=Math.max(this.max.y,e),this}},{key:"extend",value:function(t){return t.min.x<this.min.x&&(this.min.x=t.min.x),t.min.y<this.min.y&&(this.min.y=t.min.y),t.max.x>this.max.x&&(this.max.x=t.max.x),t.max.y>this.max.y&&(this.max.y=t.max.y),this}},{key:"extendByPoint",value:function(t,e){return t<this.min.x&&(this.min.x=t),e<this.min.y&&(this.min.y=e),t>this.max.x&&(this.max.x=t),e>this.max.y&&(this.max.y=e),this}},{key:"limit",value:function(t,e,i,n){this.min.x<t&&(this.min.x=t),this.min.y<e&&(this.min.y=e),this.max.x>i&&(this.max.x=i),this.max.y>n&&(this.max.y=n)}},{key:"offset",value:function(t,e){var i={x:t,y:e};return i.x-=this.min.x,i.y-=this.min.y,this.max.x>this.min.x&&(i.x/=this.max.x-this.min.x),this.max.y>this.min.y&&(i.y/=this.max.y-this.min.y),i}},{key:"toString",value:function(){return"{ min: "+this.min.toString()+", max: "+this.max.toString()+" }"}},{key:"center",get:function(){return new r.default((this.max.x-this.min.x)/2,(this.max.y-this.min.y)/2)}},{key:"size",get:function(){return new r.default(this.max.x-this.min.x,this.max.y-this.min.y)}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=["Cache","Loader","EntityFactory","EntityHierarchy","Camera","SceneManager","UserInterface","Transition","EventManager","PoolManager"];(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e,i){var n=i(147),a=i(78);t.exports=Object.keys||function(t){return n(t,a)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){"use strict";var n={createFromResponse:function(t,e,i){if("function"==typeof URL)t.src=URL.createObjectURL(e);else{var n=new FileReader;n.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||i)+";base64,"+n.result.split(",")[1]},n.onerror=t.onerror,n.readAsDataURL(e)}},revoke:function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)}};t.exports=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){e?this._failedFiles.insert(t):this._successFiles.insert(t),this._filesLoading.erase(t),this._loadedFilesCount++,r.default.call(this),this._filesQueue.size>0?n.default.call(this):0===this._filesLoading.size&&a.default.call(this)};var n=s(i(126)),a=s(i(128)),r=s(i(182));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={createFileRequest:function(t,e){var i=n.merge(e,t.xhrSettings),a=new XMLHttpRequest;return a.open("GET",t.source,i.async),void 0!==t.xhrSettings.responseType&&(a.responseType=t.xhrSettings.responseType),a.timeout=i.timeout,a.onload=t.onLoad.bind(t),a.onerror=t.onError.bind(t),a.onprogress=t.onProgress.bind(t),void 0!==t.onReadyStateChange&&(a.onreadystatechange=t.onReadyStateChange.bind(t)),a.send(),a},createSettings:function(t,e,i){return void 0===t&&(t=""),void 0===e&&(e=!0),void 0===i&&(i=0),{responseType:t,timeout:i,async:e}},merge:function(t,e){var i={};if(void 0===t&&(i=n.createSettings()),e)for(var a in e)void 0!==e[a]&&(i[a]=e[a]);return i}};e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(2)),a=d(i(0)),r=d(i(1)),s=d(i(4)),u=d(i(3)),o=(d(i(48)),d(i(106))),l=d(i(212));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i){(0,a.default)(this,e),t=t||"New SceneEntity";var r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i||null));return r._transform=new o.default,r._pool=null,r.modules=new l.default(r),r.scene=null,r._pendingRemoval=!1,r}return(0,u.default)(e,t),(0,r.default)(e,[{key:"back",value:function(){return!!this.isPooled&&null!==this.scene&&(this._pendingRemoval=!0,this.game.system.pool.push(this))}},{key:"isPooled",get:function(){return null!==this._pool}},{key:"x",set:function(t){this._transform.position.x=t,this._transform.markDirty()},get:function(){return this._transform.position.x}},{key:"y",set:function(t){this._transform.position.y=t,this._transform.markDirty()},get:function(){return this._transform.position.y}},{key:"position",get:function(){return this._transform.position},set:function(t){this._transform.position=t,this._transform._isDirty=!0}},{key:"origin",get:function(){return this._transform.origin},set:function(t){this._transform.origin=t,this._transform._isDirty=!0}},{key:"origin.x",set:function(t){this._transform.origin.x=t,this._transform._isDirty=!0}},{key:"origin.y",set:function(t){this._transform.origin.y=t,this._transform._isDirty=!0}},{key:"scale",get:function(){return this._transform.scale},set:function(t){this._transform.scale=t,this._transform._isDirty=!0}},{key:"scale.x",set:function(t){this._transform.scale.x=t,this._transform._isDirty=!0}},{key:"scale.y",set:function(t){this._transform.scale.y=t,this._transform._isDirty=!0}},{key:"angle",get:function(){return this._transform.angle},set:function(t){this._transform.angle=t,this._transform._isDirty=!0}}]),e}(d(i(57)).default);e.default=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i){(0,n.default)(this,t),this._name=e||"New Entity",this._active=!0,this._pool=null,this.game=i||void 0,this.persistent=!1}return(0,a.default)(t,[{key:"destroy",value:function(){}},{key:"active",get:function(){return this._active},set:function(t){return(t=!!t)!==this._active&&(this._active=t),this._active}},{key:"name",get:function(){return this._name},set:function(t){return(t=!!t)!==this._name&&(this._name=t),this._name}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(2)),a=f(i(0)),r=f(i(1)),s=f(i(4)),u=f(i(3)),o=f(i(46)),l=f(i(15)),d=f(i(16));function f(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){(0,a.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,l.default.AnimationMachine));return i.states=new d.default,i}return(0,u.default)(e,t),(0,r.default)(e,[{key:"add",value:function(t,e){return this.states.has(t)?(Console.warn("AnimationMachineResource.add: Could not add state. There is already a state called '"+t+'".'),this):(void 0!==e?this.states.set(t,e):Console.warn("AnimationMachineResource.add: Could not add state with undefined animation."),this)}},{key:"get",value:function(t){return this.states.get(t)}},{key:"at",value:function(t){return this.states.at(t)}},{key:"duration",set:function(t){this.states.each(function(e,i){i.duration=t})}}]),e}(o.default);e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={Once:0,Loop:1,PingPong:2};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=y(i(2)),a=y(i(0)),r=y(i(1)),s=y(i(4)),u=y(i(3)),o=y(i(7)),l=y(i(46)),d=y(i(15)),f=y(i(19)),c=y(i(103)),h=y(i(215)),v=y(i(59));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function e(t){(0,a.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,d.default.Animation));return i.keyFrames=new o.default(null,!1),i._totalDuration=1,i._frameRate=30,i._secondsPerFrame=1,i._wrapMode=v.default.Loop,i.uniformDuration=!0,c.default.call(i,30,null,1),i}return(0,u.default)(e,t),(0,r.default)(e,[{key:"get",value:function(t){return this.keyFrames.at(t)}},{key:"duplicate",value:function(t,e){var i=this.keyFrames.at(t);return null!==i&&(void 0===e?this.keyFrames.push(i):this.keyFrames.splice(e,0,i)),c.default.call(this,this._frameRate,null),this}},{key:"remove",value:function(t){var e=this.keyFrames.eraseAt(t);return c.default.call(this,this._frameRate,null),e}},{key:"wrapMode",get:function(){return this._wrapMode}},{key:"loop",set:function(t){!0===t&&(this._wrapMode=v.default.Loop)}},{key:"duration",set:function(t){f.default.isNumber(t)&&c.default.call(this,null,t)},get:function(){return this._totalDuration}},{key:"frameRate",set:function(t){f.default.isNumber(t)&&c.default.call(this,t,null)},get:function(){return this._frameRate}},{key:"length",get:function(){return this.keyFrames.size}},{key:"size",get:function(){return this.keyFrames.size}},{key:"secondsPerFrame",get:function(){return this._secondsPerFrame}},{key:"totalDuration",get:function(){return this.uniformDuration?this._totalDuration:(0,h.default)(this.keyFrames)}}]),e}(l.default);e.default=_},function(t,e,i){"use strict";e.__esModule=!0;var n=r(i(2)),a=r(i(218));function r(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,i,r){null===e&&(e=Function.prototype);var s=(0,a.default)(e,i);if(void 0===s){var u=(0,n.default)(e);return null===u?void 0:t(u,i,r)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(r):void 0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(2)),a=d(i(0)),r=d(i(1)),s=d(i(4)),u=d(i(3)),o=d(i(47)),l=d(i(9));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i,r){(0,a.default)(this,e);var u=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"animation",t,i));return u._resource=l.default.value(r,"resource",null),u._spriteModule=l.default.value(r,"spriteModule",null),u.isPlaying=!1,u.isPaused=!1,u._timer=0,u._position=0,u.currentFrame=0,u.speed=0,u}return(0,u.default)(e,t),(0,r.default)(e,[{key:"setDuration",value:function(t){null!==this._resource&&(this._resource.duration=t)}},{key:"play",value:function(){return this.isPlaying||null===this._resource?this:(this.isPlaying=!0,this.isPaused=!1,this)}},{key:"pause",value:function(){return this.isPaused||null===this._resource?this:(this.isPaused=!0,this.isPlaying=!1,this)}},{key:"stop",value:function(){return this.isPaused=!1,this.isPlaying=!1,this.currentFrame=0,this._timer=0,this}},{key:"restart",value:function(){return this.stop(),this.isPlaying=!0,this}}]),e}(o.default);e.default=f},function(t,e,i){t.exports={default:i(249),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(5)),a=o(i(125)),r=o(i(263)),s=o(i(262)),u=o(i(26));function o(t){return t&&t.__esModule?t:{default:t}}var l={in:a.default,out:r.default,inout:s.default,Type:u.default};(0,n.default)(l),e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={NONE:0,FILL:1};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),r=s(i(68));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){if((0,n.default)(this,t),this._content=[],this._size=0,Array.isArray(e))for(var i=0;i<e.length;i++)this.insert(e[i])}return(0,a.default)(t,[{key:"insert",value:function(t){return-1===this._content.indexOf(t)&&this._content.push(t),this}},{key:"get",value:function(t){var e=this._content.indexOf(t);return e>-1?this._content[e]:null}},{key:"at",value:function(t){return this._content[t]}},{key:"has",value:function(t){return this._content.indexOf(t)>-1}},{key:"erase",value:function(t){var e=this._content.indexOf(t);return e>-1&&this._content.splice(e,1),this}},{key:"clear",value:function(){return this._content.length=0,this}},{key:"each",value:function(t,e){var i,n=this._content.slice(),a=n.length;if(e)for(i=0;i<a&&!1!==t.call(e,n[i],i);i++);else for(i=0;i<a&&!1!==t(n[i],i);i++);return this}},{key:"sort",value:function(t){if(void 0!==t)return(0,r.default)(this._content,t)}},{key:"content",value:function(){return this._content}},{key:"size",get:function(){return this._content.length}},{key:"length",get:function(){return this._content.length}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(2)),a=f(i(0)),r=f(i(1)),s=f(i(4)),u=f(i(3)),o=f(i(46)),l=f(i(15)),d=f(i(9));function f(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t,i,r){(0,a.default)(this,e);var u=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,l.default.Tilemap));return u.metadata=i||null,u.tilesets=d.default.value(r,"tilesets",null),u.tileLayers=d.default.value(r,"tilelayers",null),u.objectLayers=d.default.value(r,"objectlayers",null),u}return(0,u.default)(e,t),(0,r.default)(e,[{key:"getObjectsLayer",value:function(t){return this.objectLayers.find(function(e){if(e.name===t)return e})||null}},{key:"getTileLayer",value:function(t){return this.tileLayers.find(function(e){if(e.name===t)return e})||null}},{key:"getTilesetByGID",value:function(t){return this.tilesets.each(function(e){if(e.hasGID(t))return e})||null}},{key:"getTileGID",value:function(t){return this.tilesets.each(function(e){var i=e.getTileGID(t);if(void 0!==i)return i})||null}}]),e}(o.default);e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.length;return i<2?t:(void 0===e&&(e=function(t,e){return t<e?-1:t===e?0:1}),function i(n,a){var r=a-n;if(!(r<2)){var s=n+(r>>>1);return i(n,s),i(s,a),function(i,n,a){for(var r=n-i,s=a-n,u=t.slice(i,n),o=t.slice(n,a),l=i,d=0,f=0;d<r&&f<s;)e(u[d],o[f])<=0?t[l++]=u[d++]:t[l++]=o[f++];for(;d<r;)t[l++]=u[d++];for(;f<s;)t[l++]=o[f++];return t}(n,s,a)}}(0,i))}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=h(i(2)),a=h(i(0)),r=h(i(1)),s=h(i(4)),u=h(i(3)),o=h(i(22)),l=h(i(27)),d=h(i(132)),f=h(i(288)),c=h(i(7));function h(t){return t&&t.__esModule?t:{default:t}}var v=function(t){function e(t,i){(0,a.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"tilemap",t));r.resource=i,r.tileWidth=i.metadata.tileWidth,r.tileHeight=i.metadata.tileHeight,r.width=i.metadata.width,r.height=i.metadata.height,r.orientation=i.metadata.orientation,r.pixelsWidth=i.metadata.pixelsWidth,r.pixelsHeight=i.metadata.pixelsHeight,r.animator=void 0,r.culling={method:0,start:{x:0,y:0},end:{x:0,y:0}},r.floorTiles=!1,r.tilesets=i.tilesets,r.layers=new c.default,r.objectLayers=i.objectLayers;for(var u=!1,o=i.tileLayers.length-1;o>=0;o--){var l=i.tileLayers.at(o);l.hasAnimatedTiles&&(u=!0),r.layers.push(new d.default(r,l))}return!0===u&&(r.animator=new f.default(r,r.layers)),r}return(0,u.default)(e,t),(0,r.default)(e,[{key:"getObjectsLayer",value:function(t){return this.resource.getObjectsLayer(t)}},{key:"getTileLayer",value:function(t){return this.resource.getTileLayer(t)}}]),e}(o.default);e.default=v,l.default.register("tilemap",function(t,e){var i=null,n=t.entity.game.system.cache;void 0!==n&&(i=n.tilemap.get(e));var a=new v(t,i);return a.floorTiles=t.entity.game.config.floorTiles||!1,a})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n){var a={x:0,y:0};if(void 0===n)a.x=t*i.x-e*i.y,a.y=t*i.y-e*i.x;else{var r=t-n.x,s=e-n.y;a.x=n.x+r*i.x-s*i.y,a.y=n.y-r*i.y-s*i.x}return a}},function(t,e,i){var n=i(72),a=i(52),r=i(28),s=i(83),u=i(29),o=i(150),l=Object.getOwnPropertyDescriptor;e.f=i(30)?l:function(t,e){if(t=r(t),e=s(e,!0),o)try{return l(t,e)}catch(t){}if(u(t,e))return a(!n.f.call(t,e),t[e])}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var n=i(25),a=i(13),r=i(84),s=i(75),u=i(31).f;t.exports=function(t){var e=a.Symbol||(a.Symbol=r?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||u(e,t,{value:s.f(t)})}},function(t,e,i){var n=i(50)("meta"),a=i(24),r=i(29),s=i(31).f,u=0,o=Object.isExtensible||function(){return!0},l=!i(40)(function(){return o(Object.preventExtensions({}))}),d=function(t){s(t,n,{value:{i:"O"+ ++u,w:{}}})},f=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,n)){if(!o(t))return"F";if(!e)return"E";d(t)}return t[n].i},getWeak:function(t,e){if(!r(t,n)){if(!o(t))return!0;if(!e)return!1;d(t)}return t[n].w},onFreeze:function(t){return l&&f.NEED&&o(t)&&!r(t,n)&&d(t),t}}},function(t,e,i){e.f=i(35)},function(t,e,i){var n=i(85);t.exports=function(t){return Object(n(t))}},function(t,e,i){var n=i(31).f,a=i(29),r=i(35)("toStringTag");t.exports=function(t,e,i){t&&!a(t=i?t:t.prototype,r)&&n(t,r,{configurable:!0,value:e})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(25),a=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return a[t]||(a[t]={})}},function(t,e,i){var n=i(79)("keys"),a=i(50);t.exports=function(t){return n[t]||(n[t]=a(t))}},function(t,e,i){var n=i(41),a=i(350),r=i(78),s=i(80)("IE_PROTO"),u=function(){},o=function(){var t,e=i(149)("iframe"),n=r.length;for(e.style.display="none",i(345).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),o=t.F;n--;)delete o.prototype[r[n]];return o()};t.exports=Object.create||function(t,e){var i;return null!==t?(u.prototype=n(t),i=new u,u.prototype=null,i[s]=t):i=o(),void 0===e?i:a(i,e)}},function(t,e){t.exports={}},function(t,e,i){var n=i(24);t.exports=function(t,e){if(!n(t))return t;var i,a;if(e&&"function"==typeof(i=t.toString)&&!n(a=i.call(t)))return a;if("function"==typeof(i=t.valueOf)&&!n(a=i.call(t)))return a;if(!e&&"function"==typeof(i=t.toString)&&!n(a=i.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=!0},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(12));e.default=function t(){var e=void 0,i=void 0,s=void 0,u=void 0,o=void 0,l=void 0,d=arguments[0]||{},f=1,c=arguments.length,h=!1;for("boolean"==typeof d&&(h=d,d=arguments[f]||{},f++),"object"===(void 0===d?"undefined":(0,n.default)(d))||r.default.isFunction(d)||(d={}),f===c&&(d=this,f--);f<c;f++)if(null!=(e=arguments[f]))for(i in e)s=d[i],d!==(u=e[i])&&(h&&u&&((0,a.default)(u)||(o=Array.isArray(u)))?(o?(o=!1,l=s&&Array.isArray(s)?s:[]):l=s&&(0,a.default)(s)?s:{},d[i]=t(h,l,u)):void 0!==u&&(d[i]=u));return d};var a=s(i(332)),r=s(i(19));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.context=new AudioContext,void 0===t.context.createGain?t.masterVolume=t.context.createGainNode():t.masterVolume=t.context.createGain(),t.masterVolume.gain.value=1,t.masterVolume.connect(t.context.destination),t.destination=t.masterVolume,t.locked="suspended"===t.context.state&&"ontouchstart"in window}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=y(i(12)),a=y(i(2)),r=y(i(0)),s=y(i(1)),u=y(i(4)),o=y(i(3)),l=y(i(17)),d=y(i(9)),f=y(i(6)),c=y(i(11)),h=y(i(18)),v=y(i(14));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function e(t,i,s,o,l){(0,r.default)(this,e);var h={type:c.default.json,ext:d.default.value(t,"ext","json"),responseType:"text",tag:t,url:d.default.value(t,"file",i),path:s,xhrSettings:d.default.value(t,"xhr",o)},v=(0,u.default)(this,(e.__proto__||(0,a.default)(e)).call(this,h));return"object"===(0,n.default)(h.url)&&(v.data=h.url,v.state=f.default.DONE),v}return(0,o.default)(e,t),(0,s.default)(e,[{key:"onProcessing",value:function(t){this.state=f.default.PROCESSING,this.data=JSON.parse(this.xhrRequest.responseText),this.onDone(),t(this)}}]),e}(l.default);e.default=_,v.default.register("json",function(t,e,i,n){return h.default.call(this,new _(t,e,this.path,n)),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=y(i(2)),a=y(i(0)),r=y(i(1)),s=y(i(4)),u=y(i(3)),o=y(i(17)),l=y(i(9)),d=y(i(11)),f=y(i(21)),c=y(i(6)),h=y(i(18)),v=y(i(14));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function e(t,i,r,u,o){(0,a.default)(this,e);var c="string"==typeof t?t:l.default.value(t,"key",""),h={type:d.default.script,ext:l.default.value(t,"ext",f.default.getExtension(i)||"js"),responseType:"text",tag:c,url:l.default.value(t,"file",i),path:r,xhrSettings:l.default.value(t,"xhr",u)};return(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,h))}return(0,u.default)(e,t),(0,r.default)(e,[{key:"onPostLoad",value:function(t,e){this.state=c.default.PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrRequest.responseText,document.head.appendChild(this.data),this.loader.game.events.dispatch("file_postload_"+this.tag)}}]),e}(o.default);e.default=_,v.default.register("script",function(t,e,i,n){return h.default.call(this,new _(t,e,this.path,n)),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=v(i(2)),a=v(i(0)),r=v(i(1)),s=v(i(4)),u=v(i(3)),o=v(i(60)),l=i(186),d=(v(l),v(i(19))),f=v(i(15)),c=v(i(32)),h=v(i(103));function v(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,i,r){(0,a.default)(this,e);var u=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return u.mainImage=i||null,u.type=f.default.Spritesheet,u}return(0,u.default)(e,t),(0,r.default)(e,[{key:"addFrame",value:function(t,e,i,n,a,r,s){void 0===r&&(r=this._secondsPerFrame),void 0===s&&(s=!0),a=void 0===a?this.mainImage:this.cache.image.get(a);var u=new l.SpritesheetKeyFrame(this,a,new c.default(t,e,i,n),r);return this.keyFrames.push(u),!0===s&&h.default.call(this,this._frameRate,null),this}},{key:"addStrip",value:function(t,e,i,n,a,r,s){void 0===r&&(r=a),void 0===s?s={x:0,y:0}:d.default.isNumber(s)&&(s={x:s,y:s});for(var u=t,o=e,l=0;l<a;l++)this.addFrame(u,o,i,n,void 0,void 0,!1),u+=s.x+i,l%r==r-1&&(u=t,o+=s.y+n);return h.default.call(this,this._frameRate,null),this}},{key:"addImageStrip",value:function(t,e,i,n,a,r,s,u){}}]),e}(o.default);e.default=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(2)),a=l(i(0)),r=l(i(4)),s=l(i(3)),u=l(i(46)),o=l(i(15));function l(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,i){(0,a.default)(this,e);var s=(0,r.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,o.default.Image));return s.data=i,s.width=0,s.height=0,s.imageUrl=null,(s.data.complete||s.data.getContext)&&s.data.width&&s.data.height&&(s.width=s.data.naturalWidth||s.data.width,s.height=s.data.naturalHeight||s.data.height),s}return(0,s.default)(e,t),e}(u.default);e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i,a){(0,n.default)(this,t),this.name=a||"",this.manager=e,this._system=e._system,this.resource=i,this._volume=1,this.duration=0,this.startTime=0,this.currentTime=0,this.position=0,this.speed=0,this.isPlaying=!1,this.isPaused=!1,this.mute=!1,this.loop=!1,this.persistent=!1,this._ended=!1,this.once=!1,this._requireRemoval=!1}return(0,a.default)(t,[{key:"play",value:function(){if(!this.isPlaying)return this.isPaused&&(this.isPaused=!1),this.isPlaying=!0,this}},{key:"pause",value:function(){return this.isPaused||!this.isPlaying?this:(this.isPlaying=!1,this.isPaused=!0,this)}},{key:"stop",value:function(){return this.isPaused||this.isPlaying?(this.isPlaying=!1,this.isPaused=!1,this):this}},{key:"destroy",value:function(){this._requireRemoval=!0,this.isPlaying=!1,this.isPaused=!1,this.tag=void 0}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),r=s(i(7));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){(0,n.default)(this,t),this.game=e,this._soundCache=e.system.cache.audio,this._noAudio=e.config.audio.noAudio,this._sounds=null,this._noAudio||(this._sounds=new r.default),this._system=null,this.add=null,this.volume=1,this.mute=!1,this.pauseOnBlur=!0,this.masterVolume=null,this._removalList=[]}return(0,a.default)(t,[{key:"at",value:function(t){return this._noAudio?null:this._sounds.at(t)}},{key:"play",value:function(t,e,i,n){if(this._noAudio)return null;var a=this.add(t,e,i,n);return void 0!==a&&null!==a?(a.play(),a):null}},{key:"playPersistent",value:function(t,e,i,n){var a=this.play(t,e,i,n);return null!==a&&(a.persistent=!0),a}},{key:"playOnce",value:function(t,e,i,n){var a=this.play(t,e,i,n);return null!==a&&(a.once=!0),a}},{key:"get",value:function(t){return this._sounds.each(function(e){if(e.name===t)return e})||null}},{key:"remove",value:function(t){if(this._noAudio)return!1;for(var e=_sounds.length;e--;)if(_sounds[e]===t)return _sounds[e].destroy(!1),_sounds.splice(e,1),!0;return!1}},{key:"stopAll",value:function(t){if(!this._noAudio){void 0===t&&(t=!1);for(var e=0;e<this._sounds.length;e++){var i=this._sounds.at(e);i&&(i.stop(),!0===t&&i.destroy())}}}},{key:"pauseAll",value:function(){if(!this._noAudio)for(var t=0;t<_sounds.length;t++)_sounds[t]&&_sounds[t].pause()}},{key:"resumeAll",value:function(){if(!this._noAudio)for(var t=0;t<_sounds.length;t++)_sounds[t]&&_sounds[t].resume()}},{key:"destroy",value:function(){if(null!==this._system){this._system.destroy(),this.stopAll();for(var t=0;t<this._sounds.length;t++){var e=this._sounds.at(t);e&&e.destroy()}this._sounds.clear()}}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(0)),a=d(i(1)),r=d(i(16)),s=d(i(98)),u=d(i(19)),o=d(i(190)),l=d(i(10));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(){function t(){(0,n.default)(this,t),this._signalsMap=new r.default}return(0,a.default)(t,[{key:"create",value:function(t){var e=this._signalsMap.get(t);if(void 0!==e&&null!=e)return e;var i=new s.default;return this._signalsMap.set(t,i),i}},{key:"subscribe",value:function(t,e,i,n){var a=this._signalsMap.get(t);return void 0===a||null===a?(console.warn("EventManager.subscribe: There is no registered event called '"+t+"'."),this):u.default.isFunction(e)?(a.subscribe(e,i,n),this):(console.warn("EventManager.subscribe: The variable is not a function."),this)}},{key:"subscribeOnce",value:function(t,e,i,n){var a=this._signalsMap.get(t);return void 0===a||null===a?(console.warn("EventManager.subscribeOnce: There is no registered event called '"+t+"'."),this):u.default.isFunction(e)?(a.subscribeOnce(e,i,n),this):(console.warn("EventManager.subscribeOnce: The variable '"+t+"' is not a function."),this)}},{key:"dispatch",value:function(t){var e=this._signalsMap.get(t);if(void 0===e||null===e)return this;var i=arguments.length>1?[arguments[1]]:Array.apply(null,arguments);return e.dispatch(i),this}},{key:"has",value:function(t){return this._signalsMap.has(t)}}]),t}();e.default=f,l.default.register("EventManager",f,"events",function(){!function(t,e){for(var i=0;i<e.length;i++)t.create(e[i])}(this,o.default)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){var n=t._bindings.each(function(t,n){if(t._listener===e&&t._context===i)return n});return void 0===n&&(n=-1),n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i,a,r,s){(0,n.default)(this,t),this._signal=e,this._listener=i,this._context=a,this._priority=r||0,this.active=!0,this.args=void 0,this._isOnce=s||!1}return(0,a.default)(t,[{key:"execute",value:function(t){var e=void 0,i=void 0;return this.active&&this._listener&&(i=this.args?this.args.concat(t):t,e=this._listener.apply(this._context,i),this._isOnce&&this.detach()),e}},{key:"detach",value:function(){this.isBound()&&this._signal.unsubscribe(this._listener,this._context)}},{key:"isBound",value:function(){return!!this._signal&&!!this._listener}},{key:"_destroy",value:function(){delete this._signal,delete this._listener,delete this.context}},{key:"isOnce",get:function(){return this._isOnce}},{key:"listener",get:function(){return this._listener}},{key:"signal",get:function(){return this._signal}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(0)),a=l(i(1)),r=l(i(7)),s=(l(i(97)),l(i(96))),u=l(i(193)),o=l(i(192));function l(t){return t&&t.__esModule?t:{default:t}}l(i(19));var d=function(){function t(){(0,n.default)(this,t),this._bindings=new r.default,this.active=!0,this._shouldPropagate=!0}return(0,a.default)(t,[{key:"has",value:function(t,e){return-1!==(0,s.default)(this,t,e)}},{key:"subscribe",value:function(t,e,i){return(0,u.default)(t,"subscribe"),(0,o.default)(this,t,e,i,!1),this}},{key:"subscribeOnce",value:function(t,e,i){return(0,u.default)(t,"subscribeOnce"),(0,o.default)(this,t,e,i,!0),this}},{key:"unsubscribe",value:function(t,e){(0,u.default)(t,"unsubscribe");var i=(0,s.default)(this,t,e);return-1!==i&&(this._bindings.at(i)._destroy(),this._bindings.eraseAt(i)),t}},{key:"unsubscribeAll",value:function(){}},{key:"dispatch",value:function(t){if(this.active){var e=this._bindings.length;if(e){arguments.length>1&&(t=Array.prototype.slice.call(arguments));var i=this._bindings.childs.slice();do{e--}while(i[e]&&this._shouldPropagate&&!1!==i[e].execute(t))}}}},{key:"destroy",value:function(){this.unsubscribeAll(),delete this._bindings}},{key:"propagate",set:function(t){this._shouldPropagate=t},get:function(){return this._shouldPropagate}},{key:"count",get:function(){return this._bindings.size}}]),t}();e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(0)),a=l(i(1)),r=l(i(7)),s=l(i(100)),u=l(i(197)),o=l(i(196));function l(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e,i,a,s){(0,n.default)(this,t),this.game=e,this._baseEntity=a,this.name=i||a.name||"Entity Pool",this._pool=new r.default,this._pooledEntities=new r.default,void 0===s&&(s=1),this.add(s)}return(0,a.default)(t,[{key:"add",value:function(t){void 0===t&&(t=1);for(var e=0;e<t;e++){var i=(0,s.default)(this._baseEntity,this.game);void 0!==i.start&&null!==i.start&&i.start.call(i),this._pool.push(i)}return this}},{key:"pull",value:function(){if(0===this._pool.size)return console.warn("Pool.pull: Could not pull entity. The pool is empty"),null;var t=this._pool.popFront();if(void 0!==t&&null!==t){if(!0===(0,u.default)(this,t,this.game))return this._pooledEntities.push(t),t;this._pool.push(t)}else console.warn("Pool.pull: Could not pull entity. The pool is empty");return null}},{key:"push",value:function(t){if(void 0===t)return!1;var e=this._pooledEntities.indexOf(t);return-1!==e&&((0,o.default)(t,this.game),this._pooledEntities.eraseAt(e),this._pool.push(t),!0)}},{key:"remove",value:function(t){var e=this._pooledEntities.indexOf(t);return e>-1&&(this._pooledEntities.eraseAt(e),!0)}},{key:"clear",value:function(){return this._pool.clear(),this._pooledEntities.clear(),this}},{key:"backAll",value:function(){for(var t=0;t<this._pooledEntities.length;t++){var e=this._pooledEntities.at(t);RemoveEntityFromGame(e,this.game),this._pool.push(e)}return this._pooledEntities.childs.length=0,this}},{key:"length",get:function(){return this._pool.size}}]),t}();e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(12));e.default=function(t,e){var i=void 0;if(t instanceof a.default)i=t;else if((void 0===t?"undefined":(0,n.default)(t))===a.default)i=new t(t.name,e);else if("object"===(void 0===t?"undefined":(0,n.default)(t))){var s=new a.default(t.name||void 0,e);i=(0,r.default)(!0,s,t)}else if("function"==typeof t){var u=new a.default(t.name,e),o=new t;i=(0,r.default)(!0,u,o)}return i};var a=s(i(56)),r=s(i(87));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.scene=e.scene.currentScene,void 0!==t.start&&null!==t.start&&t.start.call(t),e.system.entityList.addInstance(t),t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t._resource;if(null!==e){if("animMachine"===t.name){var i=e.at(0);t._currentState=i||null,e=i}else t.loop=e.loop;e.type===a.default.Spritesheet&&(0,n.default)(t._spriteModule,e.get(0)),t.play()}};var n=r(i(42)),a=r(i(15));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){void 0===i&&(i=this.keyFrames.length),null===e&&null===t?(this._frameRate=60,this._totalDuration=t/i*1e3):e&&null===t?(this._totalDuration=e,this._frameRate=i/(e/1e3)):(this._frameRate=t,this._totalDuration=i/t*1e3),this._secondsPerFrame=1e3/this._frameRate}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(2)),a=c(i(0)),r=c(i(1)),s=c(i(4)),u=c(i(3)),o=c(i(22)),l=c(i(32)),d=c(i(222)),f=c(i(27));function c(t){return t&&t.__esModule?t:{default:t}}c(i(221));var h=function(t){function e(t){(0,a.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"sprite",t));return i.resource=null,i.frame=new l.default,i}return(0,u.default)(e,t),(0,r.default)(e,[{key:"setFrame",value:function(t,e,i,n){return this.frame.set(t,e,i,n),this}},{key:"setFrameRect",value:function(t){return this.frame.copy(t),this}},{key:"setSprite",value:function(t){if(null!==this.entity&&void 0!==this.entity){var e=this.entity.game.system.cache.image.get(t);this.setImage(e,!0)}else Console.warn("Sprite.setSprite: Could not set Sprite. The entity is null in the game");return this}},{key:"setImage",value:function(t,e){return void 0===e&&(e=!0),this.resource!==t&&(this.resource=t),!0===e&&null!==t&&this.setFrame(0,0,this.resource.width,this.resource.height),this}},{key:"render",value:function(t){return!!this._enabled&&!!this.resource&&((0,d.default)(t,this.resource.data,this.frame,this.entity._transform,this._originInPixels),!0)}},{key:"width",get:function(){return this.frame.width}},{key:"height",get:function(){return this.frame.height}}]),e}(o.default);e.default=h,f.default.register("sprite",function(t,e){var i=new h(t);return void 0!==e&&void 0!==e[0]&&(i.setSprite(e[0]),null!==i.resource&&(void 0===e[1]&&(e[1]=0),void 0===e[2]&&(e[2]=0),void 0===e[2]&&(e[3]=i.resource.width),void 0===e[4]&&(e[4]=i.resource.height),i.setFrame(e[1],e[2],e[3],e[4]))),i})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1)),r=u(i(27)),s=u(i(224));function u(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){(0,n.default)(this,t),this.moduleManager=e}return(0,a.default)(t,[{key:"sprite",value:function(t,e,i,n,a){return r.default.attach(this.moduleManager,"sprite",[t,e,i,n,a])}},{key:"tilemap",value:function(t){return void 0===t||null==t?(console.warn("ModuleAttacher.tilemap: Can not create Tilemap module without a proper tag name."),null):r.default.attach(this.moduleManager,"tilemap",t)}},{key:"spritesheet",value:function(t){var e=(0,s.default)(this.moduleManager,"spritesheet","SpriteSheet");return null===e?null:r.default.attach(this.moduleManager,"spritesheet",[e,t])}},{key:"animMachine",value:function(t){var e=(0,s.default)(this.moduleManager,"animMachine","AnimationMachine");return null===e?null:r.default.attach(this.moduleManager,"animMachine",[e,t])}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1)),r=u(i(33)),s=u(i(38));function u(t){return t&&t.__esModule?t:{default:t}}u(i(48));var o=function(){function t(){(0,n.default)(this,t),this.matrix=new s.default(1),this.position=new r.default(0,0,this),this.scale=new r.default(1,1,this),this.origin=new r.default(0,0,this),this.angle=0,this.rotation=0,this._cosSin={x:1,y:0},this._oldRotation=-1,this._isDirty=!0}return(0,a.default)(t,[{key:"markDirty",value:function(){this._isDirty=!0}},{key:"destroy",value:function(){delete this.position,delete this.scale,delete this.matrix,delete this.worldPosition,delete this.worldScale,delete this.origin,delete this.bounds,delete this.globalBounds,delete this._cosSin}},{key:"reset",value:function(){this.matrix.setIdentity(),this._isDirty=!0,this._cosSin.x=1,this._cosSin.y=0,this.position.set(0,0),this.angle=0,this.rotation=0,this._oldRotation=0,this.origin.set(0,0),this.scale.set(0,0)}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(63)),a=o(i(0)),r=o(i(1)),s=o(i(236)),u=o(i(8));function o(t){return t&&t.__esModule?t:{default:t}}var l=new(function(){function t(){(0,a.default)(this,t),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=4022871197,this._mash=(0,s.default)()}return(0,r.default)(t,[{key:"rand",value:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.s0=this.s1,this.s1=this.s2,this.c=0|t,this.s2=t-this.c,this.s2}},{key:"uint32",value:function(){return 4294967296*this.rand()}},{key:"frac",value:function(){return this.rand()+1.1102230246251565e-16*(2097152*this.rand()|0)}},{key:"real",value:function(){return this.uint32()+this.frac()}},{key:"range",value:function(t,e){return this.frac()*(e-t)+t}},{key:"irange",value:function(t,e){return u.default.floor(this.range(0,e-t)+t)}},{key:"reset",value:function(t){this.n=4022871197,this.s0=this._mash(" "),this.s1=this._mash(" "),this.s2=this._mash(" "),this.c=1;for(var e=0;e<t.length&&null!=t[e];e++){var i=t[e];this.s0-=this._mash(i),this.s0+=~~(this.s0<0),this.s1-=this._mash(i),this.s1+=~~(this.s1<0),this.s2-=this._mash(i),this.s2+=~~(this.s2<0)}}}]),t}());(0,n.default)(l),e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1)),r=u(i(110)),s=u(i(109));function u(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){(0,n.default)(this,t),this.game=e,this.mouse=null,this.keyboard=null}return(0,a.default)(t,[{key:"init",value:function(){this.keyboard=new r.default(this.game),this.mouse=new s.default(this.game),this.keyboard.init(),this.mouse.init()}},{key:"update",value:function(){this.keyboard.update(),this.mouse.update()}},{key:"reset",value:function(){this.keyboard.reset(),this.mouse.reset()}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MouseEvent=void 0;var n=r(i(0)),a=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}r(i(112));var s=e.MouseEvent={NONE:0,PRESS:1,PRESSED:2,RELEASE:3},u=function(){function t(e){(0,n.default)(this,t),this.x=0,this.y=0,this.game=e,this.canvas=e.system.render.canvas,this.button=0,this.wheelDelta=0,this.active=!0,this._mouseButtons=[],this._mouseButtonsLocks=[],this._mouseButtonsLocksPressed=[],this._mouseDownDuration=[],this._onMouseDown=null,this._onMouseMove=null,this.reset()}return(0,a.default)(t,[{key:"reset",value:function(){for(var t=0;t<3;t++)this._mouseButtons[t]=!1,this._mouseButtonsLocks[t]=s.NONE,this._mouseButtonsLocksPressed[t]=s.NONE,this._mouseDownDuration[t]=0}},{key:"init",value:function(){var t=this;this._onMouseDown=function(e){return t.onMouseDown(e)},this._onMouseUp=function(e){return t.onMouseUp(e)},this._onMouseMove=function(e){return t.onMouseMove(e)},this.canvas.addEventListener("mousedown",this._onMouseDown,!0),this.canvas.addEventListener("mousemove",this._onMouseMove,!0),this.canvas.addEventListener("mouseup",this._onMouseUp,!0),this.canvas.addEventListener("mouseover",this._onMouseOver,!0),this.canvas.addEventListener("mouseout",this._onMouseOut,!0)}},{key:"onMouseMove",value:function(t){if(this.active){var e=this.canvas.getBoundingClientRect();this.x=Math.floor((t.clientX-e.left)/(e.right-e.left)*this.canvas.width),this.y=Math.floor((t.clientY-e.top)/(e.bottom-e.top)*this.canvas.height)}}},{key:"onMouseDown",value:function(t){if(this.active){var e=t.button;this._mouseButtonsLocksPressed[e]!=s.PRESSED&&this._mouseButtonsLocksPressed[e]!=s.PRESS&&(this._mouseButtonsLocksPressed[e]=s.PRESSED,this._mouseDownDuration[e]=1),this._mouseButtons[e]=!0,this._mouseButtonsLocks[e]=s.PRESS,t.preventDefault()}}},{key:"onMouseUp",value:function(t){if(this.active){var e=t.button;this._mouseButtons[e]=!1,this._mouseButtonsLocks[e]=s.RELEASE,this._mouseButtonsLocksPressed[e]=s.NONE,t.preventDefault()}}},{key:"pressed",value:function(t){var e=!1;return this._mouseButtonsLocksPressed[t]==s.PRESSED&&(e=!0,this._mouseButtonsLocksPressed[t]=s.PRESS),this._mouseButtons[t]&&e}},{key:"release",value:function(t){var e;e=this._mouseButtonsLocks[t]!=s.PRESSED&&this._mouseButtonsLocks[t]!=s.PRESS&&this._mouseButtonsLocks[t]!=s.NONE;var i=!this._mouseButtons[t]&&e;return this._mouseButtonsLocks[t]=s.NONE,i}},{key:"press",value:function(t){var e;return e=this._mouseButtonsLocks[t]!=s.RELEASE&&this._mouseButtonsLocks[t]!=s.NONE,this._mouseButtons[t]&&e}},{key:"update",value:function(){for(var t=0;t<this._mouseButtons.length;t++)this._mouseButtonsLocksPressed[t]==s.PRESSED&&(this._mouseDownDuration[t]>0?this._mouseDownDuration[t]--:this._mouseButtonsLocksPressed[t]=s.PRESS)}},{key:"posRelativeTo",value:function(t){var e={x:0,y:0};return e.x=this.x-t.x,e.y=this.y-t.y,e}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(0)),a=c(i(1)),r=c(i(16)),s=c(i(7)),u=c(i(111)),o=c(i(113)),l=c(i(44)),d=c(i(238)),f=c(i(237));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e){(0,n.default)(this,t),this.game=e,this._enabled=!0,this.eventTarget=null,this.eventHandler=null,this._eventQueue=new s.default,this._keyMapping=new r.default,this._keyWatch=new r.default,this._keyGarbage=[],this.lastKey=null}return(0,a.default)(t,[{key:"reset",value:function(){for(var t in this._keyMapping.clear(),o.default)if(o.default.hasOwnProperty(t)){var e=o.default[t];this._keyMapping.set(e,new u.default(e,this.game))}}},{key:"init",value:function(){this.reset(),this.eventTarget=document;var t=this,e=function(e){e.defaultPrevented||t._eventQueue.push(e)};this.eventHandler=e,this.eventTarget.addEventListener("keydown",e,!1),this.eventTarget.addEventListener("keyup",e,!1)}},{key:"stop",value:function(){this.eventTarget.removeEventListener("keydown",this.eventHandler),this.eventTarget.removeEventListener("keyup",this.eventHandler),this._onKeyDown=null,this._onKeyUp=null,this._onKeyPress=null,this._keyMapping.clear()}},{key:"update",value:function(){if(this._enabled){if(0!==this._keyWatch.length){var t=this;this._keyWatch.each(function(e,i){i.event===l.default.PRESSED?i._event=l.default.IDLEPRESSED:i.event===l.default.RELEASED&&(i._event=l.default.NONE,t._keyGarbage.push(e))}),0!==this._keyGarbage.length&&(this._keyWatch.eraseList(this._keyGarbage),this._keyGarbage.splice(0,this._keyGarbage.length))}var e=this._eventQueue.size;if(0!==e)for(var i=this._eventQueue.splice(0,e),n=0;n<e;n++){var a=i[n],r=a.keyCode,s=this._keyMapping.get(r);void 0!==s&&null!==s&&("keydown"===a.type?!1===s.status&&(s.event===l.default.NONE&&this._keyWatch.set(r,s),(0,d.default)(a,s)):(0,f.default)(a,s))}}}},{key:"pressed",value:function(t){return this._keyMapping.get(t).isPressed()}},{key:"release",value:function(t){return this._keyMapping.get(t).isReleased()}},{key:"press",value:function(t){return this._keyMapping.get(t).status}},{key:"enabled",get:function(){return this._enabled},set:function(t){(t=!!t)!==this._enabled&&(t||this.reset(),this._enabled=t)}}]),t}();e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),r=s(i(44));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i){(0,n.default)(this,t),this.game=i,this.keyCode=e,this._enabled=!0,this.status=!1,this.press=!1,this.release=!1,this.preventDefault=!0,this._event=r.default.NONE,this.pressTime=0,this.pressDuration=-2500,this.releaseTime=0,this.releaseDuration=-2500}return(0,a.default)(t,[{key:"isPressing",value:function(){return this.status}},{key:"isPressed",value:function(){return this.press&&this._event===r.default.PRESSED}},{key:"isReleased",value:function(){return!this.press&&0===this.releaseDuration}},{key:"reset",value:function(){this.status=!1,this._event=r.default.NONE,this.press=!1,this.release=!1,this.pressTime=0,this.pressDuration=-2500,this.releaseTime=0,this.releaseDuration=-2500}},{key:"event",get:function(){return this._event}},{key:"enabled",get:function(){return this._enabled},set:function(t){(t=!!t)!==this._enabled&&(t||this.reset(),this._enabled=t)}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MouseButton={Left:0,Middle:1,Right:2,WheelUp:3,WheelDown:4}},function(t,e,i){"use strict";t.exports={Backspace:8,Tab:9,Enter:13,Shift:16,Ctrl:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Delete:46,Num0:48,Num1:49,Num2:50,Num3:51,Num4:52,Num5:53,Num6:54,Num7:55,Num8:56,Num9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LSystem:91,RSystem:92,SelectK:93,Numpad0:96,Numpad1:97,Numpad2:98,Numpad3:99,Numpad4:100,Numpad5:101,Numpad6:102,Numpad7:103,Numpad8:104,Numpad9:105,Multiply:106,Add:107,Subtract:109,DecimalPoint:110,Divide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NumLock:144,ScrollLock:145,SemiColon:186,Equal:187,Comma:188,Dash:189,Period:190,Slash:191,LBraket:219,BackSlash:220,RBracket:221,Quote:222}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i){(0,n.default)(this,t),this.game=e,this.draw=i,this.context=i.context,this.x=8,this.y=12,this.lineHeight=14,this.column=100,this.font="10px Verdana",this.textColor="white",this.bgcolor="#000",this.textShadow="#000"}return(0,a.default)(t,[{key:"test",value:function(){this.draw.disablePointTransform=!0,this.x=4,this.y=12,this.context.strokeStyle=this.bgcolor,this.context.font=this.font,this.draw.alpha=.5,this.draw.rect(0,0,this.game.width,46,this.bgcolor),this.draw.alpha=1,this.drawLine("FPS: "+Math.round(this.game.time.fps)+" / "+this.game.time.desiredFps),this.drawLine("Instances: "+this.game.system.entityList.length),this.drawLine("Draw Calls: "+this.game.system.render.drawCalls),this.x+=this.game.width/2,this.draw.disablePointTransform=!1}},{key:"drawLine",value:function(t){var e=this.x;this.context.fillStyle=this.textShadow,this.context.fillText(t,e+1,this.y+1),this.context.fillStyle=this.textColor,this.context.fillText(t,e,this.y),this.y+=this.lineHeight}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),r=s(i(116));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){(0,n.default)(this,t),this.game=e,this.doubleBuffer=!1,this.smoothing=void 0,this.imageRendering=void 0,this.canvas=void 0,this.context=void 0,this.layer=new r.default(this.game),this._backgroundColor="#000",this._alpha=1,this._enable=!0,this.clear=!0,this.drawCalls=0}return(0,a.default)(t,[{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t}},{key:"alpha",get:function(){return this._alpha},set:function(t){return this._alpha!==t&&(this.currentContext.globalAlpha=t,this._alpha=t),this._alpha}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),a=o(i(1)),r=(o(i(16)),o(i(117))),s=o(i(7)),u=o(i(22));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,n.default)(this,t),this.game=e,this.renderLayers=new s.default,this.add("default")}return(0,a.default)(t,[{key:"has",value:function(t){return this.renderLayers.hasAt(t)}},{key:"add",value:function(t){if(this.contains(t))throw new Error('RenderLayerManagement.add: There is already a RenderLayer called: "'+t+'".');this.renderLayers.push(new r.default(this.game,t))}},{key:"remove",value:function(t){if("string"!=typeof t)throw new Error("RenderLayerManagement.remove: The value name is not a string.");if("default"===t)throw new Error('RenderLayerManagement.remove: You can not remove the "default" layer.');if(!this.__renderLayersMap.has(t))throw new Error('RenderLayerManagement.remove: Could not remove layer. There is no layer named "'+t+'".');this.__renderLayersMap.get(t),this.renderLayers.erase(t)}},{key:"contains",value:function(t){if("string"!=typeof t)throw new Error("RenderLayerManagement.contains: The value name is not a string.");return this.renderLayers.each(function(e){if(e.name==t)return!0})||!1}},{key:"findRenderableLayer",value:function(t){return this.renderLayers.each(function(e){if(e.has(t))return e})||null}},{key:"findRenderableAtLayer",value:function(t,e){return void 0===e&&(e=0),this.renderLayers.at(e).has(t)}},{key:"removeRenderable",value:function(t){return this.renderLayers.each(function(e){var i=e.renderList.indexOf(t);if(-1!==i)return e.removeAt(i)})||null}},{key:"addRenderable",value:function(t,e){if(void 0===e&&(e=0),e>=this.renderLayers.size?e=this.renderLayers.size-1:e<0&&(e=0),t instanceof u.default){var i=this.findRenderableLayer(t);return null!==i?(console.warn("RenderLayerManagement.addRenderable: Could not add renderable. The renderable is already in the layer '"+i.name+"'."),!1):(this.renderLayers.at(e).add(t),!0)}return console.warn("RenderLayerManagement.addRenderable: Could not add renderable. It is not a instance of Renderable module."),!1}}]),t}();e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),r=s(i(7));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i){(0,n.default)(this,t),this._name=i,this.game=e,this.renderList=new r.default(!0),this.__drawCalls=0,this.__enable=!0,this.__isDirty=!1}return(0,a.default)(t,[{key:"add",value:function(t){void 0!==t&&(this.renderList.push(t),this.__isDirty=!0)}},{key:"has",value:function(t){return-1!==this.renderList.indexOf(t)}},{key:"remove",value:function(t){return this.renderList.remove(t)}},{key:"removeAt",value:function(t){return this.renderList.eraseAt(t)}},{key:"at",value:function(t){if(t<0||t>=this.__renderers.size)throw new Error("RenderLayer.at: Renderer at "+t+' does not exist in the render layer list: "'+name+'".');return this.renderList.at(t)}},{key:"drawCalls",get:function(){return this.__drawCalls}},{key:"length",get:function(){return this.__renderers.length}},{key:"name",get:function(){return this._name}},{key:"enable",get:function(){return this.__enable},set:function(t){(t=!!t)!==this._enabled&&(this._enabled=t)}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={crisp:function(t){return["optimizeSpeed","crisp-edges","-moz-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"].forEach(function(e){t.style["image-rendering"]=e}),t.style.msInterpolationMode="nearest-neighbor",t},bicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(63)),a=u(i(0)),r=u(i(1)),s=u(i(7));function u(t){return t&&t.__esModule?t:{default:t}}var o=new(function(){function t(){(0,a.default)(this,t),this.list=new s.default}return(0,r.default)(t,[{key:"create",value:function(t,e,i){var n=this.firstFree(),a=void 0;return null===n?(n={parent:t,canvas:document.createElement("canvas")},this.list.push(n),a=n.canvas):(n.parent=t,a=n.canvas),a.width=e,a.height=i,a}},{key:"filter",value:function(t){return scintilla.CanvasList.list.parent===t}},{key:"firstFree",value:function(){return this.list.each(function(t){if(!t.parent)return t}),null}},{key:"remove",value:function(t){for(var e=this.list,i=0;i<e.length;i++)e[i].parent===t&&(e[i].parent=null)}},{key:"clear",value:function(){}}]),t}());(0,n.default)(o),e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RenderingType={NEAREST:0,LINEAR:1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),r=i(120);function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){(0,n.default)(this,t),this.context=e,this.prefix=this.getPrefix(e)}return(0,a.default)(t,[{key:"getPrefix",value:function(t){for(var e=["i","webkitI","msI","mozI","oI"],i=0;i<e.length;i++){var n=e[i]+"mageSmoothingEnabled";if(n in t)return n}return null}},{key:"setEnable",value:function(t){return"undefined"===t&&(t=!0),""!==this.prefix&&void 0!==this.prefix||(this.prefix=this.getPrefix(this.context)),this.prefix&&(this.context[this.prefix]=t),this.context}},{key:"set",value:function(t){t==r.RenderingType.NEAREST?this.setEnable(!1):this.setEnable(!0)}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t,i=t._system.context.createBufferSource();return i.buffer=t.resource,i.connect(t.gainNode),i.onended=function(t){t.target===e.buffer&&(e._ended=!0)},i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){void 0===e&&(e=0);var i=t._system.context.currentTime,n=t.duration;t.playTime=i-e,t.startTime=i;var a=t.buffer;void 0!==a.loop&&(a.loop=t.loop),a.start(Math.max(0,i),Math.max(0,0),Math.max(0,n)),t.gainNode.gain.value=t._volume}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={NOAUDIO:0,WEBAUDIO:1};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(5)),a=l(i(0)),r=l(i(1)),s=l(i(8)),u=i(26),o=l(u);function l(t){return t&&t.__esModule?t:{default:t}}var d=new(function(){function t(){(0,a.default)(this,t)}return(0,r.default)(t,[{key:"linear",value:function(t,e,i){return s.default.lerp(t,e,i)}},{key:"stepped",value:function(t,e,i){return i<.5?t:t+e}},{key:"cut",value:function(t,e,i,n){return void 0===n&&(n=2),s.default.lerp(t,e,s.default.floor(i*n)/n)}},{key:"sine",value:function(t,e,i){return e*(Math.sin(i*s.default.HALFPI-s.default.HALFPI)+1)+t}},{key:"power",value:function(t,e,i,n){return e*Math.pow(i,n)+t}},{key:"quadratic",value:function(t,e,i){return this.power(t,e,i,2)}},{key:"cubic",value:function(t,e,i){return this.power(t,e,i,3)}},{key:"quartic",value:function(t,e,i){return this.power(t,e,i,4)}},{key:"quintic",value:function(t,e,i){return this.power(t,e,i,5)}},{key:"exponential",value:function(t,e,i){return 0==i?t:e*Math.pow(2,10*(i-1))+t}},{key:"circ",value:function(t,e,i){return-e*(Math.sqrt(1-i*i)-1)+t}},{key:"elastic",value:function(t,e,i,n){if(void 0===n&&(n=1),0==i)return t;if(1==(i/=n))return t+e;var a=.3*n,r=a/4;return-e*Math.pow(2,10*(i-=1))*Math.sin((i*n-r)*(2*Math.PI)/a)+t}},{key:"back",value:function(t,e,i){return e*i*i*((u.EASE_BACK_CONST+1)*i-u.EASE_BACK_CONST)+t}},{key:"by",value:function(t,e,i,n,a){switch(void 0===a&&(a=3),t){case o.default.NONE:return n;case o.default.STEPPED:return this.stepped(e,i,n);case o.default.CUT:return this.cut(e,i,n,a);case o.default.LINEAR:return this.linear(e,i,n);case o.default.SINE:return this.sine(e,i,n);case o.default.QUADRATIC:return this.power(e,i,n,2);case o.default.CUBIC:return this.power(e,i,n,3);case o.default.QUARTIC:return this.power(e,i,n,4);case o.default.QUINTIC:return this.power(e,i,n,5);case o.default.POWER:return this.power(e,i,n,a);case o.default.EXPONENTIAL:return this.exponential(e,i,n);case o.default.CIRC:return this.circ(e,i,n);case o.default.BACK:return this.back(e,i,n);case o.default.ELASTIC:return this.elastic(e,i,n,a)}return n}}]),t}());(0,n.default)(d),e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=this;this._filesQueue.each(function(e){e.state!==a.default.FINISHED&&e.state!==a.default.PENDING||(t._filesLoading.insert(e),t._filesQueue.erase(e),t.loadAsset(e))})};var n,a=(n=i(6))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this._successFiles.clear(),this._filesQueue.clear();var t=this.cache;if(this._processedFiles.size>0){this._processedFiles.sort(function(t,e){return t.type>e.type});var e=this;this._processedFiles.each(function(i){var n=void 0;switch(i.type){default:break;case r.default.svg:case r.default.image:n=t.image.add(i.tag,i.data);break;case r.default.audio:n=t.audio.add(i.tag,i.data);break;case r.default.json:n=t.json.add(i.tag,i.data);break;case r.default.tilemapJSON:n=(0,s.default)(i.tag,i.data,t),t.tilemap.add(i.tag,n);break;case r.default.spritesheet:n=t.animation.add(i.tag,i.data);break;case r.default.animMachine:n=t.animMachine.add(i.tag,i.data)}void 0!==n&&e.game.events.dispatch("asset_complete",n,i.type)})}this._processedFiles.clear(),this.state=a.default.DONE,n.default.call(this.game.scene)};var n=u(i(135)),a=u(i(6)),r=u(i(11)),s=u(i(285));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.state!==n.default.PROCESSING&&(this.progress=1,this.isDownloading=!1,this.state=n.default.PROCESSING,this._processedFiles.clear(),0===this._successFiles.size?a.default.call(this):this._successFiles.each(function(t){t.onProcessing(r.default.bind(this))},this))};var n=s(i(6)),a=s(i(127)),r=s(i(270));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(void 0!==t){void 0===i&&(i=!1),void 0!==t.destroy&&null!==t.destroy&&t.destroy.call(t);var n=!0;if(!0===i&&(n=!1===t.persistent),!1!==n){var r=void 0;!0===t.isPooled&&(r=e.system.pool.get(t._pool)),void 0!==r&&r.remove(t),(0,a.default)(t.modules,e),t._transform=null,t.modules=null,t.scene=null,t=null}}};var n,a=(n=i(133))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t.entity=e,t.moduleManager=e.modules}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={LINEAR:0,LINEAR90DEG:1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(2)),a=d(i(0)),r=d(i(1)),s=d(i(4)),u=d(i(3)),o=d(i(22)),l=d(i(292));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i){(0,a.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"tilemapLayer",t.moduleManager));return r.tilemap=t,r.data=i,r}return(0,u.default)(e,t),(0,r.default)(e,[{key:"render",value:function(t){return!(!this._enabled&&!this.tilemap._enabled)&&(0,l.default)(t,this.tilemap,this.data,this.tilemap.moduleManager.entity._transform)}},{key:"getTile",value:function(t,e){return this.data.getTile(t,e)}},{key:"width",get:function(){return this.data.width*this.tilemap.tileWidth}},{key:"height",get:function(){return this.data.height*this.tilemap.tileHeight}}]),e}(o.default);e.default=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t.attached.each(function(t,i){"render"===i.type&&(0,a.default)(i,e.render),i.entity=null,i.moduleManager=null}),t.attached.clear()};var n,a=(n=i(302))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t._transition;t.game.system.transition.by(i),i===a.default.FADEINOUT?t.game.system.events.subscribeOnce("transition_pause_end",e):t.game.system.events.subscribeOnce("transition_end",e),t._transition=a.default.NONE,t._isTranistioning=!0};var n,a=(n=i(23))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){function t(){this._scintillaLoading?this._loadingPlaceHolder.start():this.onStartCallback&&this.onStartCallback.call(this.currentScene,this.game)}!1===this._setup&&this.onLoadingCallback&&this.onLoadingCallback.call(this.currentScene,this.game),this._transition<=n.default.NONE?t.call(this):(0,a.default)(this,t.bind(this)),this._setup=!0};var n=r(i(23)),a=r(i(134));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i in e.game=t,r.default){var n=a.GameSystems[r.default[i]];void 0!==n&&(e[n.name]=t.system[n.name])}e.key=t.input.keyboard,e.mouse=t.input.mouse,e.audio=t.audio};var n,a=i(10),r=(n=i(49))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t._setup?t._scintillaLoading?t._loadingPlaceHolder.gui(e):t.onRenderCallback&&t.onRenderCallback.call(t.currentScene,e):t._scintillaLoading?t._loadingPlaceHolder.loadingGUI(e):t.onLoadingRenderCallback&&t.onLoadingRenderCallback.call(t.currentScene,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n,a){void 0===a&&(a={x:0,y:0});var r=e.matrix.transformPoint(-a.x,-a.y),s=e.matrix.transformPoint(i-a.x,-a.y),u=e.matrix.transformPoint(-a.x,n-a.y),o=e.matrix.transformPoint(i-a.x,n-a.y);t.min.x=Math.min(r.x,s.x,u.x,o.x),t.min.y=Math.min(r.y,s.y,u.y,o.y),t.max.x=Math.max(r.x,s.x,u.x,o.x),t.max.y=Math.max(r.y,s.y,u.y,o.y)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){(0,n.default)(this,t),void 0===e&&(e=!1),this.isRunning=!1,this._isTimeOutMode=e,this.thick=0,this.lastTime=0,this.loopCallback=null,this.timeOutIdentifier=null;var i=this;this.updateRequestAnimationFrame=function(t){i.lastTime=i.thick,i.thick=t,i.loopCallback(t),i.timeOutIdentifier=window.requestAnimationFrame(i.updateRequestAnimationFrame)},this.updateTimeout=function(){var t=Date.now(),e=Math.max(16+i.lastTime-t,0);i.lastTime=i.thick,i.thick=e,i.loopCallback(e),i.timeOutIdentifier=window.setTimeout(i.updateTimeout,e)}}return(0,a.default)(t,[{key:"start",value:function(t){this.isRunning||(this.isRunning=!0,this.loopCallback=t,!window.requestAnimationFrame||this._isTimeOutMode?(this._isTimeOutMode=!0,this.timeOutIdentifier=window.setTimeout(this.updateTimeout,0)):(this._isTimeOutMode=!1,this.timeOutIdentifier=window.requestAnimationFrame(this.updateRequestAnimationFrame)))}},{key:"stop",value:function(){this._isTimeOutMode?clearTimeout(this.timeOutIdentifier):window.cancelAnimationFrame(this.timeOutIdentifier),this.isRunning=!1}},{key:"destroy",value:function(){this.stop(),this.loopingCallback=null}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(9));function r(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e){(0,n.default)(this,t),void 0===e&&(e={});var i=a.default.value,r=a.default.propertyValue;this.width=i(e,"width",640),this.height=i(e,"height",480),this.parent=i(e,"parent",null),this.debug=i(e,"debug",!1),this.pixelated=i(e,"pixelated",!1),this.doubleBuffer=i(e,"doubleBuffer",!0),this.roundPixels=i(e,"roundPixels",!1),this.floorTiles=i(e,"floorTiles",!1),this.loader={baseURL:r(e,"loader.baseURL",""),path:r(e,"loader.path",""),responseType:r(e,"loader.responseType",""),async:r(e,"loader.async",!0)},this.audio={noAudio:r(e,"audio.noAudio",!1),context:r(e,"audio.context",null),webAudio:r(e,"audio.webAudio",!0)},this.fps=i(e,"fps",60),this.time={timeoutMode:r(e,"time.timeOutMode",!1)},this.camera={width:r(e,"camera.width",this.width),height:r(e,"camera.height",this.height)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(5)),a=s(i(12)),r=s(i(321));function s(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e){return(0,r.default)(e).forEach(function(i){var n=e[i];"object"==(void 0===n?"undefined":(0,a.default)(n))&&null!==n&&t(n)}),(0,n.default)(e)}},function(t,e,i){var n=i(147),a=i(78).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,a)}},function(t,e,i){var n=i(28),a=i(142).f,r={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==r.call(t)?function(t){try{return a(t)}catch(t){return s.slice()}}(t):a(n(t))}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var n=i(29),a=i(76),r=i(80)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),n(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){var n=i(29),a=i(28),r=i(348)(!1),s=i(80)("IE_PROTO");t.exports=function(t,e){var i,u=a(t),o=0,l=[];for(i in u)i!=s&&n(u,i)&&l.push(i);for(;e.length>o;)n(u,i=e[o++])&&(~r(l,i)||l.push(i));return l}},function(t,e,i){t.exports=i(36)},function(t,e,i){var n=i(24),a=i(25).document,r=n(a)&&n(a.createElement);t.exports=function(t){return r?a.createElement(t):{}}},function(t,e,i){t.exports=!i(30)&&!i(40)(function(){return 7!=Object.defineProperty(i(149)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(352);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,a){return t.call(e,i,n,a)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){"use strict";var n=i(84),a=i(37),r=i(148),s=i(36),u=i(82),o=i(351),l=i(77),d=i(145),f=i(35)("iterator"),c=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,i,v,y,_,p){o(i,e,v);var m,g,M,x=function(t){if(!c&&t in O)return O[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},b=e+" Iterator",w="values"==y,k=!1,O=t.prototype,L=O[f]||O["@@iterator"]||y&&O[y],S=L||x(y),j=y?w?x("entries"):S:void 0,P="Array"==e&&O.entries||L;if(P&&(M=d(P.call(new t)))!==Object.prototype&&M.next&&(l(M,b,!0),n||"function"==typeof M[f]||s(M,f,h)),w&&L&&"values"!==L.name&&(k=!0,S=function(){return L.call(this)}),n&&!p||!c&&!k&&O[f]||s(O,f,S),u[e]=S,u[b]=h,y)if(m={values:w?S:x("values"),keys:_?S:x("keys"),entries:j},p)for(g in m)g in O||r(O,g,m[g]);else a(a.P+a.F*(c||k),e,m);return m}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={MAJOR:0,MINOR:0,REVISION:1,VERSION:"0.0.1"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(!o.default.features.canvas)throw new Error("Game.CreateRender: Could not create Canvas element. Canvas is not supported in your platform.");var i=new u.default(t);return i.imageRendering=e.pixelated?s.RenderingType.NEAREST:s.RenderingType.LINEAR,e.canvas?i.canvas=e.canvas:i.canvas=n.default.create(t,e.width,e.height),i.context=i.canvas.getContext("2d",{alpha:!1}),i.smoothing=new r.default(i.context),e.pixelated&&(a.default.crisp(i.canvas),i.smoothing.set(i.imageRendering)),e.doubleBuffer&&(i.doubleBuffer=!0,i._domCanvas=n.default.create(t,e.width,e.height),i._domContext=i._domCanvas.getContext("2d",{alpha:!1})),i};var n=l(i(119)),a=l(i(118)),r=l(i(121)),s=i(120),u=l(i(115)),o=l(i(39));function l(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1)),r=u(i(88)),s=u(i(124));function u(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){(0,n.default)(this,t),this.manager=e,this.context=null,this.masterVolume=null,this.destination=null,this.locked=null,this.type=s.default.WEBAUDIO,(0,r.default)(this)}return(0,a.default)(t,[{key:"destroy",value:function(){this.destination=null,this.masterVolume.disconnect(),this.masterVolume=null,this.context.close(),this.context=null}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.buffer&&(t.buffer.stop(),t.buffer.disconnect(),t.buffer=null),t.playTime=0,t.startTime=0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=h(i(2)),a=h(i(0)),r=h(i(1)),s=h(i(4)),u=h(i(61)),o=h(i(3)),l=h(i(93)),d=h(i(122)),f=h(i(156)),c=h(i(123));function h(t){return t&&t.__esModule?t:{default:t}}var v=function(t){function e(t,i,r,u,o){(0,a.default)(this,e);var l=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o));return l.buffer=null,l.duration=i.duration,l.gainNode=l._system.context.createGain(),l.gainNode.connect(l._system.destination),l.volume=r||1,l.loop=u||!1,l}return(0,o.default)(e,t),(0,r.default)(e,[{key:"setVolume",value:function(t){return this._volume=t,this}},{key:"play",value:function(){(0,u.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"play",this).call(this),(0,f.default)(this),this.buffer=(0,d.default)(this),(0,c.default)(this)}},{key:"pause",value:function(){}},{key:"stop",value:function(){return(0,u.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"stop",this).call(this),(0,f.default)(this),this}},{key:"destroy",value:function(){(0,f.default)(this),this.buffer=null,null!==this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),(0,u.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"volume",get:function(){return this.gainNode.gain.value},set:function(t){this.gainNode&&this.gainNode.gain.setValueAtTime(t,0),this._volume=t}}]),e}(l.default);e.default=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n){var r=this._soundCache.get(t);if(void 0!==r&&null!==r){var s=new a.default(this,r,e,i,n);return this._sounds.push(s),s}console.warn("AudioManager.add: Could not add audio source with tag: '"+t+".")};var n,a=(n=i(157))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=new a.default(t);if(!t.config.audio.noAudio&&(n.default.supportAudio&&n.default.supportWebAudio&&t.config.audio.webAudio)){var i=new u.default(e);(0,s.default)(i),e._system=i,e.add=r.default.bind(e)}return e};var n=o(i(39)),a=o(i(94)),r=o(i(158)),s=o(i(88)),u=o(i(155));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=(n=i(12))&&n.__esModule?n:{default:n};e.default=function(t,e,i){void 0===i&&(i=!0);var n=null;return e&&("string"==typeof e?n=document.getElementById(e):"object"===(void 0===e?"undefined":(0,a.default)(e))&&1===e.nodeType&&(n=e)),n||(n=document.body),i&&n.style&&(n.style.overflow="hidden"),n.appendChild(t),t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(e===i)return e;var n=this.layer.renderLayers.at(e);if(void 0===n&&void 0===(n=this.layer.findRenderableLayer(t)))return this.layer.renderLayers.at(0).add(t),0;var a=this.layer.renderLayers.at(i);if(void 0===a||a===n)return e;var r=n.renderList.indexOf(renderer);return-1===r?e:(n.removeAt(r),a.add(renderer),i)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=this.layer.renderLayers.at(t);void 0!==e&&!0!==e.__isDirty&&(e.__isDirty=!0)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i={};for(var s in n.GameSystems){var u=n.GameSystems[s];i[u.name]=new u.system(t,i)}for(var o in t.system=i,t.scene=i.scene,t.render=e,t.events=i.events,i.render=e,n.GameSystems){var l=n.GameSystems[o],d=l.init;void 0!==d&&d.call(i[l.name])}return i.events.subscribe("__render_depthsorting",a.default,e),i.events.subscribe("__render_layeridchange",r.default,e),i};var n=i(10),a=s(i(162)),r=s(i(161));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){(0,n.default)(this,t),this.game=e}return(0,a.default)(t,[{key:"init",value:function(t){this._updateStep=t.updateStep}},{key:"now",get:function(){return this._updateStep.time}},{key:"fps",get:function(){return this._updateStep.fps}},{key:"desiredFps",get:function(){return this._updateStep.fpsDesired}},{key:"delta",get:function(){return this._updateStep.deltaTime}},{key:"elapsed",get:function(){return this._updateStep.elapsed}},{key:"rawDelta",get:function(){return this._updateStep.hiDeltaTime}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,n.default)(this,t),this.a=null,this.b=null,this.overlapN=new Vector,this.overlapV=new Vector,this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this.indexShapeA=-1,this.indexShapeB=-1,this.clear()}return(0,a.default)(t,[{key:"clear",value:function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this.indexShapeA=-1,this.indexShapeB=-1,this}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),r=s(i(33));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,n.default)(this,t),this.VECTORS=[];for(var e=0;e<10;e++)VECTORS.push(new r.default);this.ARRAYS=[];for(var i=0;i<5;i++)ARRAYS.push([])}return(0,a.default)(t,[{key:"flattenPointsOn",value:function(t,e,i){for(var n=Number.MAX_VALUE,a=-Number.MAX_VALUE,r=t.length,s=0;s<r;s++){var u=t[s].dot(e);u<n&&(n=u),u>a&&(a=u)}i[0]=n,i[1]=a}},{key:"isSeparatingAxis",value:function(t,e,i,n,a,r){var s=ARRAYS.pop(),u=ARRAYS.pop(),o=VECTORS.pop().copy(e).sub(t),l=o.dot(a);if(flattenPointsOn(i,a,s),flattenPointsOn(n,a,u),u[0]+=l,u[1]+=l,s[0]>u[1]||u[0]>s[1])return VECTORS.push(o),ARRAYS.push(s),ARRAYS.push(u),!0;if(r){var d,f,c=0;s[0]<u[0]?(r.aInB=!1,s[1]<u[1]?(c=s[1]-u[0],r.bInA=!1):c=(d=s[1]-u[0])<(f=u[1]-s[0])?d:-f):(r.bInA=!1,s[1]>u[1]?(c=s[0]-u[1],r.aInB=!1):c=(d=s[1]-u[0])<(f=u[1]-s[0])?d:-f);var h=Math.abs(c);h<r.overlap&&(r.overlap=h,r.overlapN.copy(a),c<0&&r.overlapN.reverse())}return VECTORS.push(o),ARRAYS.push(s),ARRAYS.push(u),!1}},{key:"testPolygonPolygon",value:function(t,e,i){for(var n=t.shape.getPoints(),a=t.shape.getNormals(),r=a.length,s=e.shape.getPoints(),u=e.shape.getNormals(),o=u.length;r--;)if(isSeparatingAxis(t.position,e.position,n,s,a[r],i))return!1;for(;o--;)if(isSeparatingAxis(t.position,e.position,n,s,u[o],i))return!1;return i&&(i.a=t,i.b=e,i.overlapV.copy(i.overlapN).scale(i.overlap)),!0}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1)),r=u(i(166)),s=u(i(165));function u(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){(0,n.default)(this,t),this.game=null,this.sat=null,this.response=null,this.game=e,this.colliadables=[]}return(0,a.default)(t,[{key:"init",value:function(){this.sat=new r.default,this.response=new s.default}},{key:"getColliadables",value:function(){return this.colliadables}},{key:"addColliderObj",value:function(t){this.colliadables.push(t)}},{key:"removeColliderObj",value:function(t){var e=this.colliadables.indexOf(t);-1!=e&&this.colliadables.splice(e,1)}},{key:"clear",value:function(){this.colliadables=[],this.colliadables.length=0}},{key:"length",get:function(){return this.colliadables.length}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(63));e.default=function(t){if(!t.systemInited){var e=(0,d.default)(t,t.config),i=e.canvas;e.doubleBuffer&&(i=e._domCanvas),(0,o.default)(i,t.config.parent),t.physics=new a.default(t),t.input=new r.default(t),t.time=new s.default(t),f.default.reset([(Date.now()*Math.random()).toString()]),(0,u.default)(t,e),t.audio=(0,l.default)(t),t.input.init(),t.time.init(t.system.loop),t.systemInited=!0,t.isRunning=!0,(0,n.default)(t),console.log("scintilla started!")}};var a=c(i(167)),r=c(i(108)),s=c(i(164)),u=c(i(163)),o=c(i(160)),l=c(i(159)),d=c(i(154)),f=c(i(107));function c(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1)),r=u(i(140)),s=u(i(168));function u(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(){(0,n.default)(this,t),this.parent="body",this.width=800,this.height=600,this.config=new r.default(config),this.systemInited=!1,this.isRunning=!1,this.debugMode=!1,this.timeMode=!1,this.debug=null,this.sound=null,this.input=null,this.pool=null,this.systems=null,this.context=null,this.time=null,this.events=null,this.parseConfiguration(this.config),(0,s.default)(this)}return(0,a.default)(t,[{key:"parseConfiguration",value:function(t){t.debug&&(this.debugMode=t.debug),t.width&&(this.width=t.width),t.height&&(this.height=t.height),t.parent&&(this.parent=t.parent)}},{key:"destroy",value:function(){this.physics.destroy(),this.sound.destroy(),this.input.destroy(),this.debug=null,this.cache=null,this.load=null,this.canvas=null,this.scene=null,this.sound=null,this.draw=null,this.universe=null,this.world=null,this.input=null,this.time=null,this.render=null,this.component=null,this.instance=null,this.animationCache=null,this.updateGameMethod=null}}]),t}();e.default=o,t.exports=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.cache=this.game.system.cache,this._filesQueue=new n.default,this._filesLoading=new n.default,this._successFiles=new n.default,this._failedFiles=new n.default,this._processedFiles=new n.default,this._filesQueueCount=0,this._loadedFilesCount=0,this.progress=0,this.path="",this.baseURL="",this.state=a.default.IDLE};var n=r(i(66)),a=(r(i(95)),r(i(6)));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(0)),a=f(i(1)),r=f(i(10)),s=f(i(9)),u=f(i(55)),o=f(i(14)),l=f(i(6)),d=f(i(170));function f(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){(0,n.default)(this,t),this.game=e,this.cache=null,this._filesQueue=null,this._filesLoading=null,this._successFiles=null,this._failedFiles=null,this._processedFiles=null,this._filesQueueCount=null,this._loadedFilesCount=null,this.isDownloading=!1,this._totalFiles=0,this.progress=null,this.path=null,this.baseURL=null,this.state=null,this.webFontLoader=void 0,this.events=null,this.crossOrigin=void 0;var i=e.config.loader;this.xhr=u.default.createSettings(s.default.value(config,"responseType",i.responseType),s.default.value(config,"async",i.async),s.default.value(config,"timeout",i.timeout)),o.default.inject(this)}return(0,a.default)(t,[{key:"setPath",value:function(t){return""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this}},{key:"setBaseURL",value:function(t){return""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t||"",this}},{key:"setCrossOrigin",value:function(t){return this.crossOrigin=t,this}},{key:"reset",value:function(){this.isDownloading=!1,this._filesQueue.clear(),this._successFiles.clear(),this._failedFiles.clear(),this._processedFiles.clear(),this._filesQueueCount=0,this._loadedFilesCount=0,this.progress=0,this.state=l.default.IDLE}},{key:"loadAsset",value:function(t){t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load(this)}},{key:"isLoading",value:function(){return this.state===l.default.LOADING||this.state===l.default.PROCESSING}},{key:"isOK",value:function(){return this.state===l.default.IDLE||this.state===l.default.DONE||this.state===l.default.ERROR}},{key:"downloadIsDone",value:function(){return this._filesQueue.length==this._successCount+this._fileErrorCount}},{key:"totalQueuedFiles",get:function(){return this._filesQueueCount-this._loadedFilesCount}}]),t}();e.default=c,r.default.register("Loader",c,"load",d.default)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=v(i(2)),a=v(i(0)),r=v(i(1)),s=v(i(4)),u=v(i(3)),o=v(i(14)),l=v(i(11)),d=v(i(18)),f=v(i(17)),c=v(i(6)),h=v(i(54));function v(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,i,r){(0,a.default)(this,e),r.type=i;var u={type:i,tag:t,config:r};return(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,u))}return(0,u.default)(e,t),(0,r.default)(e,[{key:"load",value:function(t){this.loader=t,this.state===c.default.FINISHED&&this.onDone(),h.default.call(this.loader,this)}},{key:"onProcessing",value:function(t){this.state=c.default.PROCESSING,this.data=this.config,this.onDone(),t(this)}}]),e}(f.default);e.default=y,o.default.register("spritesheet",function(t,e,i){var n,a=i;return Array.isArray(i)||(a=Array.prototype.slice.call(arguments,2,arguments.length-2)),n=new y(t,l.default.spritesheet,{imageTag:e,x:a[0]||0,y:a[1]||0,frameWidth:a[2]||0,frameHeight:a[3]||0,numberOfImages:a[4]||0,framesPerRow:a[5]||void 0,spacing:a[6]||void 0,duration:a[7]||arguments[3]}),d.default.call(this,n),this}),o.default.register("animMachine",function(t,e){var i=new y(t,l.default.animMachine,{animations:e||[]});return d.default.call(this,i),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=y(i(2)),a=y(i(0)),r=y(i(1)),s=y(i(4)),u=y(i(3)),o=y(i(17)),l=y(i(11)),d=y(i(6)),f=y(i(19)),c=y(i(18)),h=y(i(14)),v=y(i(54));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function e(t,i,r,u){(0,a.default)(this,e);var o={type:l.default.webFont,tag:t,config:{provider:i||"google",families:r,timeout:u||3e3}};return(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,o))}return(0,u.default)(e,t),(0,r.default)(e,[{key:"load",value:function(t){this.loader=t,this.state===d.default.FINISHED?(this.onDone(),v.default.call(this.loader,this)):void 0!==this.loader.webFontLoader&&this.loader.webFontLoader.state===d.default.DONE&&void 0!==this.fontLoad&&this.fontLoad()}},{key:"fontLoad",value:function(){if(void 0!==WebFont){this.state=d.default.PROCESSING;var t=this.config.provider;if(!f.default.isArray(this.config.families)){var e=[];e.push(this.config.families),this.config.families=e}var i={families:this.config.families},n={timeout:this.config.timeout,inactive:this.onError.bind(this),fontactive:this.onLoad.bind(this),classes:!0};n[t]=i,WebFont.load(n)}}},{key:"onLoad",value:function(t,e){this.data={family:t,fvd:e},v.default.call(this.loader,this)}}]),e}(o.default);e.default=_,h.default.register("webFont",function(t,e,i,n){return c.default.call(this,new _(t,e,i,n)),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=v(i(2)),a=v(i(0)),r=v(i(1)),s=v(i(4)),u=v(i(3)),o=(v(i(17)),v(i(89))),l=v(i(6)),d=v(i(21)),f=v(i(11)),c=v(i(18)),h=v(i(14));function v(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,i,r,u){(0,a.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,r,u));return o.type=f.default.tilemapJSON,o}return(0,u.default)(e,t),(0,r.default)(e,[{key:"onPostLoad",value:function(t,e){this.state=l.default.PROCESSING,this.data=JSON.parse(e.responseText),function(t,e,i){if(void 0!==e){var n=e.length;if(!(n<=0))for(var a=0;a<n;a++){var r=e[a];if(r.image){var s=d.default.getFilenameWithoutExtension(r.image)||r.name,u=d.default.getPathWithoutRoot(i).concat(d.default.getFilename(r.image));t.image(s,u,void 0,void 0,!1)}}}}(t,this.data.tilesets,this.url)}},{key:"onProcessing",value:function(t){this.onDone(),t(this)}}]),e}(o.default);e.default=y,h.default.register("tilemapJSON",function(t,e,i,n){return c.default.call(this,new y(t,e,this.path,n)),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=y(i(2)),a=y(i(0)),r=y(i(1)),s=y(i(4)),u=y(i(3)),o=y(i(6)),l=y(i(17)),d=y(i(9)),f=y(i(21)),c=y(i(11)),h=y(i(18)),v=y(i(14));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function e(t,i,r,u,o){(0,a.default)(this,e);var l;l="string"==typeof t?t:d.default.value(t,"tag","");var h=!1;void 0!==r&&"boolean"==typeof r&&(h=r);var v={type:c.default.text,tag:l,ext:d.default.value(t,"ext",f.default.getExtension(i)),url:d.default.value(t,"file",i),path:r,responseType:"",xhrSettings:d.default.value(t,"xhr",u),config:d.default.value(t,"config",o),useExternal:h};return(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,v))}return(0,u.default)(e,t),(0,r.default)(e,[{key:"onProcessing",value:function(t){this.state=o.default.PROCESSING,this.data=this.xhrRequest.responseText,this.onDone(),t(this)}}]),e}(l.default);e.default=_,v.default.register("text",function(t,e,i,n){var a=this.path;return void 0!==i&&"boolean"==typeof i&&(a=i),h.default.call(this,new _(t,e,a,n)),this}),t.exports=_},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=_(i(2)),a=_(i(0)),r=_(i(1)),s=_(i(4)),u=_(i(3)),o=_(i(17)),l=_(i(9)),d=_(i(11)),f=_(i(21)),c=_(i(6)),h=_(i(18)),v=_(i(14)),y=_(i(53));function _(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,r,u){(0,a.default)(this,e),t="string"==typeof t?t:l.default.value(t,"key","");var o={type:d.default.svg,ext:l.default.value(t,"ext",f.default.getExtension(i)||"svg"),responseType:"text",tag:tagFile,url:l.default.value(t,"file",i),path:r,xhrSettings:l.default.value(t,"xhr",u)};return(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,o))}return(0,u.default)(e,t),(0,r.default)(e,[{key:"onProcessing",value:function(t){this.state=c.default.PROCESSING;var e=this,i=[this.xhrLoader.responseText],n=void 0;try{n=new window.Blob(i,{type:"image/svg+xml;charset=utf-8"})}catch(i){return e.state=c.default.ERROR,void t(e)}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){y.default.revoke(e.data),e.onDone(),t(e)},this.data.onerror=function(){y.default.revoke(e.data),console.warn("Loader.SVGFile: Error on load file: "+e.url+"."),e.state=c.default.ERROR,t(e)},y.default.createFromResponse(this.data,n,"image/svg+xml")}}]),e}(o.default);e.default=p,v.default.register("svg",function(t,e,i,n){return h.default.call(this,new p(t,e,this.path,n)),this})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.constructor!==Array&&(t=[t]);for(var e=0;e<t.length;e++){var i=n.default.value(t[e],"uri",t[e]);if(0===i.indexOf("blob:")||0===i.indexOf("data:"))return i;var r=i.match(/\.([a-zA-Z0-9]+)($|\?)/);if(r=n.default.value(t[e],"type",r?r[1]:"").toLowerCase(),a.default.audioFormats[r])return{uri:i,type:r}}return null};var n=r(i(9)),a=r(i(39));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=_(i(2)),a=_(i(0)),r=_(i(1)),s=_(i(4)),u=_(i(3)),o=_(i(17)),l=_(i(14)),d=_(i(11)),f=_(i(9)),c=_(i(177)),h=_(i(18)),v=_(i(6)),y=_(i(39));function _(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,r,u,o){(0,a.default)(this,e);var l={tag:t,type:d.default.audio,ext:f.default.value(i,"type",""),responseType:"arraybuffer",url:f.default.value(i,"uri",i),path:r,xhrSettings:u},c=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,l));return c.context=o,c}return(0,u.default)(e,t),(0,r.default)(e,[{key:"onProcessing",value:function(t){this.state=v.default.PROCESSING;var e=this;this.context.decodeAudioData(this.xhrRequest.response,function(i){e.data=i,e.onDone(),t(e)},function(i){console.error("AudioFile.onProcessing: Failed to decode audio data of the file '"+e.tag+"':",i.message),e.state=v.default.ERROR,t(e)}),this.context=null}}],[{key:"create",value:function(t,i,n,a,r){if(!y.default.supportWebAudio&&!y.default.supportAudio)return console.warn("AudioFile.create: WebAudio is not supported."),null;var s=(0,c.default)(n);return s?new e(i,s,t.path,r,game.audio._system.context):(console.warn("AudioFile.create: URL is not supported for audio file '"+i+"'."),null)}}]),e}(o.default);e.default=p,l.default.register("audio",function(t,e,i,n){var a=p.create(this,t,e,config,n);return a&&h.default.call(this,a),this}),t.exports=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=_(i(2)),a=_(i(0)),r=_(i(1)),s=_(i(4)),u=_(i(3)),o=_(i(6)),l=_(i(17)),d=_(i(53)),f=_(i(9)),c=_(i(21)),h=_(i(11)),v=_(i(18)),y=_(i(14));function _(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,r,u,o){(0,a.default)(this,e);var l;l="string"==typeof t?t:f.default.value(t,"tag","");var d={type:h.default.image,tag:l,ext:f.default.value(t,"ext",c.default.getExtension(i)),url:f.default.value(t,"file",i),path:r,responseType:"blob",xhrSettings:f.default.value(t,"xhr",u),config:f.default.value(t,"config",o)};return(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,d))}return(0,u.default)(e,t),(0,r.default)(e,[{key:"onProcessing",value:function(t){this.state=o.default.PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var e=this;this.data.onload=function(){d.default.revoke(e.data),e.onDone(),t(e)},this.data.onerror=function(){d.default.revoke(e.data),console.warn("Loader.ImageFile: Error on load file: "+e.url+"."),e.state=o.default.ERROR,t(e)},d.default.createFromResponse(this.data,this.xhrRequest.response,"image/"+this.config.ext)}}]),e}(l.default);e.default=p,y.default.register("image",function(t,e,i,n,a){return v.default.call(this,new p(t,e,this.path,n),a),this}),t.exports=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,n.default)(this,t),this.list={}}return(0,a.default)(t,[{key:"inject",value:function(t){for(var e in this.list)t[e]=this.list[e]}},{key:"register",value:function(t,e){this.list[t]=e}},{key:"destroyfunction",value:function(){this.list={}}}]),t}();e.default=s},function(t,e,i){"use strict";t.exports={AssetsTypeHandler:i(14),ImageFile:i(179),AudioFile:i(178),SVGFile:i(176),TextFile:i(175),ScriptFile:i(90),JSONFile:i(89),TilemapJSON:i(174),WebFontFile:i(173),AdditionalResources:i(172)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){0!=this._filesQueueCount&&(this.progress=1-this._loadedFilesCount/this._filesQueueCount)}},function(t,e,i){"use strict";t.exports={LoaderState:i(6),File:i(17),XHR:i(55),URLObject:i(53),AssetsType:i(11),Assets:i(181),LoaderManager:i(171)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),r=s(i(16));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){(0,n.default)(this,t),this.resources=new r.default,this.adderWrapper=e||void 0}return(0,a.default)(t,[{key:"add",value:function(t,e){var i=e;return void 0!==this.adderWrapper&&(i=this.adderWrapper(t,e)),this.resources.set(t,i),i}},{key:"has",value:function(t){return this.resources.has(t)}},{key:"get",value:function(t){return this.resources.get(t)}},{key:"erase",value:function(t){return this.resources.delete(t),this}},{key:"clear",value:function(){this.resources.clear()}},{key:"destroy",value:function(){this.resources.clear(),this.resources=null}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(12)),a=c(i(0)),r=c(i(1)),s=c(i(10)),u=c(i(184)),o=c(i(92)),l=(c(i(67)),c(i(91))),d=c(i(58)),f=c(i(11));function c(t){return t&&t.__esModule?t:{default:t}}var h=["image","json","audio","text","tilemap","animation","animMachine"],v=function(){function t(e){(0,a.default)(this,t),this.game=e;var i=this;this.image=new u.default(function(t,e){return new o.default(t,e)}),this.tilemap=new u.default,this.json=new u.default,this.text=new u.default,this.audio=new u.default,this.animation=new u.default(function(t,e){var n=void 0;if(e.type===f.default.spritesheet){var a=i.image.get(e.imageTag);(n=new l.default(t,a)).addStrip(e.x,e.y,e.frameWidth,e.frameHeight,e.numberOfImages,e.framesPerRow,e.spacing),void 0!==e.duration&&(n.duration=e.duration)}return n}),this.animMachine=new u.default(function(t,e){var n=new d.default(t);if(void 0!==e.animations)for(var a=0;a<e.animations.length;a++){var r=i.animation.get(e.animations[a]);n.add(e.animations[a],r)}return n})}return(0,r.default)(t,[{key:"hasCache",value:function(t){return void 0!==(0,n.default)(h[t])}},{key:"getAsset",value:function(t,e){return this.hasCache(t)?this[t].get(e):null}},{key:"clear",value:function(){for(var t=0;t<h.length;t++)this[props[t]].clear()}},{key:"destroy",value:function(){for(var t=0;t<h.length;t++)this[props[t]].destroy(),this[props[t]]=null;this.game=null}}]),t}();e.default=v,s.default.register("Cache",v,"cache")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpritesheetKeyFrame=void 0;var n=l(i(2)),a=l(i(4)),r=l(i(3)),s=l(i(0)),u=l(i(1)),o=l(i(32));function l(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e){(0,s.default)(this,t),this.animation=e,this.duration=0,this.progress=0,this.type="key"}return(0,u.default)(t,[{key:"destroy",value:function(){this.animation=null}}]),t}();e.default=d,e.SpritesheetKeyFrame=function(t){function e(t,i,r,u){(0,s.default)(this,e);var l=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return l.duration=u||1,l.type="sprite",l.frame=r||new o.default,l.image=i||null,l}return(0,r.default)(e,t),(0,u.default)(e,[{key:"destroy",value:function(){this.frame=null,this.image=null,this.animation=null}}]),e}(d)},function(t,e,i){"use strict";t.exports={AnimationBase:i(60),Spritesheet:i(91),AnimationMachine:i(58)}},function(t,e,i){"use strict";t.exports={ResourceType:i(15),Image:i(92),Tilemap:i(67),Animation:i(187)}},function(t,e,i){"use strict";t.exports={Manager:i(94),AudioSource:i(93)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=["__render_depthsorting","__render_layeridchange","asset_complete","transition_pause_end","transition_end"];(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t._bindings.length;do{--i}while(t._bindings.at(i)&&e._priority<=t._bindings.at(i)._priority);t._bindings.insert(e,i)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,s,u){var o=null,l=(0,a.default)(t,e,i);if(-1!==l){if((o=t._bindings[l]).isOnce!==u)throw new Error("You cannot add"+(u?"":"Once")+"() then add"+(u?"Once":"")+"() the same listener without removing the relationship first.")}else o=new n.default(t,e,i,s,u),(0,r.default)(t,o);return o};var n=s(i(97)),a=s(i(96)),r=s(i(191));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if("function"!=typeof t)throw new Error("Signal.{fn}: Listener should be a function.".replace("{fn}",e))}},function(t,e,i){"use strict";t.exports={Signal:i(98),EventManager:i(95)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),a=o(i(1)),r=o(i(16)),s=o(i(99)),u=o(i(10));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,n.default)(this,t),this._poolsMap=new r.default,this.game=e}return(0,a.default)(t,[{key:"has",value:function(t){return this._poolsMap.has(t)}},{key:"get",value:function(t){return this._poolsMap.get(t)}},{key:"create",value:function(t,e,i){if(void 0===e||null===e)return null;if(void 0===i&&(i=1),this._poolsMap.has(t))return console.warn("PoolManager.create: Could not create pool named '"+t+"'. There is already a pool registered with this name."),null;var n=new s.default(this.game,t,e,i);return this._poolsMap.set(t,n),n}},{key:"pull",value:function(t){var e=this._poolsMap.get(t);return null!==e&&void 0!==e?e.pull():(console.warn("PoolManager.pull: The specified pool container don't exists: "+t),null)}},{key:"push",value:function(t){if(null!==t.pool){var e=this._poolsMap.get(t._pool);if(null!==e&&void 0!==e)return e.push(t),!0}return!1}},{key:"clearAll",value:function(){return this._poolsMap.each(function(t,e){e.clear()}),this}}]),t}();e.default=l,u.default.register("PoolManager",l,"pool")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){e.system.entityList.removeInstance(t),t.active=!1,t._pool=null,t.scene=null}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){return null===i.scene.currentScene||void 0===i.scene.currentScene?(console.warn("Pool.pull: Could not pull entity. There is no active scene."),!1):(e.active=!0,e._pool=t.name,e.scene=i.scene.currentScene,i.system.entityList.addInstance(e),!0)}},function(t,e,i){"use strict";t.exports={Pool:i(99),PoolManager:i(195)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),a=o(i(1)),r=(o(i(57)),o(i(10))),s=o(i(100)),u=o(i(101));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,n.default)(this,t),this.game=e,this._entityList=null}return(0,a.default)(t,[{key:"find",value:function(t){for(var e=[],i=this._entityList._instances.size,n=0;n<i;n++)this._entityList[n].name===t&&e.push(this._entityList[n]);return e}},{key:"findFirst",value:function(t){return this._entityList.each(function(e){if(e.name===t)return e}),null}},{key:"findLast",value:function(t){for(var e=this._entityList._instances.size-1;e>=0;e--)if(this._entityList[e].name===t)return this._entityList[e];return null}},{key:"get",value:function(t){return this._entityList._instances.at(t)||null}},{key:"create",value:function(t,e){var i=(0,s.default)(t,this.game);return(0,u.default)(i,this.game),i}},{key:"destroy",value:function(t){return this._entityList.destroyInstance(t)}},{key:"destroyAt",value:function(t){}},{key:"clear",value:function(){}},{key:"count",get:function(){return this._entityList._instances.size}}]),t}();e.default=l,r.default.register("EntityHierarchy",l,"entity",function(){this._entityList=this.game.system.entityList})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),a=o(i(1)),r=o(i(10)),s=o(i(56)),u=o(i(101));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,n.default)(this,t),this.game=e,this.scene=null,this.entityList=null}return(0,a.default)(t,[{key:"entity",value:function(t){return t=t||"Scene Entity "+this.entityList.length,new s.default(t,this.game)}},{key:"sprite",value:function(t,e,i){var n=this.entity(e);return n.modules.attach.sprite(t,i.x,i.y,i.width,i.height),null!==this.scene.current_scene&&(0,u.default)(n,this.game),n}},{key:"tilemap",value:function(t,e){var i=this.entity(e);return i.modules.attach.tilemap(t),null!==this.scene.current_scene&&(0,u.default)(i,this.game),i}},{key:"spritesheet",value:function(t,e){var i=this.entity(e);return i.modules.attach.spritesheet(t),null!==this.scene.current_scene&&(0,u.default)(i,this.game),i}}]),t}();e.default=l,r.default.register("EntityFactory",l,"create",function(){this.entityList=this.game.system.entityList,this.scene=this.game.scene})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t._priority<e._priority}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t._pendingModulesInitialization.each(function(t){if(t instanceof a.default)e.system.render.layer.addRenderable(t,t.layerID||0);else if(t instanceof n.default)for(var i=0;i<t.layers.length;i++)e.system.render.layer.addRenderable(t.layers.at(i),t.layerID||0)}),t._pendingModulesInitialization.clear()},r(i(22));var n=r(i(69)),a=r(i(104));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t;t.attached.each(function(t,n){n instanceof a.default&&(e.system.render.layer.removeRenderable(n),i._pendingModulesInitialization.push(n))})};var n,a=(n=i(22))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(void 0!==e&&null!==e&&!0===t.isPlaying){t._timer+=i;var s,u=e.get(t.currentFrame);if(s=e.uniformDuration?e.duration:u.duration,t._position=t._timer/s,t._timer>=s){if(t._timer=0,t._position=0,t.currentFrame+1<e.size)t.currentFrame++;else{var o=t.currentFrame;t.currentFrame=0,e.wrapMode!==r.default.Once&&!1!==t.loop||(t.stop(),t.currentFrame=o),void 0!==t.onAnimationEnd&&t.onAnimationEnd.call(t.entity)}e.type===a.default.Spritesheet&&(u=e.get(t.currentFrame),(0,n.default)(t._spriteModule,u))}}};var n=s(i(42)),a=s(i(15)),r=s(i(59));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){(e._transform._isDirty||i._transform._isDirty)&&(t._originIsDirty&&(t._originInPixels.x=e._transform.origin.x*t.width,t._originInPixels.y=e._transform.origin.y*t.height),(0,a.default)(t._bounds,e._transform,t.width,t.height,t._originInPixels))};var n,a=(n=i(138))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.animator;if(void 0!==i){var n=i.animatedTiles.size;if(0!==n)for(var a=e.hiDeltaTime,r=0;r<n;r++){var s=i.animatedTiles.at(r);s.t+=a;var u=s.tileGID,o=u.keyFrames[s.frame];if(s.t>=o.duration){s.t=0,s.frame+1<u.keyFrames.length?s.frame++:s.frame=0;var l=u.keyFrames[s.frame].tileID;u.currentFrame=l}}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.entity._transform;if((e._transform.rotation+i.rotation)%n.default.HALFPI==0){var r=i.position.x-t._originInPixels.x,s=i.position.y-t._originInPixels.y;t.culling.method=a.default.LINEAR,t.culling.start.x=Math.floor((e.viewBounds.min.x-r)/t.tileWidth),t.culling.start.y=Math.floor((e.viewBounds.min.y-s)/t.tileHeight),t.culling.end.x=Math.ceil((e.viewBounds.max.x-r)/t.tileWidth),t.culling.end.y=Math.ceil((e.viewBounds.max.y-s)/t.tileHeight),function(t,e){t.start.x<0&&(t.start.x=0),t.start.y<0&&(t.start.y=0),t.end.x>e.width&&(t.end.x=e.width),t.end.y>e.height&&(t.end.y=e.height)}(t.culling,t)}else t.culling.method=1};var n=r(i(8)),a=r(i(131));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,s){if("tilemap"==e.name){if(e._originIsDirty&&(e._originInPixels.x=t._transform.origin.x*e.pixelsWidth,e._originInPixels.y=t._transform.origin.y*e.pixelsHeight),(0,a.default)(e,s),!t._transform._isDirty&&!i._transform._isDirty)return;(0,n.default)(e,i);for(var u=0;u<e.layers.length;u++)(0,r.default)(e,t,i)}else(0,r.default)(e,t,i)};var n=s(i(207)),a=s(i(206)),r=s(i(205));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.entity,r=t.attached.get("animation");if(void 0!==r&&null!==r){var s=void 0;"animationControl"===r.name?s=r._resource:"animMachine"===r.name&&(s=r._currentState),void 0!==s&&(0,a.default)(r,s,e.system.loop.updateStep.hiDeltaTime)}var u=t.attached.get("render");void 0===u&&null===u||(0,n.default)(i,u,e.system.camera,e.system.loop.updateStep)},r(i(130));var n=r(i(208)),a=r(i(204));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(t._isDirty||e._isDirty)&&(t.rotation=t.angle*n.default.toRadian,t.rotation!==t._oldRotation&&(t._oldRotation=t.rotation,t._cosSin.y=Math.sin(t.rotation),t._cosSin.x=Math.cos(t.rotation)),t.matrix.setModelMatrix(t.position,t.scale,t._cosSin,t.origin).concat(e.matrix))};var n=a(i(8));function a(t){return t&&t.__esModule?t:{default:t}}a(i(38))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(0)),a=c(i(1)),r=c(i(10)),s=c(i(7)),u=c(i(210)),o=(c(i(38)),c(i(209))),l=c(i(129)),d=c(i(203)),f=c(i(202));function c(t){return t&&t.__esModule?t:{default:t}}c(i(201));var h=function(){function t(e){(0,n.default)(this,t),this.game=e,this._instances=new s.default,this._destroyInstances=new s.default,this._removalInstances=new s.default,this._pendingInstances=new s.default,this._camera=null,this._requirePrioritySorting=!1}return(0,a.default)(t,[{key:"addInstance",value:function(t){return-1===this._instances.indexOf(t)&&-1===this._pendingInstances.indexOf(t)&&this._pendingInstances.push(t),t}},{key:"destroyInstance",value:function(t){return!(void 0===t||!this._instances.has(t)||-1!==this._destroyInstances.indexOf(t)||(this._destroyInstances.push(t),0))}},{key:"removeInstance",value:function(t){return this._instances.indexOf(t)>-1&&-1===this._destroyInstances.indexOf(t)&&-1===this._removalInstances.indexOf(t)&&(this._removalInstances.push(t),!0)}},{key:"update",value:function(t){for(var e=this._instances,i=0;i<e.size;i++){var n=e.at(i);n.active&&((0,u.default)(n._transform,this._camera._transform),(0,o.default)(n.modules,this.game),void 0!==n.update&&n.update.call(n,t),n._transform._isDirty&&(n._transform._isDirty=!1))}}},{key:"beginUpdate",value:function(){var t=this._destroyInstances.length,e=this._removalInstances.length,i=this._pendingInstances.length;if(0!==i||0!==e||0!==t){if(t>0){for(var n=0;n<t;n++){var a=this._destroyInstances.at(n);void 0!==a&&((0,l.default)(a,this.game,!1),a=null)}this._instances.eraseList(this._destroyInstances,t),this._destroyInstances.childs.length=0}if(e>0){for(var r=0;r<e;r++){var s=this._removalInstances.at(r);void 0!==s&&((0,d.default)(s.modules,this.game),this._instances.erase(s))}this._removalInstances.childs.length=0}var u=this._pendingInstances.content();if(0!==i){for(var o=0;o<i;o++){var c=u[o];(0,f.default)(c.modules,this.game),this._instances.push(c)}u.length=0}}}},{key:"length",get:function(){return this._instances.size}}]),t}();e.default=h,r.default.register("EntityUpdateList",h,"entityList",function(){this._camera=this.game.system.camera})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(0)),a=l(i(1)),r=l(i(16)),s=l(i(7)),u=l(i(105)),o=l(i(19));function l(t){return t&&t.__esModule?t:{default:t}}var d={sprite:"render"},f=function(){function t(e){(0,n.default)(this,t),this.entity=e||null,this.attached=new r.default,this._pendingModulesInitialization=new s.default,this.attach=new u.default(this)}return(0,a.default)(t,[{key:"detach",value:function(t,e){}},{key:"has",value:function(t){return this.attached.has(t)}},{key:"hasByName",value:function(t){var e=d[t];return void 0!==e&&this.has(e)}},{key:"get",value:function(t){return this.attached.get(t)}},{key:"getByName",value:function(t){return o.default.isString(moduleName)&&this.attached.find(function(t,e){if(e.name===moduleName)return e})||null}}]),t}();e.default=f},function(t,e,i){"use strict";t.exports={Entity:i(57),SceneEntity:i(56),EntityUpdateList:i(211),EntityFactory:i(200),Hierarchy:i(199)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=y(i(2)),a=y(i(0)),r=y(i(1)),s=y(i(4)),u=y(i(61)),o=y(i(3)),l=(y(i(16)),y(i(62))),d=y(i(27)),f=y(i(102)),c=y(i(15)),h=y(i(42)),v=y(i(58));function y(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function e(t,i){(0,a.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"animMachine",t,i));return r._currentState=null,(0,f.default)(r),r}return(0,o.default)(e,t),(0,r.default)(e,[{key:"setState",value:function(t){if(null!==this.resource){var e=this._resource.get(t);return null!==e&&void 0!==e?(this._currentState=e,this.restart()):console.warn("AnimationMachine.setState: Invalid state name '"+t+'".'),this}}},{key:"stop",value:function(){(0,u.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"stop",this).call(this),null!==this._currentState&&this._currentState.type===c.default.Spritesheet&&(0,h.default)(this._spriteModule,this._currentState.get(0))}},{key:"setFrame",value:function(t,e){void 0===e&&(e=!0),t>=this._currentAnimObj.length?t=this._currentAnimObj.length-1:t<0&&(t=0),this.currentFrame=t,this._gameObject.component.render.setFrameRect(this._currentAnimObj.getFrame(this.currentFrame)),this._gameObject.component.render.setImage(this._currentAnimObj.source),e&&(this._timer=0)}},{key:"setSpeed",value:function(t){this.frameSpeed=t}},{key:"add",value:function(t,e){return this.animations[t]=new scintilla.Animation(t,e)}},{key:"addFromCache",value:function(t,e){var i=this.game.animationCache.get(t,e);return i?(this.animations[e]=i,null==this.currentAnimation&&this.setState(e),i):null}},{key:"remove",value:function(t){this.animations[t]&&delete this.animations[t]}},{key:"machine",set:function(t){var e=void 0;if("string"==typeof t){if(null!==this._resource&&this._resource.name===t)return;e=this.entity.game.system.cache.animMachine.get(t)}else t instanceof v.default&&(e=t);void 0!==e?(this._resource=e,(0,f.default)(this)):console.warn("AnimationControl.setAnimation: Could not set animation. The animation is undefined.")},get:function(){return this._resource}},{key:"currentState",get:function(){return this._currentState}}]),e}(l.default);e.default=_,d.default.register("animMachine",function(t,e){var i=void 0;void 0!==e[1]&&(i=t.entity.game.system.cache.animMachine.get(e[1]));var n={resource:i,spriteModule:e[0]};return new _(t,n)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.size;if(0===e)return 0;for(var i=0,n=0;n<e;n++)i+=t.at(n).duration||0;return i}},function(t,e,i){var n=i(28),a=i(71).f;i(34)("getOwnPropertyDescriptor",function(){return function(t,e){return a(n(t),e)}})},function(t,e,i){i(216);var n=i(13).Object;t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)}},function(t,e,i){t.exports={default:i(217),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=v(i(2)),a=v(i(0)),r=v(i(1)),s=v(i(4)),u=v(i(61)),o=v(i(3)),l=(v(i(47)),v(i(60)),v(i(27))),d=v(i(62)),f=v(i(102)),c=v(i(15)),h=v(i(42));function v(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,i){(0,a.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"animationControl",t,i));return r.loop=!1,(0,f.default)(r),r}return(0,o.default)(e,t),(0,r.default)(e,[{key:"getKeyFrame",value:function(t){return null===this._resource?null:this._resource.get(t)}},{key:"stop",value:function(){(0,u.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"stop",this).call(this),null!==this._resource&&this._resource.type===c.default.Spritesheet&&(0,h.default)(this._spriteModule,this._resource.get(0))}},{key:"trackPosition",get:function(){return this._position}},{key:"animation",get:function(){return this._resource},set:function(t){var e=void 0;if("string"==typeof t){if(this._resource.name===t)return;e=this.entity.game.system.cache.animation.get(t)}else t instanceof AnimationResource&&(e=t);void 0!==e?this._resource=e:console.warn("AnimationControl.setAnimation: Could not set animation. The animation is undefined.")}}]),e}(d.default);e.default=y,l.default.register("spritesheet",function(t,e){var i=e[1];void 0!==e[1]&&(i=t.entity.game.system.cache.animation.get(i));var n={resource:i,spriteModule:e[0]};return new y(t,n)})},function(t,e,i){"use strict";t.exports={AnimationBaseModule:i(62),AnimationControl:i(219),AnimationMachine:i(214)}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){var n=i.matrix.transformPoint(0,0),a=i.matrix.transformPoint(e.width,0),r=i.matrix.transformPoint(0,e.height),s=i.matrix.transformPoint(e.width,e.height);t.min.x=Math.min(n.x,a.x,r.x,s.x),t.min.y=Math.min(n.y,a.y,r.y,s.y),t.max.x=Math.max(n.x,a.x,r.x,s.x),t.max.y=Math.max(n.y,a.y,r.y,s.y)},n(i(8)),n(i(33)),n(i(70))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n,a){if(void 0===t)return!1;if(void 0===e||null==e)return!1;var r=n.matrix;return t.setTransform(r.a[0],r.a[1],r.a[3],r.a[4],r.a[6],r.a[7]),t.drawImage(e,i.x,i.y,i.width,i.height,-a.x,-a.y,i.width,i.height),!0}},function(t,e,i){"use strict";t.exports={Renderable:i(22),Sprite:i(104),Tilemap:i(69)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){var n;return void 0===(n=!1===t.has("render")?a.default.attach(t,"sprite"):t.getByName("sprite"))||null===n?(console.warn("ModuleAttacher."+e+": Could not create "+i+" module. There is no Sprite module attached. The current Renderable module is not compatible with "+i+" module."),null):n};var n,a=(n=i(27))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";t.exports={Module:i(47),ModuleProvider:i(27),ModuleAttacher:i(105),Renderables:i(223),Animation:i(220)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n){t.width=i,t.height=n,t._aspectRatio=i/n,t._pixelUnit.x=e.width/t.width,t._pixelUnit.y=e.height/t.height}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(0)),a=c(i(1)),r=c(i(10)),s=c(i(48)),u=c(i(106)),o=c(i(20)),l=c(i(8)),d=(c(i(33)),c(i(226))),f=c(i(22));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e){(0,n.default)(this,t),this.game=e,this.canvas=null,this.width=e.config.camera.width,this.height=e.config.camera.height,this.bounds=new s.default,this.viewBounds=new s.default(0,0,this.width,this.height),this._transform=new u.default,this._pixelUnit={x:1,y:1},this._aspectRatio=1,this._backgroundColor=new o.default,this._roundPixels=e.config.roundPixels}return(0,a.default)(t,[{key:"centerView",value:function(){return this.x=.5*this.width,this.y=.5*this.height,this._transform._isDirty=!0,this}},{key:"centerToEntity",value:function(t){return this.x=t.position.x,this.y=t.position.y,this._transform._isDirty=!0,this}},{key:"setBackgroundColor",value:function(t,e,i,n){return void 0===t&&(e=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),this._backgroundColor=o.default.rgba(t,e,i,n),this}},{key:"setSize",value:function(t,e){return(0,d.default)(this,this.canvas,t,e),this._transform._isDirty=!0,this}},{key:"setView",value:function(t,e,i,n){return this._transform.position.x=t,this._transform.position.y=e,(0,d.default)(i,n),this._transform._isDirty=!0,this}},{key:"reset",value:function(){this._transform.reset()}},{key:"isCulled",value:function(t){if(void 0===t||null===t)return!1;if(t instanceof f.default)return this.bounds.intersects(t.bounds);var e=t.modules.get("render");return null!==e||void 0!==e?this.bounds.intersects(e.bounds):this.bounds.contains(t.x,t.y)}},{key:"position",get:function(){return{x:this._transform.position.x,y:this._transform.position.y}},set:function(t){return this._transform.position.x=t.x,this._transform.position.y=t.y,this._transform._isDirty=!0,this}},{key:"x",get:function(){return this._transform.position.x},set:function(t){return this._transform.position.x=t,this._transform._isDirty=!0,this}},{key:"y",get:function(){return this._transform.position.y},set:function(t){return this._transform.position.y=t,this._transform._isDirty=!0,this}},{key:"scale",get:function(){return this._transform.scale.x},set:function(t){return this._transform.scale.x=t,this._transform._isDirty=!0,this}},{key:"angle",get:function(){return this._transform.angle},set:function(t){return this._transform.angle=t,this._transform.rotation=t*l.default.toRadian,this._transform._isDirty=!0,this}},{key:"origin",get:function(){return this._transform.origin},set:function(t){return this._transform.x=t.x,this._transform.y=t.y,this._transform._isDirty=!0,this}},{key:"rotation",get:function(){return this._transform.rotation}},{key:"backgroundColor",set:function(t){return void 0===t&&(t="rgba(0,0,0,0)"),this._backgroundColor=t,this},get:function(){return this._backgroundColor=color}},{key:"roundPixels",set:function(t){return this._roundPixels=t,this._transform._isDirty=!0,this},get:function(){return this._roundPixels}},{key:"size",get:function(){return{x:this.width,y:this.height}}}]),t}();e.default=h,r.default.register("Camera",h,"camera",function(){this.canvas=this.game.system.render.canvas,(0,d.default)(this,this.canvas,this.width,this.height)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(12));e.default=function(t,e){if(void 0===t)throw new Error("SceneManager.add: Could not add Scene. 'scene' is undefined.");if(null===t)throw new Error("SceneManager.add: Could not add Scene. 'scene' is null.");var i;if(t instanceof a.default)i=scene;else if((void 0===t?"undefined":(0,n.default)(t))===a.default)i=new t;else if("object"===(void 0===t?"undefined":(0,n.default)(t))){var s=new a.default(e);i=(0,r.default)(s,t)}else if("function"==typeof t){var u=new t;t instanceof a.default?i=u:(void 0===u.name&&(u.name=e),i=(0,r.default)(!0,u,a.default))}return i};var a=s(i(43)),r=s(i(87));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n){if(!t._scenes.has(e))throw new Error("SceneManager.set: Scene '"+e+"' does not exist.");return void 0===i&&(i=!1),void 0===n&&(n=a.default.NONE),t._transition=n,t._changeScene=e,t._clearCache=i,t};var n,a=(n=i(23))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(2)),a=f(i(0)),r=f(i(1)),s=f(i(4)),u=f(i(3)),o=f(i(43)),l=f(i(153)),d=f(i(8));function f(t){return t&&t.__esModule?t:{default:t}}f(i(23));var c=function(t){function e(t){(0,a.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,"Scintilla Loading Scene"));try{new window.Blob(["%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath d='M224%20387.814V512L32 320l192-192v126.912C447.375 260.152 437.794 103.016 380.93 0 521.287 151.707 491.48 394.785 224 387.814z'/%3E%3C/svg%3E"],{type:"data:image/svg+xml;charset=utf-8"})}catch(t){console.error(t)}i.scintillaLogo=new Image,i.scintillaLogo.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQwIiBoZWlnaHQ9IjI2MC45OCIgdmlld0JveD0iMCAwIDYzLjUgNjkuMDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2RjMzBhOSI+PHBhdGggZD0iTTQzLjQ5IDM2Ljg1NmwtMTQuMTgtNi40MzRMNi45NTYgNDkuNzg0bDE5LjM2Mi0yNy4yNC02LjU3Ni05LjU2OCAxNC40NTUgNi41NzVMNTYuNTUxLjE5IDM3LjE5IDI3LjQzeiIgcGFpbnQtb3JkZXI9InN0cm9rZSBtYXJrZXJzIGZpbGwiLz48cGF0aCBkPSJNMTEuMTIgMzYuOTA4bC0uNTQzLTEuMDQxLTEuMDM2LjU0My41MzggMS4wMzZ6bS0xLjg4OC00LjE3NmwtLjM2LTEuMTE2LTEuMTE2LjM2MS4zNjYgMS4xMTV6bS0xLjA2NC00LjQ1NmwtLjA5Ny0uNjM1di0uMDNsLS4wMDYtLjAzLS4wMy0uNDI5LTEuMTY2LjA4LjAzNC40OC4wMDYuMDQ3LjEwMy42ODZ6bS0uMTAzLTUuNjk4bC0xLjE2Ny0uMTA4LS4xMDggMS4xNjcgMS4xNjcuMTA4em0uODY0LTQuNDMzbC4wMDYtLjAzLjAwNi0uMDMtLjMwMy0uMDgtLjgxMi0uMjgxLS4wMDYuMDMtLjAxMi4wNDYtLjI4NiAxLjExNSAxLjEzMi4yOTN6bTEuNDE5LTMuNjMzbC4zMzctLjYyMy0xLjAzLS41NTUtLjM2LjY2My0uMDE4LjA0Mi0uMTcxLjM4MyAxLjA3NS40N3ptMi44NTQtNC40NWwtLjkyNi0uNzIxLS43MjEuOTI3LjkyNy43MTV6bTMuMTg3LTMuMjlsLS43OS0uODYzLS44NjQuNzk1Ljc5Ni44NTh6bTMuMTgtMi4yNjVsLjAzLS4wM2guMDExbC41MjEtLjI4LS41Ni0xLjAzLS41NjEuMzAyLS4wNC4wMy0uNDQ3LjI5My42NDEuOTg0ek00Mi42NDUgMi41bC0uMjUxLS4xMzItLjA0Ni0uMDMtLjgxOC0uMzQzLS40NTIgMS4wNzUuNzcyLjMyNi4yNTIuMTMyem0tMTguMzIzLS4xMzJsLS4zODMtMS4xMS0xLjEwNC4zODQuMzgzIDEuMTA0ek0zOC4xMi44MjhMMzYuOTgyLjU1M2wtLjI2OSAxLjE0NCAxLjEzOC4yN3ptLTkuNTA3LjUzOGguMTMzTDI4LjY0My4xOTloLS4xODNsLTEuMDE4LjE3OC4yIDEuMTU2em00LjgtMS4zMDRMMzIuNTIgMGgtLjMyNmwuMDEyIDEuMTY3aC4yMzVsLjg4Ni4wNjJ6TTUyLjM4IDEzLjA2NWwuNTM4IDEuMDQgMS4wNC0uNTQyLS41NDMtMS4wMzZ6bTEuODgyIDQuMTc2bC4zNjYgMS4xMTUgMS4xMS0uMzYtLjM2LTEuMTE2em0xLjA2NCA0LjQ1NmwuMTAzLjY0di4wM2wuMDA2LjAzLjAyOS40MyAxLjE2Ny0uMDc4LS4wMzQtLjQ4LS4wMDYtLjA0Ny0uMTAzLS42ODZ6bS4xMDkgNS42OThsMS4xNjcuMTA4LjEwMy0xLjE2Ny0xLjE2Ny0uMTA4em0tLjg2NCA0LjQzM2wtLjAwNi4wMy0uMDA2LjAzLjI5Mi4wOC44MTguMjgxLjAxMi0uMDMuMDEyLS4wNDguMjg1LTEuMTEtMS4xMzItLjI5MnptLTEuNDAyIDMuNTkzbC0uMDEyLjAzLS4wMTIuMDMtLjMzNy42MTcgMS4wMzUuNTU1LjM1NS0uNjYzLjAyMy0uMDQyLjE2Ni0uMzg0LTEuMDctLjQ2OXptLTIuODcxIDQuNDlsLjkyNi43MjEuNzE1LS45MjctLjkyNi0uNzE1em0tMy4xOTIgMy4yOWwuNzk1Ljg2My44NjMtLjc5NS0uNzk1LS44NTh6bS0zLjE3NSAyLjI2NWwtLjAzLjAzaC0uMDEybC0uNTIuMjguNTU1IDEuMDMuNTYtLjMwMy4wNDYtLjAzLjQ0Ni0uMjkzLS42NC0uOTg0em0tMjMuMDc2IDIuMDA4bC4yNTEuMTMyLjA0LjAzLjgxOS4zNDMuNDU3LTEuMDc2LS43NzgtLjMyNmgtLjAwNmwtLjAzNC0uMDMtLjIxMi0uMTE0em0xOC4zMTcuMTM4bC4zODMgMS4xMDQgMS4xMS0uMzg0LS4zODQtMS4xMDR6bS0xMy43OTggMS41MzNsMS4xNDQuMjc1LjI2OS0xLjE0NC0xLjE0NC0uMjd6bTkuNTEzLS41MzhoLS4xMzhsLjEwOCAxLjE2N2guMTgzbDEuMDE5LS4xNzgtLjItMS4xNTZ6bS00LjggMS4zMDRsLjg5My4wNjRoLjMybC0uMDEyLTEuMTY3aC0uMjI5bC0uODkyLS4wNjR6IiBjb2xvcj0iIzAwMCIgc29saWQtY29sb3I9IiMwMDAwMDAiIHN0eWxlPSJmb250LWZlYXR1cmUtc2V0dGluZ3M6bm9ybWFsO2ZvbnQtdmFyaWFudC1hbHRlcm5hdGVzOm5vcm1hbDtmb250LXZhcmlhbnQtY2Fwczpub3JtYWw7Zm9udC12YXJpYW50LWxpZ2F0dXJlczpub3JtYWw7Zm9udC12YXJpYW50LW51bWVyaWM6bm9ybWFsO2ZvbnQtdmFyaWFudC1wb3NpdGlvbjpub3JtYWw7aXNvbGF0aW9uOmF1dG87bWl4LWJsZW5kLW1vZGU6bm9ybWFsO3NoYXBlLXBhZGRpbmc6MDt0ZXh0LWRlY29yYXRpb24tY29sb3I6IzAwMDt0ZXh0LWRlY29yYXRpb24tbGluZTpub25lO3RleHQtZGVjb3JhdGlvbi1zdHlsZTpzb2xpZDt0ZXh0LWluZGVudDowO3RleHQtb3JpZW50YXRpb246bWl4ZWQ7dGV4dC10cmFuc2Zvcm06bm9uZSIgcGFpbnQtb3JkZXI9InN0cm9rZSBtYXJrZXJzIGZpbGwiIHdoaXRlLXNwYWNlPSJub3JtYWwiLz48cGF0aCBkPSJNNi4zMiA2NS43MjhxLS4xMDcgMS4zMzMtLjkxIDIuMjc2LS41MjguNjQyLTEuNDA1LjktLjQ3NS4xNDctMS4wODIuMTQ3LTEuMTMxIDAtMS44MTgtLjU1OS0uNTctLjQ2LS44NTgtMS4yNDMtLjI4OC0uNzg5LS4yNDUtMS44MTVsMS44MzQtLjEyNnEuMDIgMS4xMS40NCAxLjYwNi4zMDYuMzc3Ljc1NS4zNTYuNjMtLjAzIDEuMDY0LS42MTQuMjI0LS4zLjI3Ni0uODQ1LjA3Ny0uODAzLS41NjctMS41ODUtLjUyMS0uNTM4LTEuNTU2LTEuNjEzLS44NjktLjkyMi0xLjE5LTEuNjU1LS4zNDYtLjgyMy0uMjU0LTEuNzg3LjE2Ni0xLjczOCAxLjQxOC0yLjYzMlEyLjk5MiA1NiA0LjA2IDU2cTEuMDI2IDAgMS43MTUuNDYxLjUzMS4zNTYuODE5Ljk5OS4yODguNjM1LjI4NSAxLjQ2NmwtMS44NzUuMzM1cS0uMDAyLS43ODItLjMzLTEuMjE1LS4yMzUtLjMyMS0uNzMtLjMyMS0uNTI0IDAtLjg0OC40NjgtLjI2LjM3Ny0uMzEzLjkzNS0uMDg0Ljg3My41ODMgMS43OC4yNTQuMzQzLjc3NC44MS42MTcuNTU5LjgxMi43ODIuNjM3LjcxMi45NjIgMS40MDQuMTUuMzIuMjM2LjYuMjA3LjY3Ny4xNjkgMS4yMjJ6bTQuOTYgMy4zMnEtMS4yNyAwLTIuMDcyLS44ODctLjgwMi0uODg2LS42ODEtMi4xNWwuNjY3LTYuOTc1cS4xMjEtMS4yNjMgMS4xLTIuMTUuOTgtLjg5NCAyLjIzNi0uODk0IDEuMjcgMCAyLjA2NS44OTQuOC44OTMuNjggMi4xNWwtLjEzOSAxLjQ1MmgtMS45OWwuMTQzLTEuNDg3cS4wNDQtLjQ2LS4yNTMtLjc4Mi0uMjktLjMyOC0uNzUtLjMyOC0uNDU1IDAtLjgwNy4zMjgtLjM1Mi4zMjItLjM5Ni43ODJsLS42NyA2Ljk4OXEtLjA0My40Ni4yNDcuNzgyLjI5LjMyMS43NDQuMzIxLjQ2MSAwIC44MTMtLjMyMS4zNTktLjMyMS40MDMtLjc4MmwuMTY4LTEuNzUyaDEuOTlsLS4xNyAxLjc3M3EtLjEyMiAxLjI3LTEuMSAyLjE1Ny0uOTc4Ljg4LTIuMjI4Ljg4em03LjE5LS4xNmgtMS45MTNsMS4yMi0xMi43MzVoMS45MTJ6bTUuNzQtMTIuNzM0bDEuNzIzIDguNTUzLjgxOC04LjU1M2gxLjkybC0xLjIxOSAxMi43MzVoLTIuMDZsLTEuODY1LTguMTU1LS43OCA4LjE1NWgtMS45MTRsMS4yMi0xMi43MzV6bTguNTMgMS45MjFoLTIuMDM5bC4xODQtMS45Mmg1Ljk5bC0uMTgzIDEuOTJIMzQuNjZMMzMuNjI1IDY4Ljg5aC0xLjkyem03LjAzIDEwLjgxM2gtMS45MTNsMS4yMi0xMi43MzVoMS45MTJ6bTcuNiAwaC01LjIzbDEuMjItMTIuNzM1aDEuOTEzbC0xLjAzNyAxMC44MjloMy4zMTZ6bTcuMjEgMGgtNS4yM2wxLjIyLTEyLjczNWgxLjkxM2wtMS4wMzcgMTAuODI5aDMuMzE2em00LjczLTIuOTJsLS43NDggMi45MjVoLTEuOTk3bDMuMzc3LTEyLjczNWgyLjY0NmwuOTEgMTIuNzM1aC0yLjAxbC0uMTc0LTIuOTI1em0xLjY2NS02Ljg5MWwtMS4xOTMgNS4wMmgxLjQyNXoiLz48L2c+PC9zdmc+",i._loaded=!1;var r=i;i._finished=!1,i.progress=0,i.fromProgress=0,i.toProgress=0,i.t=0,i.game=t,i.nextScene=null,i.preloadingDone=!1,i.scintillaLogo.onload=function(){r._loaded=!0,function(){this._midPos={x:160,y:120},this._barColor="#dc30a9",this._barPosX=160-.3*this.scintillaLogo.width*.5,this._barPosY=104+.3*this.scintillaLogo.height*.5+8,this._barPosW=.3*this.scintillaLogo.width}.call(r)};var u=function(t){this._loaded&&(t.imageExtra(this.scintillaLogo,160,104,.3,.3,.5,.5),t.color=this._barColor,t.outlineRect(this._barPosX,this._barPosY,this._barPosW,7),t.rect(this._barPosX+2,this._barPosY+2,(this._barPosW-4)*this.progress,3),t.font("Verdana",6),t.text("WIP - "+l.default.VERSION,316,236,"#490c37","right"))},o=function(t){if(!this._finished){if(this.t+=t/.15,this.t>=1&&(this.t=1),this.preloadingDone)this.wait+=t,this.wait>=1.5&&(this.transition.in(),this.events.subscribeOnce("transition_end",function(){this.transition.reset(),this.preloadDone()},this),this._finished=!0);else{var e=this.load.progress;e>=1&&(this.preloadingDone=!0),e>this.progress&&(this.fromProgress=this.progress,this.toProgress=e,this.t=0)}this.progress=d.default.lerp(this.fromProgress,this.toProgress,this.t)}};return i.loading=o,i.update=o,i.loadingGUI=u,i.gui=u,i}return(0,u.default)(e,t),(0,r.default)(e,[{key:"init",value:function(t){this.nextScene=t,this.wait=0,this.t=0,this.progress=0,this.preloadingDone=!1,this.ui.setSize(320,240),this.ui.setViewportByAspectRatio(1.33333333333),this.transition.settings.setInDuration(.35)}},{key:"start",value:function(){}}]),e}(o.default);e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=h(i(0)),a=h(i(1)),r=h(i(10)),s=h(i(16)),u=h(i(43)),o=h(i(230)),l=h(i(229)),d=h(i(136)),f=h(i(228)),c=h(i(19));function h(t){return t&&t.__esModule?t:{default:t}}var v=function(){function t(e){(0,n.default)(this,t),this.game=e,this._scenes=new s.default,this.currentScene=null,this._currentSceneName="",this._changeScene=null,this._transition=null,this._isTranistioning=!1,this._setup=!1,this._clearCache=!1,this._scintillaLoading=!1,this.onStartCallback=null,this.onLoadingCallback=null,this.onLoadingRenderCallback=null,this.onPreloadCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onDestroyCallback=null,this._loadingPlaceHolder=new o.default(this.game)}return(0,a.default)(t,[{key:"add",value:function(t,e){if(void 0===t)throw new Error("SceneManager.add: Could not add Scene. 'sceneName' is undefined.");if(!c.default.isString(t))throw new Error("SceneManager.add: Could not add Scene. 'sceneName' is not string.");if(this._scenes.has(t))throw new Error('SceneManager.add: Could not add Scene. There is already a scene with name "'+t+'".');var i=(0,f.default)(e,t);return this._scenes.set(t,i),this}},{key:"new",value:function(t){if(this._scenes.has(t))throw new Error('Could not create new Scene. The scene name "'+name+'" already exists.');var e=new u.default(this.game,t);return this._scenes.set(t,e),e}},{key:"set",value:function(t,e){return(0,l.default)(this,t,e)}},{key:"transition",value:function(t,e){(0,l.default)(this,t,!1,e)}},{key:"restart",value:function(t){void 0===t&&(t=!1),this._changeScene=this._currentSceneName,this._clearCache=t}},{key:"remove",value:function(t){this._currentSceneName===t&&(this.currentScene=null,this.onStartCallback=null,this.onLoadingCallback=null,this.onLoadingRenderCallback=null,this.onPreloadCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onDestroyCallback=null),delete this.scenes[t]}}]),t}();e.default=v,r.default.register("SceneManager",v,"scene",function(){(0,d.default)(this.game,this._loadingPlaceHolder)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){function i(){this._isTranistioning=!1,this.onStartCallback&&this.onStartCallback.call(this.currentScene,this.game)}void 0===e&&(e=a.default.NONE),t._scintillaLoading=!1,t._transition=e,void 0!==t.currentScene&&null!==t.currentScene&&(e<=a.default.NONE?i.call(t):(0,n.default)(t,i.bind(t)))};var n=r(i(134)),a=r(i(23));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";var n,a={NONE:0,START:1,LOADING:2,RUNNING:3};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),t.exports=a},function(t,e,i){"use strict";t.exports={State:i(233),Scene:i(43),SceneManager:i(231)}},function(t,e,i){"use strict";t.exports={Ease:i(64).default,Type:i(26).default}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=4022871197,e=function(e){e=e.toString();for(var i=0;i<e.length;i++){var n=.02519603282416938*(t+=e.charCodeAt(i));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)};return e.version="Mash 0.9",e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){e.preventDefault&&t.preventDefault(),e._enabled&&(e.status=!1,e.press=!1,e.release=!0,e.releaseTime=t.timeStamp,e.pressDuration=e.releaseTime-e.pressTime,e.releaseDuration=0,e.pressTime=0,e._event=a.default.RELEASED)};var n,a=(n=i(44))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){e.preventDefault&&t.preventDefault(),e._enabled&&!1===e.press&&(e.status=!0,e.press=!0,e.release=!1,e.pressTime=t.timeStamp,e.pressDuration=0,e.releaseDuration=e.pressTime-e.releaseTime,e._event=a.default.PRESSED)};var n,a=(n=i(44))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";t.exports={Key:i(111),Keyboard:i(110),Mouse:i(109),Input:i(108)}},function(t,e,i){"use strict";t.exports={State:i(45),Style:i(65),Behavior:i(23)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),a=o(i(1)),r=o(i(20)),s=o(i(26)),u=o(i(65));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,n.default)(this,t),this.transition=e,this.fromAlpha=0,this.toAlpha=0,this.inColor=r.default.black,this.outColor=r.default.black,this.inDuration=.5,this.outDuration=.5,this.pauseDuration=0,this.style=u.default.FILL,this.timingInMethod=s.default.LINEAR,this.timingOutMethod=s.default.LINEAR,this.timingInArgument=3,this.timingOutArgument=3}return(0,a.default)(t,[{key:"setInColor",value:function(t){return this.inColor.parse(t),this}},{key:"setOutColor",value:function(t){return this.outColor.parse(t),this}},{key:"setDuration",value:function(t){return this.setInDuration(t),this.setOutDuration(t),this}},{key:"setInDuration",value:function(t){return this.inDuration=Math.abs(t),this}},{key:"setOutDuration",value:function(t){return this.outDuration=Math.abs(t),this}},{key:"setPauseDuration",value:function(t){return this.pauseDuration=Math.abs(t),this}},{key:"setEaseMethod",value:function(t,e){return this.setInTiming(t,e),this.setOutTiming(t,e),this}},{key:"setEaseInMethod",value:function(t,e){return this.timingInMethod=t,this.timingInArgument=e||1,this}},{key:"setEaseOutMethod",value:function(t,e){return this.timingOutMethod=t,this.timingOutArgument=e||1,this}}]),t}();e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(0)),a=d(i(1)),r=d(i(241)),s=d(i(45)),u=d(i(20)),o=d(i(23)),l=d(i(10));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(){function t(e){(0,n.default)(this,t),this.game=e,this.settings=new r.default(this),this._behaviour=o.default.NONE,this._state=s.default.NONE,this._alpha=0,this._tColor=u.default.transparent,this._startColor=new u.default,this._t=0}return(0,a.default)(t,[{key:"in",value:function(){this._behaviour!==o.default.FADEIN&&(this._alpha=0,this._t=0,this._startColor.setColor(this.settings.inColor,0),this._tColor.setColor(this._startColor,0),this.settings.inColor.a=1,this._behaviour=o.default.FADEIN,this._state=s.default.IN)}},{key:"out",value:function(){this._behaviour!==o.default.FADEOUT&&(this._t=0,this._startColor.setColor(this.settings.outColor,1),this._tColor.setColor(this._startColor,1),this.settings.outColor.a=0,this._behaviour=o.default.FADEOUT,this._state=s.default.OUT)}},{key:"inout",value:function(){this.in(),this._behaviour=o.default.FADEINOUT}},{key:"by",value:function(t){switch(t){case o.default.NONE:return;case o.default.FADEINOUT:return this.inout();case o.default.FADEIN:return this.in()}}},{key:"reset",value:function(){this._tColor.setColor(this._startColor,0),this._t=0,this._behaviour=o.default.NONE,this._state=s.default.NONE}}]),t}();e.default=f,l.default.register("Transition",f,"transition")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.canvas=this.game.system.render.canvas,this.context=this.game.system.render.context,this.draw.init(),this.game.config.debug&&(this.debug=new a.default(this.game,this.draw))};var n,a=(n=i(114))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),r=s(i(19));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i){(0,n.default)(this,t),this.game=e,this.cache=null,this.context=null,this.ui=i,this.lastAlpha=1,this.lastColor="#000",this.currentColor="#FFF",this.currentTextAlign="center",this.disablePointTransform=!1}return(0,a.default)(t,[{key:"init",value:function(){return this.cache=this.game.system.cache,this.context=this.game.system.render.context,this}},{key:"defaultComposite",value:function(){this.context.globalCompositeOperation="source-over"}},{key:"transformPosition",value:function(t,e,i,n){return this.disablePointTransform?{x:t,y:e,w:i||0,h:n||0}:{x:t-this.ui.viewport.x,y:e-this.ui.viewport.y,w:i-this.ui.viewport.x||0,h:n-this.ui.viewport.y||0}}},{key:"font",value:function(t,e,i){r.default.isNumber(e)&&(e=e.toString()+"px"),void 0===i&&(i="normal"),this.context.font=i+" "+e+" '"+t+"'"}},{key:"text",value:function(t,e,i,n,a){void 0!==n&&(this.color=n),void 0!==a&&(this.align=a);var r=this.transformPosition(e,i);this.context.textAlign=a,this.context.fillText(t,r.x,r.y)}},{key:"image",value:function(t,e,i,n,a){var r=this.transformPosition(e,i);this.context.drawImage(t,0,0,t.width,t.height,r.x,r.y,t.width,t.height)}},{key:"imageExtra",value:function(t,e,i,n,a,r,s){if(void 0!==t&&null!==t){void 0===n&&(n=1),void 0===a&&(a=1),void 0===r&&(r=0),void 0===s&&(s=0);var u=this.transformPosition(e,i),o=t.width*r,l=t.height*s;this.context.save(),this.context.translate(u.x,u.y),this.context.scale(n,a),this.context.drawImage(t,0,0,t.width,t.height,-o,-l,t.width,t.height),this.context.restore()}}},{key:"sprite",value:function(t,e,i,n,a){var r=this.cache.image.get(t);if(null!==r){void 0===n&&(n=0),void 0===a&&(a=0);var s=this.transformPosition(e,i),u=r.width*n,o=r.height*a;this.context.save(),this.context.translate(s.x,s.y),this.context.drawImage(r.data,0,0,r.width,r.height,-u,-o,r.width,r.height),this.context.restore()}}},{key:"spriteScaled",value:function(t,e,i,n,a,r,s){var u=this.cache.image.get(t);if(null!==u){void 0===r&&(r=0),void 0===s&&(s=0);var o=this.transformPosition(e,i),l=u.width*r,d=u.height*s;this.context.save(),this.context.translate(o.x,o.y),this.context.scale(n,a),this.context.drawImage(u.data,0,0,u.width,u.height,-l,-d,u.width,u.height),this.context.restore()}}},{key:"spriteSkew",value:function(t,e,i,n,a,r,s){var u=this.cache.image.get(t);if(null!==u){void 0===r&&(r=0),void 0===s&&(s=0),this.transformPosition(e,i);var o=u.width*r,l=u.height*s;this.context.save(),this.context.transform(1,Math.tan(n),0,1,e,i),this.context.transform(1,0,Math.tan(a),1,0,0),this.context.drawImage(u.data,0,0,u.width,u.height,-o,-l,u.width,u.height),this.context.restore()}}},{key:"spriteAskew",value:function(t,e,i,n,a,r,s){var u=this.cache.image.get(t);if(null!==u){void 0===r&&(r=0),void 0===s&&(s=0),this.transformPosition(e,i);var o=u.width*r,l=u.height*s;this.context.save(),this.context.transform(1,Math.atan(n),0,1,e,i),this.context.transform(1,0,Math.atan(a),1,0,0),this.context.drawImage(u.data,0,0,u.width,u.height,-o,-l,u.width,u.height),this.context.restore()}}},{key:"spriteRskew",value:function(t,e,i,n,a,r,s){var u=this.cache.image.get(t);if(null!==u){void 0===r&&(r=0),void 0===s&&(s=0),this.transformPosition(e,i);var o=u.width*r,l=u.height*s;this.context.save(),this.context.transform(1,n,0,1,e,i),this.context.transform(1,0,a,1,0,0),this.context.drawImage(u.data,0,0,u.width,u.height,-o,-l,u.width,u.height),this.context.restore()}}},{key:"spritePart",value:function(t,e,i,n,a,r,s,u,o){var l=this.cache.image.get(t);if(null!==l){void 0===u&&(u=0),void 0===o&&(o=0);var d=this.transformPosition(e,i),f=r*u,c=s*o;this.context.save(),this.context.translate(d.x,d.y),this.context.drawImage(l.data,n,a,r,s,-f,-c,r,s),this.context.restore()}}},{key:"spritesheet",value:function(t,e,i,n,a,r,s,u){var o=this.cache.animation.get(t);if(null===o)return!1;var l=o.get(n);if(null===l||void 0===l)return!1;if(null===l.image)return!1;var d=l.frame;void 0===s&&(s=1),void 0===u&&(u=s),void 0===a&&(a=0),void 0===r&&(r=0);var f=this.transformPosition(e,i),c=d.width*a,h=d.height*r;return this.context.save(),this.context.translate(f.x,f.y),this.context.scale(s,u),this.context.drawImage(l.image.data,d.x,d.y,d.width,d.height,-c,-h,d.width,d.height),this.context.restore(),!0}},{key:"rect",value:function(t,e,i,n,a){var r=this.transformPosition(t,e,i,n);this.context.save(),this.context.fillStyle=a||this.currentColor,this.context.translate(r.x,r.y),this.context.fillRect(0,0,r.w,r.h),this.context.restore()}},{key:"outlineRect",value:function(t,e,i,n,a,r){r=r||this.currentColor;var s=this.transformPosition(t,e,i,n);this.context.save(),this.context.translate(s.x,s.y),this.context.lineWidth=a||1,this.context.strokeStyle=r,this.context.strokeRect(0,0,s.w,s.h),this.context.restore()}},{key:"bounds",value:function(t,e){void 0===e&&(e="red"),this.context.setTransform(1,0,0,1,0,0),this.outlineRectangle(t.min.x,t.min.y,t.max.x-t.min.x,t.max.y-t.min.y,e,1)}},{key:"color",set:function(t){this.lastColor=this.context.fillStyle,this.context.fillStyle=t,this.currentColor=this.context.fillStyle}},{key:"alpha",set:function(t){this.lastAlpha=this.context.globalAlpha,this.context.globalAlpha=t}},{key:"align",set:function(t){this.context.textAlign=t,this.currentTextAlign=this.context.textAlign}},{key:"composite",set:function(t){this.context.globalCompositeOperation=t}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){t.width=e,t.height=i,t.aspectRatio=e/i,t.pixelUnit.x=t.canvas.width/e,t.pixelUnit.y=t.canvas.height/i,t._isDirty=!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={Square:0,Pillarbox:1,Letterbox:2,computeViewPort:function(t,e){var i={x:0,y:0,w:1,h:1,style:0};if(Math.round(100*t)/100==Math.round(100*e)/100)return i;if(t>e){var a=1-e/t;i.x=a/2,i.y=0,i.w=1-a,i.h=1,i.style=n.Pillarbox}else{var r=1-t/e;i.x=0,i.y=r/2,i.w=1,i.h=1-r,i.style=n.Letterbox}return i}};e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(0)),a=c(i(1)),r=c(i(10)),s=c(i(32)),u=c(i(246)),o=c(i(38)),l=c(i(245)),d=(c(i(114)),c(i(8)),c(i(244))),f=c(i(243));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e){(0,n.default)(this,t),this.game=e,this.canvas=null,this.width=this.game.width,this.height=this.game.height,this.viewport=new s.default(0,0,this.width,this.height),this.ratiobox=null,this.aspectRatio=this.width/this.height,this.pixelUnit={x:1,y:1},this._isDirty=!0,this.matrix=new o.default(1),this.context=null,this._alpha=1,this.backgroundColor="#000",this.backgroundAlpha=0,this.debug=null,this.draw=new d.default(e,this)}return(0,a.default)(t,[{key:"setSize",value:function(t,e){return(0,l.default)(this,t,e),this}},{key:"setViewport",value:function(t,e,i,n){return this.viewport.x=t,this.viewport.y=e,this.viewport.width=i,this.viewport.height=n,this._isDirty=!0,this}},{key:"setViewportByAspectRatio",value:function(t){var e=this.game.system.render.canvas.width,i=this.game.system.render.canvas.height;this.ratiobox=u.default.computeViewPort(e/i,t);var n=0,a=0;if(this.ratiobox.style===u.default.Square)return this.viewport.set(0,0,e,i),this;this.ratiobox.style===u.default.Pillarbox?n=this.ratiobox.x*this.width:this.ratiobox.style===u.default.Letterbox&&(a=this.ratiobox.y*this.height),this.viewport.set(n,a,this.width*(e/this.width)-2*n,this.height*(i/this.height)-2*a);var r=e*(2*this.ratiobox.x),s=(this.ratiobox.y,(this.canvas.clientWidth-r)/i),o=i/(this.height/2*2)*s;return this.pixelUnit.x=o,this.pixelUnit.y=o,this._isDirty=!0,this}},{key:"setSizeByCanvas",value:function(){return(0,l.default)(this,this.game.system.render.canvas.width,this.game.system.render.canvas.height),this}},{key:"setSizeByCamera",value:function(){return(0,l.default)(this,this.game.system.camera.width,this.game.system.camera.height),this}},{key:"setSizeByAspectRatio",value:function(t){return(0,l.default)(this,this.game.system.render.canvas.width*t,this.game.system.render.canvas.height*t),this}},{key:"alpha",get:function(){return this._alpha},set:function(t){this._alpha=t}}]),t}();e.default=h,r.default.register("UserInterface",h,"ui",f.default)},function(t,e,i){var n=i(24),a=i(74).onFreeze;i(34)("seal",function(t){return function(e){return t&&n(e)?t(a(e)):e}})},function(t,e,i){i(248),t.exports=i(13).Object.seal},function(t,e,i){"use strict";t.exports={Smoothing:i(121),Manager:i(119),Interpolation:i(118)}},function(t,e,i){"use strict";t.exports={Canvas:i(250),RenderLayer:i(117),RenderLayerManagement:i(116),Render:i(115),UI:i(247),Transition:i(242)}},function(t,e,i){"use strict";t.exports={MergeSort:i(68)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Utils=i(252),e.Set=i(66).default,e.Map=i(16).default,e.List=i(7).default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){!0===t._ended&&(t._ended=!1,t.loop?(t.playTime=t.startTime=0,t.buffer=(0,a.default)(t),(0,n.default)(t,0)):t.stop(),t.once&&(t.destroy(),t._pendingRemoval=!0))};var n=r(i(123)),a=r(i(122));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!this._noAudio){for(var t=0;t<this._sounds.length;t++){var e=this._sounds.at(t);this._system.type===n.default.WEBAUDIO&&(0,a.default)(e),e._requireRemoval&&this._removalList.push(t)}0!==this._removalList.length&&(this._sounds.eraseIndexedList(this._removalList),this._removalList.length=0)}};var n=r(i(124)),a=r(i(254));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(5));e.default=function(t,e){if(void 0===e&&(e=!1),Array.isArray(t))for(var i=0;i<t.length;i++)e?(0,a.default)(t[i]):(0,n.default)(t[i]);else e?(0,a.default)(t):(0,n.default)(t);return t};var a=r(i(141));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return new Color(t.r,t.g,t.b,t.a)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=new a.default;hex=hex.replace(r,function(t,e,i,n,a){return void 0!==a&&(a="F"),e+e+i+i+n+n+a+a});var i=s.exec(hex);return i&&e.set(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),void 0===i[4]?1:parseInt(i[4],16)),e};var n,a=(n=i(20))&&n.__esModule?n:{default:n},r=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=new a.default,i=r.exec(t.toLowerCase());if(i){var n=parseInt(i[0],10)||0,s=parseInt(i[1],10)||0,u=parseInt(i[3],10)||0,o=1;void 0!==i[4]&&(o=parseFloat(i[4],10)||1),e.set(n,s,u,o)}return e};var n,a=(n=i(20))&&n.__esModule?n:{default:n},r=/^(?:\w*|rgba?)\(?\s*(\d+)\s*\,?(?:\s*(\d+)\s*)?\,?(?:\s*(\d+)\s*)?\,?(?:\s*(\d+(?:\.\d+)?))?\s*\)?$/},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,i,n,r,s=new a.default;return r=t>=16777216?s>>>24:1,e=s>>16&255,i=s>>8&255,n=255&s,s.set(e,i,n,r),s};var n,a=(n=i(20))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(12));e.default=function(t){var e=void 0===t?"undefined":(0,n.default)(t);return"number"===e?(0,a.default)(t):"string"===e?"rgb"===t.substr(0,3).toLowerCase()?(0,r.default)(t):(0,s.default)(t):"object"===e?(0,u.default)(t):void 0};var a=o(i(260)),r=o(i(259)),s=o(i(258)),u=o(i(257));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(5)),a=f(i(0)),r=f(i(1)),u=f(i(8)),o=f(i(125)),l=i(26),d=f(l);function f(t){return t&&t.__esModule?t:{default:t}}var c=new(function(){function t(){(0,a.default)(this,t)}return(0,r.default)(t,[{key:"linear",value:function(t,e,i){return u.default.lerp(t,e,i)}},{key:"stepped",value:function(t,e,i){return e*(i<.5?0:1)+t}},{key:"cut",value:function(t,e,i,n){return void 0===n&&(n=2),u.default.lerp(t,e,u.default.floor(i*n)/n)}},{key:"sine",value:function(t,e,i){return e*((Math.sin(i*Math.PI-u.default.HALFPI)+1)/2)+t}},{key:"power",value:function(t,e,i,n){if((i*=2)<1)return o.default.power(t,e,i,n)/2;var a=n%2==0?-1:1;return e*(a/2*(Math.pow(s-2,n)+2*a))+t}},{key:"quadratic",value:function(t,e,i){return this.power(t,e,i,2)}},{key:"cubic",value:function(t,e,i){return this.power(t,e,i,3)}},{key:"quartic",value:function(t,e,i){return this.power(t,e,i,4)}},{key:"quintic",value:function(t,e,i){return this.power(t,e,i,5)}},{key:"exponential",value:function(t,e,i){return 0==i||1==i?e*i+t:i<.5?.5*e*Math.pow(2,20*i-10)+t:-.5*e*Math.pow(2,-20*i+10)+1+t}},{key:"circ",value:function(t,e,i){return i/2<1?-e/2*(Math.sqrt(1-i*i)-1)+t:e/2*(Math.sqrt(1-i*(i-=2))+1)+t}},{key:"elastic",value:function(t,e,i,n){if(void 0===n&&(n=1),0==i)return t;if(2==(i/=n/2))return t+e;var a=n*(.3*1.5),r=a/4;return e>=Math.abs(e)&&(r=a/(2*Math.PI)*Math.asin(e/e)),i<1?e*Math.pow(2,10*(i-=1))*Math.sin((i*n-r)*(2*Math.PI)/a)*-.5+t:e*Math.pow(2,-10*(i-=1))*Math.sin((i*n-r)*(2*Math.PI)/a)*.5+e+t}},{key:"back",value:function(t,e,i){if(0==i)return t;if(2==(i/=.5))return t+e;var n=l.EASE_BACK_CONST;return i<1?e/2*(i*i*((1+(n*=1.525))*i-n))+t:e/2*((i-=2)*i*((1+(n*=1.525))*i+n)+2)+t}},{key:"by",value:function(t,e,i,n,a){switch(void 0===a&&(a=1),t){case d.default.NONE:return n;case d.default.CUT:return this.cut(e,i,n,a);case d.default.LINEAR:return this.linear(e,i,n);case d.default.SINE:return this.sine(e,i,n);case d.default.QUADRATIC:return this.power(e,i,n,2);case d.default.CUBIC:return this.power(e,i,n,3);case d.default.QUARTIC:return this.power(e,i,n,4);case d.default.QUINTIC:return this.power(e,i,n,5);case d.default.POWER:return this.power(e,i,n,a);case d.default.EXPONENTIAL:return this.exponential(e,i,n);case d.default.CIRC:return this.circ(e,i,n);case d.default.BACK:return this.back(e,i,n);case d.default.ELASTIC:return this.elastic(e,i,n,a)}return n}}]),t}());(0,n.default)(c),e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(5)),a=l(i(0)),r=l(i(1)),s=l(i(8)),u=i(26),o=l(u);function l(t){return t&&t.__esModule?t:{default:t}}var d=new(function(){function t(){(0,a.default)(this,t)}return(0,r.default)(t,[{key:"linear",value:function(t,e,i){return s.default.lerp(t,e,i)}},{key:"stepped",value:function(t,e,i){return e*(i<.5?0:1)+t}},{key:"cut",value:function(t,e,i,n){return void 0===n&&(n=2),s.default.lerp(t,e,s.default.floor(i*n)/n)}},{key:"sine",value:function(t,e,i){return-t*(Math.sin(i*s.default.HALFPI)+1)+t+e}},{key:"power",value:function(t,e,i,n){var a=n%2==0?-1:1;return e*(a*Math.pow(i-1,n)+a)+t}},{key:"quadratic",value:function(t,e,i){return this.power(t,e,i,2)}},{key:"cubic",value:function(t,e,i){return this.power(t,e,i,3)}},{key:"quartic",value:function(t,e,i){return this.power(t,e,i,4)}},{key:"quintic",value:function(t,e,i){return this.power(t,e,i,5)}},{key:"exponential",value:function(t,e,i){return 1==i?t:e*(1-Math.pow(2,10*i))+t}},{key:"circ",value:function(t,e,i){return e*Math.sqrt(1-(i-1)*i)+t}},{key:"elastic",value:function(t,e,i,n){if(void 0===n&&(n=1),0==i)return t;if(1==(i/=n))return t+e;var a=.3*n,r=a/4;return e*Mathf.pow(2,-10*i)*Math.sin((i-r)*(2*Math.PI)/a)+1+t}},{key:"back",value:function(t,e,i){return e*((i-1)*i*((u.EASE_BACK_CONST+1)*i+u.EASE_BACK_CONST)+1)+t}},{key:"by",value:function(t,e,i,n,a){switch(void 0===a&&(a=1),t){case o.default.NONE:return n;case o.default.STEPPED:return this.stepped(e,i,n);case o.default.CUT:return this.cut(e,i,n,a);case o.default.LINEAR:return this.linear(e,i,n);case o.default.SINE:return this.sine(e,i,n);case o.default.QUADRATIC:return this.power(e,i,n,2);case o.default.CUBIC:return this.power(e,i,n,3);case o.default.QUARTIC:return this.power(e,i,n,4);case o.default.QUINTIC:return this.power(e,i,n,5);case o.default.POWER:return this.power(e,i,n,a);case o.default.EXPONENTIAL:return this.exponential(e,i,n);case o.default.CIRC:return this.circ(e,i,n);case o.default.BACK:return this.back(e,i,n);case o.default.ELASTIC:return this.elastic(e,i,n,a)}return n}}]),t}());(0,n.default)(d),e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(t._behaviour!==n.default.NONE){var i=t.settings,s=void 0;switch(t._state){case a.default.IN:t._t+=e/i.inDuration,t._t>=1&&(t._t=1,s=!0),r.default.ease(t._startColor,i.inColor,t._t,i.timingInMethod,0,i.timingInArgument,t._tColor);break;case a.default.WAIT:t._t+=e/i.pauseDuration,t._t>=1&&(t._t=1,s=!0);break;case a.default.OUT:t._t+=e/i.outDuration,t._t>=1&&(t._t=1,s=!0),r.default.ease(t._startColor,i.outColor,t._t,i.timingOutMethod,1,i.timingOutArgument,t._tColor)}if(void 0!==s)switch(t._t=0,t._behaviour){case n.default.FADEIN:case n.default.FADEOUT:t._behaviour=n.default.NONE,t._state=a.default.IDLE,t._behaviour===n.default.FADEOUT&&(t._behaviour=n.default.FADEOUT),t.game.system.events.dispatch("transition_end");break;case n.default.FADEINOUT:t._state===a.default.IN?(t._color.setColor(i.outColor),i.pauseDuration>0?t._state=a.default.WAIT:t._state=a.default.OUT):t._state===a.default.WAIT?(t._state=a.default.OUT,t.game.system.events.dispatch("transition_pause_end")):t._state===a.default.OUT&&(t._state=a.default.IDLE,t._behaviour=n.default.NONE,t.game.system.events.dispatch("transition_end"))}}};var n=s(i(23)),a=s(i(45)),r=(s(i(8)),s(i(64)),s(i(20)));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(t._state!==a.default.NONE)switch(i.globalCompositeOperation="source-over",t.settings.style){case n.default.NONE:return;case n.default.FILL:i.fillStyle=t._tColor.rgba,i.fillRect(0,0,e.width,e.height)}};var n=r(i(65)),a=r(i(45));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t._isDirty&&(t.matrix.setIdentity().scale(t.pixelUnit.x,t.pixelUnit.y).translate(t.viewport.x,t.viewport.y),t._isDirty=!1)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,n.default)(t),t.context.globalCompositeOperation="source-over";var i=0!==t.viewport.x||0!==t.viewport.x||t.viewport.width!==t.canvas.width||t.viewport.height!==t.canvas.height;i&&(t.context.save(),t.context.beginPath(),t.context.rect(0,0,t.viewport.width,t.viewport.height),t.context.clip()),t.context.setTransform(t.matrix.a[0],t.matrix.a[1],t.matrix.a[3],t.matrix.a[4],t.matrix.a[6],t.matrix.a[7]),t.backgroundAlpha>0&&(t.context.globalAlpha=t.backgroundAlpha,t.context.fillStyle=t.backgroundColor,t.context.fillRect(0,0,t.width,t.height)),1!==t._alpha&&(t.context.globalAlpha=1,t._alpha=1),(0,a.default)(e,t.draw),i&&t.context.restore()};var n=r(i(266)),a=r(i(137));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t._setup?t._scintillaLoading?t._loadingPlaceHolder.update(e):t.onUpdateCallback&&t.onUpdateCallback.call(t.currentScene,e):t._scintillaLoading?t._loadingPlaceHolder.loading(e):t.onLoadingCallback&&t.onLoadingCallback.call(t.currentScene,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){this._successFiles.erase(t),0===this._successFiles.size&&this.state===n.default.PROCESSING&&a.default.call(this)};var n=r(i(6)),a=r(i(127));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.state===n.default.ERROR?(this._failedFiles.insert(t),a.default.call(this,t)):(this._processedFiles.insert(t),a.default.call(this,t))};var n=r(i(6)),a=r(i(269));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={None:0,Point:1,Rect:2,Ellipse:3,Polygon:4,Polyline:5};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1)),r=u(i(9)),s=u(i(271));function u(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){(0,n.default)(this,t),this.x=r.default.value(e,"x",0),this.y=r.default.value(e,"y",0),this.width=r.default.value(e,"width",0),this.height=r.default.value(e,"height",0),this.rotation=r.default.value(e,"rotation",0),this.name=r.default.value(e,"name",""),this.id=r.default.value(e,"id",null),this.visible=r.default.value(e,"visible",!0),this.type=r.default.value(e,"type",""),this.objectType=s.default.Rect,!0===e.ellipse?this.objectType=s.default.Ellipse:!0===e.point?this.objectType=s.default.Point:!0===e.polygon?this.objectType=s.default.Polygon:!0===e.polyline&&(this.objectType=s.default.Polyline)}return(0,a.default)(t,[{key:"contains",value:function(t,e){return!(this.width<=0&&this.height<=0)&&t>this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}},{key:"intersects",value:function(t,e,i,n){return!(i<=0||n<=0||this.width<=0||this.height<=0||t>this.x+this.width||t+i<this.x||e>this.y+this.height||e+n<this.y)}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.layers.length,r=new a.default;if(i<=0)return r;for(var s=0;s<i;s++){var u=t.layers[s];if("objectgroup"===u.type&&void 0!==u.objects){for(var o={name:u.name||"",objects:new a.default},l=u.objects.length,d=0;d<l;d++){var f=new n.default(u.objects[d]);o.objects.push(f)}r.push(o)}}return r};var n=r(i(272)),a=r(i(7));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=(n=i(0))&&n.__esModule?n:{default:n};e.default=function t(e,i,n,r,s){(0,a.default)(this,t),this.layer=e,this.data=i,this.tileX=n,this.tileY=r,this.id=s,this.frame=i.st,this.x=Math.round(n*i.st.width),this.y=Math.round(r*i.st.height)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),r=s(i(9));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){(0,n.default)(this,t),this.width=r.default.value(e,"width",0),this.height=r.default.value(e,"height",0),this.x=r.default.value(e,"x",0),this.y=r.default.value(e,"y",0),this.name=r.default.value(e,"name",""),this.alpha=r.default.value(e,"alpha",1),this.visible=r.default.value(e,"visible",!0),this.tiles=r.default.value(e,"tiles",[]),this.hasAnimatedTiles=!1}return(0,a.default)(t,[{key:"getTile",value:function(t,e){var i=t+e*this.width;return this.tiles[i]}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=Boolean(t&n),i=Boolean(t&a),s=Boolean(t&r);return{gid:t&=~(n|a|r),flipHorizontal:e,flipVertical:i,flipDiagonal:s,flipped:!1,rotation:0}};var n=2147483648,a=1073741824,r=536870912},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a={decode:function(t){return window.atob(t)},decodeToUint32:function(t){for(var e=window.atob(t),i=e.length,n=new Array(i),a=0;a<i;a+=4)n[a/4]=(e.charCodeAt(a)|e.charCodeAt(a+1)<<8|e.charCodeAt(a+2)<<16|e.charCodeAt(a+3)<<24)>>>0;return n},encode:function(t){return window.btoa(t)}};(0,((n=i(5))&&n.__esModule?n:{default:n}).default)(a),e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i=t.layers.length,d=new s.default;if(i<=0)return d;for(var c=i-1;c>=0;c--){var h=t.layers[c];if("tilelayer"===h.type){h.enconding&&"base64"===h.enconding&&(h.data=a.default.decodeToUint32(h.data),delete h.enconding);for(var v=new o.default({name:h.name,x:n.default.value(h,"offsetx",0)+h.x,y:n.default.value(h,"offsety",0)+h.y,width:h.width,height:h.height,tileWidth:h.tilewidth,tileHeight:h.tileheight,alpha:h.opacity,visible:h.visible}),y=[],_=0,p=0,m=!1,g=new r.default,M=0;M<h.data.length;M++){var x=(0,u.default)(h.data[M]),b=_+p*v.width,w=null;if(x.gid>0){var k=x.gid,O=f(e,k).getTileGID(k);O.isAnimated&&(g.insert(k),m=!0),w=new l.default(v,O,_,p,b)}y.push(w),++_>=v.width&&(_=0,p++)}v.tiles=y,v.hasAnimatedTiles=m,v.animatedTiles=g.size>0?g:void 0,d.push(v)}}return d};var n=d(i(9)),a=d(i(277)),r=d(i(66)),s=d(i(7)),u=d(i(276)),o=d(i(275)),l=d(i(274));function d(t){return t&&t.__esModule?t:{default:t}}function f(t,e){return t.each(function(t){if(t.hasGID(e))return t})||null}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i in e){var n=parseInt(i),a=t.getTile(n);if(null!==a&&void 0!==a){var r=e[i];a.properties=r}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i in e){var n=parseInt(i),a=t.getTile(n);if(null!==a&&void 0!==a){var r=e[i];for(var s in r){var u=r[s];if("animation"==s){var o=u.length;if(o>1){a.isAnimated=!0;for(var l=[],d=0;d<o;d++){var f=u[d];l.push({duration:f.duration,tileID:f.tileid})}a.keyFrames=l}}}}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(32));function r(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,i,r,s,u,o,l){(0,n.default)(this,t),this.id=r,this.gid=i,this.tileset=e||null,this.st=new a.default(s,u,o,l),this.keyFrames=void 0,this.isAnimated=!1,this.currentFrame=0,this.properties=null}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(0)),a=u(i(1)),r=u(i(7)),s=u(i(281));function u(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e,i,a,s,u,o){(0,n.default)(this,t),this.name=e,this.firstgid=i||1,this.tileWidth=a||16,this.tileHeight=s||16,this.margin=u||0,this.spacing=o||0,this.image=null,this.data=new r.default,this.rows=0,this.collumns=0,this.gidCount=0}return(0,a.default)(t,[{key:"getTileGID",value:function(t){return"string"===t&&(t=parseInt(t)),t<this.firstgid&&t>=this.firstgid+this.gidCount?null:this.data.at(t-this.firstgid)}},{key:"getTile",value:function(t){return"string"===t&&(t=parseInt(t)),this.data.at(t)}},{key:"hasGID",value:function(t){return t>=this.firstgid&&t<this.firstgid+this.gidCount}},{key:"updateData",value:function(t,e){void 0===this.image&&null==this.image||(t=this.image.width,e=this.image.height);var i=(e-2*this.margin+this.spacing)/(this.tileHeight+this.spacing),n=(t-2*this.margin+this.spacing)/(this.tileWidth+this.spacing);this.rows=Math.floor(n),this.collumns=Math.floor(i),this.gidCount=n*i;var a=this.margin,r=this.margin,u=0;this.data.clear();for(var o=0;o<this.gidCount;o++)this.data.push(new s.default(this,this.firstgid+o,o,a,r,this.tileWidth,this.tileHeight)),a+=this.tileWidth+this.spacing,++u>=n&&(u=0,a=this.margin,r+=this.tileHeight+this.spacing)}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i=t.tilesets.length||0,o=new a.default,l=0;l<i;l++){var d=t.tilesets[l];if(d.image){var f=new n.default(d.name,d.firstgid,d.tilewidth,d.tileheight,d.margin,d.spacing);f.image=e.image.get(r.default.getFilenameWithoutExtension(d.image)||d.name),f.updateData(d.imagewidth,d.imageheight),void 0!==d.tiles&&(0,s.default)(f,d.tiles),void 0!==d.tileproperties&&(0,u.default)(f,d.tileproperties),o.push(f)}}return o};var n=o(i(282)),a=o(i(7)),r=o(i(21)),s=o(i(280)),u=o(i(279));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),a=r(i(9));function r(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e){(0,n.default)(this,t),this.name=a.default.value(e,"name","tilemap"),this.width=a.default.value(e,"width",0),this.height=a.default.value(e,"height",0),this.tileWidth=a.default.value(e,"tileWidth",16),this.tileHeight=a.default.value(e,"tileHeight",16),this.pixelsWidth=a.default.value(e,"pixelsWidth",this.width*this.tileWidth),this.pixelsHeight=a.default.value(e,"pixelsHeight",this.height*this.tileHeight),this.orientation=a.default.value(e,"orientation","orthogonal")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){var o=new a.default({name:e.name,width:e.width,height:e.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,orientation:e.orientation}),l=(0,r.default)(e,i),d={tilesets:l,tilelayers:(0,s.default)(e,l),objectlayers:(0,u.default)(e)};return new n.default(t,o,d)};var n=o(i(67)),a=o(i(284)),r=o(i(283)),s=o(i(278)),u=o(i(273));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!this.isOK())return-1;this.progress=0,this._loadedFilesCount=0,this.state=r.default.LOADING,this._filesQueueCount=this._filesQueue.size,0===this._filesQueue.size?n.default.call(this):(this.isDownloading=!0,this._successFiles.clear(),this._failedFiles.clear(),this._filesLoading.clear(),a.default.call(this))};var n=s(i(128)),a=s(i(126)),r=s(i(6));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this._keyWatch.each(function(t,e){e._event=KeyEvent.NONE,e.status=!1}),this._keyWatch.clear(),this._keyGarbage.splice(0,this._keyGarbage.length),this._eventQueue.splice(0,this._eventQueue.length)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),a=s(i(1)),r=s(i(7));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i){var a=this;(0,n.default)(this,t),this.tilemap=e,this.animatedTiles=new r.default;for(var s=0;s<i.length;s++)if(i.at(s).data.hasAnimatedTiles)for(var u=i.at(s).data.animatedTiles,o=function(t){var i=u.at(t),n=e.resource.getTileGID(i);if(null!==a.animatedTiles.find(function(t){return t.tileGID.gid===n.gid}))return"continue";a.animatedTiles.push({t:0,frame:0,tileGID:n})},l=0;l<u.size;l++)o(l)}return(0,a.default)(t,[{key:"update",value:function(){}}]),t}();e.default=u},function(t,e,i){var n=i(76),a=i(51);i(34)("keys",function(){return function(t){return a(n(t))}})},function(t,e,i){i(289),t.exports=i(13).Object.keys},function(t,e,i){t.exports={default:i(290),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,a){var r=0,s=a.matrix,u=s.a[6],o=s.a[7];if(e.floorTiles&&(u=n.default.round(u),o=n.default.round(o)),t.setTransform(s.a[0],s.a[1],s.a[3],s.a[4],u,o),e.culling.method<=1)for(var l=0,d=e.culling.start.y;d<e.culling.end.y;d++)for(var f=e.culling.start.x;f<e.culling.end.x;f++){l=f+d*e.width;var c=i.tiles[l];if(null!=c&&void 0!==c){var h;h=!1===c.data.isAnimated||void 0===c.data.isAnimated?c.data.st:c.data.tileset.getTile(c.data.currentFrame).st,t.drawImage(c.data.tileset.image.data,h.x,h.y,h.width,h.height,c.x-e._originInPixels.x,c.y-e._originInPixels.y,h.width,h.height),r++}}return r};var n=a(i(8));function a(t){return t&&t.__esModule?t:{default:t}}a(i(131))},function(t,e,i){var n=i(37);n(n.S,"Object",{create:i(81)})},function(t,e,i){i(293);var n=i(13).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,i){t.exports={default:i(294),__esModule:!0}},function(t,e,i){var n=i(24),a=i(41),r=function(t,e){if(a(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=i(151)(Function.call,i(71).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return r(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:r}},function(t,e,i){var n=i(37);n(n.S,"Object",{setPrototypeOf:i(296).set})},function(t,e,i){i(297),t.exports=i(13).Object.setPrototypeOf},function(t,e,i){t.exports={default:i(298),__esModule:!0}},function(t,e,i){var n=i(76),a=i(145);i(34)("getPrototypeOf",function(){return function(t){return a(n(t))}})},function(t,e,i){i(300),t.exports=i(13).Object.getPrototypeOf},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,i){if(e instanceof n.default){for(var a=0;a<e.layers.length;a++){t(e.layers.at(a),i)}e.layers.clear()}i.layer.removeRenderable(e),e._bounds=null,e.resource=null,e.frame=null},a(i(132));var n=a(i(69));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i=0;i<t._instances.length;i++){var a=t._instances.at(i);!0===a.isPooled?e.system.pool.push(a):(0,n.default)(a,e,!0)}for(var r=0;r<t._pendingInstances.length;r++){var s=t._instances.at(r);!0===s.isPooled?e.system.pool.push(s):(0,n.default)(s,e,!0)}t._pendingInstances.destroy(),t._destroyInstances.destroy(),t._instances.destroy()},a(i(133));var n=a(i(129));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!0!==this._noAudio){for(var t=0;t<this._sounds.length;t++){var e=this._sounds.at(t);!1!==e.persistent&&void 0!==e.persistent&&!0!==e._pendingRemoval||(e.stop(),e.destroy(),this._sounds.splice(t,1))}this._removalList.length=0}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e in r.default){var i=a.GameSystems[r.default[e]];void 0!==i&&delete t[i.name]}delete t.key,delete t.mouse,delete t.audio};var n,a=i(10),r=(n=i(49))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){null!==e.currentScene&&void 0!==e.currentScene&&((0,n.default)(e.currentScene),e.onDestroyCallback&&e.onDestroyCallback.call(e.currentScene),e._clearCache&&t.cache.clear(),(0,r.default)(t.system.entityList,t),s.default.call(t.input.keyboard),a.default.call(t.audio))};var n=u(i(305)),a=u(i(304)),r=u(i(303)),s=u(i(287));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){this.currentScene=this._scenes.get(t),this.onLoadingCallback=this.currentScene.loading||null,this.onLoadingRenderCallback=this.currentScene.loadingGUI||null,this.onRenderCallback=this.currentScene.gui||null,this.onUpdateCallback=this.currentScene.update||null,this.onStartCallback=this.currentScene.start||null,this.onPreloadCallback=this.currentScene.preload||null,this.onDestroyCallback=this.currentScene.destroy||null,(0,a.default)(this.game,this.currentScene),this._currentSceneName=t,this._setup=!1};var n,a=(n=i(136))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(t.game.systemInited&&null!==t._changeScene&&((0,r.default)(t.game,t),n.default.call(t,t._changeScene),t._currentSceneName===t._changeScene))if(t._changeScene=null,t.onPreloadCallback){t.game.system.load.reset(),t.onPreloadCallback.call(t.currentScene,t.game);var e=null===t.onLoadingCallback&&null===t.onLoadingRenderCallback;null!==t.onLoadingCallback&&null!==t.onLoadingRenderCallback||(e&&t.game.system.load.totalQueuedFiles>0?(t._loadingPlaceHolder.init(t.currentScene),t._scintillaLoading=!0):t._scintillaLoading=!1),0===t.game.system.load.totalQueuedFiles?a.default.call(t):s.default.call(t.game.system.load)}else a.default.call(t)};var n=u(i(307)),a=u(i(135)),r=u(i(306)),s=u(i(286));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.context.globalAlpha=1,t.context.globalCompositeOperation="source-over"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t._depthSorting-e._depthSorting}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(!t.__enable)return 0;var n=0;t.__isDirty&&(t.renderList.sort(a.default),t.__isDirty=!1);for(var r=t.renderList.size,s=0;s<r;s++){var u=t.renderList.at(s);e.bounds.intersects(u.bounds)&&(i.globalAlpha=u.alpha,n+=u.render(i))}return n};var n,a=(n=i(310))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(t._enable&&(1!==t._alpha&&(t.context.globalAlpha=1,t._alpha=1),t.context.globalCompositeOperation="source-over",!0===t.game.scene._setup))for(var a=0;a<t.layer.renderLayers.length;a++){var r=t.layer.renderLayers.at(a);if(r.enable){var s=0;s+=(0,n.default)(r,e,t.context),t.drawCalls+=s}}};var n=a(i(311));function a(t){return t&&t.__esModule?t:{default:t}}a(i(137))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.clear&&t.context.clearRect(0,0,t.canvas.width,t.canvas.height),t.context.fillStyle=t._backgroundColor,t.context.fillRect(0,0,t.canvas.width,t.canvas.height),t.drawCalls=0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n,r,s,u){var o=[];o[0]=(0,a.default)(e,i,s,u),o[1]=(0,a.default)(e+n,i,s,u),o[2]=(0,a.default)(e,i+r,s,u),o[3]=(0,a.default)(e+n,i+r,s,u),t.min.x=Math.min(o[0].x,o[1].x,o[2].x,o[3].x),t.min.y=Math.min(o[0].y,o[1].y,o[2].y,o[3].y),t.max.x=Math.max(o[0].x,o[1].x,o[2].x,o[3].x),t.max.y=Math.max(o[0].y,o[1].y,o[2].y,o[3].y)};var n,a=(n=i(70))&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(!1!==t._transform._isDirty){var i=t._transform;i.rotation!=i._oldRotation&&(i._oldRotation=i.rotation,i._cosSin.y=Math.sin(i.rotation),i._cosSin.x=Math.cos(i.rotation));var r=t.width*i.origin.x,s=t.height*i.origin.y,u={x:i.position.x+r,y:i.position.y+s};t._roundPixels&&(u.x=a.default.round(u.x),u.y=a.default.round(u.y)),t.viewBounds.setMin(u.x,u.y).setMax(u.x+t.width,u.y+t.height),u.x=-u.x,u.y=-u.y,i.matrix.setIdentity().scale(t._pixelUnit.x,t._pixelUnit.y).translate(u.x,u.y).scale(i.scale.x,i.scale.x),(0,n.default)(t.bounds,t._transform,t.width,t.height,u),i.matrix.radianRotate(i._cosSin.x,i._cosSin.y).translate(-r,-s)}},r(i(314)),r(i(70));var n=r(i(138)),a=r(i(8));function r(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(0)),a=o(i(1)),r=o(i(139)),s=o(i(9)),u=o(i(8));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,i){(0,n.default)(this,t),this.game=e,this.requestAnimationFrame=new r.default(i.time.timeoutMode),this.isRunning=!1,this.loop=null,this.render=null,this.startTime=0,this.time=0,this.previousTime=0,this.elapsed=0,this.hiDeltaTime=0,this.deltaTime=0,this.requireFpsUpdate=!0,this.fpsDesired=s.default.value(i,"fps",60),this.fps=this.fpsDesired,this.currentFps=0,this._nextFpsUpdate=0,this._framesThisSecond=0,this.interpolation=!1,this.timeStep=Math.ceil(1e3/this.fpsDesired),this.minTimeStep=1.25*this.timeStep,this.accumalator=0,this.accumulatorMax=10*this.timeStep,this.updateLast=0,this.updateAverageDelta=0,this.frameCounter=0}return(0,a.default)(t,[{key:"init",value:function(t){this.isRunning||(this.reset(),this.loop=t.loop.bind(t),this.render=t.render.bind(t),this.startTime=window.performance.now(),this.requestAnimationFrame.start(this.update.bind(this)),this.isRunning=!0)}},{key:"update",value:function(t){this.hiDeltaTime=t-this.previousTime,this.time=t,this.elapsed+=this.hiDeltaTime,this.requireFpsUpdate&&this.fpsUpdate(t),this.previousTime=t,this.accumalatorMethod(this.hiDeltaTime),this.render(this.hiDeltaTime)}},{key:"fpsUpdate",value:function(t){t>this._nextFpsUpdate&&(this.currentFps=.25*this._framesThisSecond+.75*this.fps,this.fps=u.default.clamp(~~this.currentFps,0,this.fpsDesired),this._nextFpsUpdate=t+1e3,this._framesThisSecond=0),this._framesThisSecond++}},{key:"accumalatorMethod",value:function(t){if(++this.frameCounter%this.frameRate==0){this.frameCounter=0,this.accumalator+=t,this.accumulator=Math.min(this.accumalator,this.accumalatorMax);var e=this.interpolation?t:this.timeStep,i=this.interpolation?e:Math.max(e,this.updateAverageDelta);for(this.deltaTime=e/1e3;this.accumalator>=i||this.interpolation;){var n=window.performance.now();this.loop(e/1e3);var a=window.performance.now();if(this.updateAverageDelta=a-n,this.accumalator-=i,this.interpolation){this.accumalator=0;break}}}}},{key:"accumalatorReset",value:function(){this.frameCounter=0,this.frameRate=~~(.5+60/this.fpsDesired),this.accumalator=0,this.timeStep=1e3/this.fpsDesired,this.accumulatorMax=10*this.stepSize}},{key:"reset",value:function(){var t=window.performance.now();this.deltaTime=0,this.hiDeltaTime=0,this.time=t,this.previousTimeTime=t,this._nextFpsUpdate=t+1e3,this._framesThisSecond=0,this.accumalatorReset()}}]),t}();e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=p(i(0)),a=p(i(1)),r=p(i(10)),s=(p(i(139)),p(i(316))),u=p(i(315)),o=p(i(313)),l=p(i(312)),d=p(i(309)),f=p(i(308)),c=p(i(268)),h=p(i(267)),v=p(i(265)),y=p(i(264)),_=p(i(255));function p(t){return t&&t.__esModule?t:{default:t}}var m=function(){function t(e,i){(0,n.default)(this,t),this.game=e,this.system=i,this.updateStep=new s.default(e,e.config),this.entityUpdateList=null,this.currentScene=null,this.camera=null,this.canvas=null,this.renderer=null}return(0,a.default)(t,[{key:"loop",value:function(t){_.default.call(this.game.audio),this.game.input.update(),(0,y.default)(this.game.system.transition,t),this.currentScene=this.game.scene.currentScene;var e=null!=this.currentScene&&void 0!==this.currentScene;if((0,f.default)(this.game.scene),e){this.entityUpdateList.beginUpdate(t);var i=this.camera._transform._isDirty;(0,c.default)(this.game.scene,t),(0,u.default)(this.camera,this.canvas),this.entityUpdateList.update(t),i&&(this.camera._transform._isDirty=!1)}}},{key:"render",value:function(t){(0,o.default)(this.renderer),null===this.currentScene&&void 0===this.currentScene||((0,l.default)(this.renderer,this.camera,t),(0,h.default)(this.system.ui,this.game.scene)),(0,d.default)(this.system.render),this.renderer.context.setTransform(1,0,0,1,0,0),(0,v.default)(this.system.transition,this.renderer.canvas,this.renderer.context),null!==this.system.ui.debug&&void 0!==this.system.ui.debug&&this.system.ui.debug.test(),this.renderer.doubleBuffer&&this.renderer._domContext.drawImage(this.renderer.canvas,0,0)}}]),t}();e.default=m,r.default.register("GameLoop",m,"loop",function(){this.updateStep.init(this),this.entityUpdateList=this.game.system.entityList,this.camera=this.system.camera,this.canvas=this.system.render.canvas,this.renderer=this.system.render})},function(t,e,i){"use strict";t.exports={Config:i(140),System:i(10),SceneSystem:i(49),GameLoop:i(317)}},function(t,e,i){i(34)("getOwnPropertyNames",function(){return i(143).f})},function(t,e,i){i(319);var n=i(13).Object;t.exports=function(t){return n.getOwnPropertyNames(t)}},function(t,e,i){t.exports={default:i(320),__esModule:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e={webAudio:!1,audioData:!1,format:{ogg:!1,mp3:!1,wav:!1,webm:!1,dolby:!1,opus:!1}};e.audioData=!!window.Audio,e.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var i=document.createElement("audio");if(i.canPlayType)try{if(i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(e.format.ogg=!0),(i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||i.canPlayType("audio/opus;").replace(/^no$/,""))&&(e.format.opus=!0),i.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(e.format.mp3=!0),i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(e.format.wav=!0),(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;").replace(/^no$/,""))&&(e.format.m4a=!0),i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(e.format.webm=!0),""!==i.canPlayType('audio/mp4;codecs="ec-3"'))if(t.manufacturer.edge)e.format.dolby=!0;else if(t.manufacturer.safari&&t.version>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var n=parseInt(RegExp.$1,10),a=parseInt(RegExp.$2,10);(10===n&&a>=11||n>10)&&(e.format.dolby=!0)}}catch(t){}return e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=(n=i(12))&&n.__esModule?n:{default:n};e.default=function(t){var e={canvas:!1,svg:!1,file:!1,fileSystem:!1,worker:!1,pointerLock:!1,vibration:!1};return e.canvas=!!window.CanvasRenderingContext2D||t.environment.cocoonJS,e.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),e.fileSystem=!!window.requestFileSystem,e.worker=!!window.Worker,e.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,e.svg=void 0!==("undefined"==typeof SVGRect?"undefined":(0,a.default)(SVGRect))&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(e.vibration=!0),e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e={name:void 0,version:0,manufacturer:{firefox:!1,opera:!1,ie:!1,edge:!1,chrome:!1,blink:!1,safari:!1,silk:!1}};e.manufacturer.opera=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,e.manufacturer.firefox="undefined"!=typeof InstallTrigger,e.manufacturer.safari=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString(),e.manufacturer.ie=!!document.documentMode,e.manufacturer.edge=!e.manufacturer.edge&&!!window.StyleMedia,e.manufacturer.chrome=!!window.chrome&&!!window.chrome.webstore,e.manufacturer.blink=(e.manufacturer.chrome||e.manufacturer.opera)&&!!window.CSS;var i=/(\w+)(?:\D+|\/)?((\d+)?\.?(\d+)?)?;?/.exec(t),n=0;return e.name=i[0],void 0!==i[1]&&(n=parseInt(i[1],10)),e.version=n,e}},function(t,e){var i,n,a=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var o,l=[],d=!1,f=-1;function c(){d&&o&&(d=!1,o.length?l=o.concat(l):f=-1,l.length&&h())}function h(){if(!d){var t=u(c);d=!0;for(var e=l.length;e;){for(o=l,l=[];++f<e;)o&&o[f].run();f=-1,e=l.length}o=null,d=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function y(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new v(t,e)),1!==l.length||d||u(h)},v.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=y,a.addListener=y,a.once=y,a.off=y,a.removeListener=y,a.removeAllListeners=y,a.emit=y,a.prependListener=y,a.prependOnceListener=y,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n,a=(n=i(12))&&n.__esModule?n:{default:n};e.default=function(e){var i=/Silk/.test(e),n={name:void 0,mobile:!1,desktop:!1,os:{windows:!1,windowsPhone:!1,macOS:!1,linux:!1,android:!1,iOS:!1,chromeOS:!1,kindle:!1},environment:{node:!1,electron:!1,cordova:!1,nodewebkit:!1,cocoonJS:!1,cocoonApp:!1,ejecta:!1}};if(/Windows/.test(e)?(n.name="Windows",n.os.windows=!0):/Mac OS/.test(e)?(n.name="MacOS",n.os.macOS=!0):/Linux/.test(e)?(n.name="Linux",n.os.linux=!0):/Android/.test(e)?(n.name="Android",n.os.android=!0):/iP[ao]d|iPhone/i.test(e)?(n.name="iOS",n.os.iOS=!0):/Kindle/.test(e)||/\bKF[A-Z][A-Z]+/.test(e)||/Silk.*Mobile Safari/.test(e)?(n.name="Kindle",n.os.kindle=!0):/CrOS/.test(e)&&(n.name="ChromeOS",n.os.chromeOS=!0),(/Windows Phone/i.test(e)||/IEMobile/i.test(e))&&(n.name="Windows Phone",n.os.android=!1,n.os.iOS=!1,n.os.macOS=!1,n.os.windows=!0,n.os.windowsPhone=!0),(n.os.windows||n.os.macOS||n.os.linux&&!i||n.os.chromeOS)&&(n.desktop=!0,n.mobile=!1),(n.os.windowsPhone||/Windows NT/i.test(e)&&/Touch/i.test(e))&&(n.os.desktop=!1,n.mobile=!0),void 0!==window.cordova&&(n.environment.cordova=!0),void 0!==t&&void 0!==t.versions.node&&(n.environment.node=!0),n.environment.node&&"object"===(0,a.default)(t.versions)&&(n.environment.nodeWebkit=!!t.versions["node-webkit"],n.environment.electron=!!t.versions.electron),navigator.isCocoonJS){n.environment.cocoonJS=!0;try{n.environment.cocoonApp="undefined"!=typeof CocoonJS}catch(t){n.environment.cocoonApp=!1}}return void 0!==window.ejecta&&(n.environment.ejecta=!0),n}}).call(this,i(325))},function(t,e,i){var n=i(37);n(n.S+n.F*!i(30),"Object",{defineProperty:i(31).f})},function(t,e,i){i(327);var n=i(13).Object;t.exports=function(t,e,i){return n.defineProperty(t,e,i)}},function(t,e,i){t.exports={default:i(328),__esModule:!0}},function(t,e,i){var n=i(24),a=i(74).onFreeze;i(34)("freeze",function(t){return function(e){return t&&n(e)?t(a(e)):e}})},function(t,e,i){i(330),t.exports=i(13).Object.freeze},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=(n=i(12))&&n.__esModule?n:{default:n};e.default=function(t){if("object"!==(void 0===t?"undefined":(0,a.default)(t))||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0}},function(t,e,i){i(73)("observable")},function(t,e,i){i(73)("asyncIterator")},function(t,e){},function(t,e,i){var n=i(146);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(51),a=i(144),r=i(72);t.exports=function(t){var e=n(t),i=a.f;if(i)for(var s,u=i(t),o=r.f,l=0;u.length>l;)o.call(t,s=u[l++])&&e.push(s);return e}},function(t,e,i){"use strict";var n=i(25),a=i(29),r=i(30),s=i(37),u=i(148),o=i(74).KEY,l=i(40),d=i(79),f=i(77),c=i(50),h=i(35),v=i(75),y=i(73),_=i(337),p=i(336),m=i(41),g=i(24),M=i(28),x=i(83),b=i(52),w=i(81),k=i(143),O=i(71),L=i(31),S=i(51),j=O.f,P=L.f,N=k.f,T=n.Symbol,E=n.JSON,A=E&&E.stringify,D=h("_hidden"),I=h("toPrimitive"),C={}.propertyIsEnumerable,R=d("symbol-registry"),F=d("symbols"),z=d("op-symbols"),U=Object.prototype,B="function"==typeof T,W=n.QObject,G=!W||!W.prototype||!W.prototype.findChild,Q=r&&l(function(){return 7!=w(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=j(U,e);n&&delete U[e],P(t,e,i),n&&t!==U&&P(U,e,n)}:P,Y=function(t){var e=F[t]=w(T.prototype);return e._k=t,e},H=B&&"symbol"==typeof T.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof T},V=function(t,e,i){return t===U&&V(z,e,i),m(t),e=x(e,!0),m(i),a(F,e)?(i.enumerable?(a(t,D)&&t[D][e]&&(t[D][e]=!1),i=w(i,{enumerable:b(0,!1)})):(a(t,D)||P(t,D,b(1,{})),t[D][e]=!0),Q(t,e,i)):P(t,e,i)},q=function(t,e){m(t);for(var i,n=_(e=M(e)),a=0,r=n.length;r>a;)V(t,i=n[a++],e[i]);return t},J=function(t){var e=C.call(this,t=x(t,!0));return!(this===U&&a(F,t)&&!a(z,t))&&(!(e||!a(this,t)||!a(F,t)||a(this,D)&&this[D][t])||e)},Z=function(t,e){if(t=M(t),e=x(e,!0),t!==U||!a(F,e)||a(z,e)){var i=j(t,e);return!i||!a(F,e)||a(t,D)&&t[D][e]||(i.enumerable=!0),i}},X=function(t){for(var e,i=N(M(t)),n=[],r=0;i.length>r;)a(F,e=i[r++])||e==D||e==o||n.push(e);return n},K=function(t){for(var e,i=t===U,n=N(i?z:M(t)),r=[],s=0;n.length>s;)!a(F,e=n[s++])||i&&!a(U,e)||r.push(F[e]);return r};B||(u((T=function(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var t=c(arguments.length>0?arguments[0]:void 0),e=function(i){this===U&&e.call(z,i),a(this,D)&&a(this[D],t)&&(this[D][t]=!1),Q(this,t,b(1,i))};return r&&G&&Q(U,t,{configurable:!0,set:e}),Y(t)}).prototype,"toString",function(){return this._k}),O.f=Z,L.f=V,i(142).f=k.f=X,i(72).f=J,i(144).f=K,r&&!i(84)&&u(U,"propertyIsEnumerable",J,!0),v.f=function(t){return Y(h(t))}),s(s.G+s.W+s.F*!B,{Symbol:T});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)h($[tt++]);for(var et=S(h.store),it=0;et.length>it;)y(et[it++]);s(s.S+s.F*!B,"Symbol",{for:function(t){return a(R,t+="")?R[t]:R[t]=T(t)},keyFor:function(t){if(!H(t))throw TypeError(t+" is not a symbol!");for(var e in R)if(R[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),s(s.S+s.F*!B,"Object",{create:function(t,e){return void 0===e?w(t):q(w(t),e)},defineProperty:V,defineProperties:q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:X,getOwnPropertySymbols:K}),E&&s(s.S+s.F*(!B||l(function(){var t=T();return"[null]"!=A([t])||"{}"!=A({a:t})||"{}"!=A(Object(t))})),"JSON",{stringify:function(t){for(var e,i,n=[t],a=1;arguments.length>a;)n.push(arguments[a++]);if(i=e=n[1],(g(e)||void 0!==t)&&!H(t))return p(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!H(e))return e}),n[1]=e,A.apply(E,n)}}),T.prototype[I]||i(36)(T.prototype,I,T.prototype.valueOf),f(T,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(t,e,i){i(338),i(335),i(334),i(333),t.exports=i(13).Symbol},function(t,e,i){t.exports={default:i(339),__esModule:!0}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=function(){}},function(t,e,i){"use strict";var n=i(342),a=i(341),r=i(82),s=i(28);t.exports=i(152)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,a(1)):a(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),r.Arguments=r.Array,n("keys"),n("values"),n("entries")},function(t,e,i){i(343);for(var n=i(25),a=i(36),r=i(82),s=i(35)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),o=0;o<u.length;o++){var l=u[o],d=n[l],f=d&&d.prototype;f&&!f[s]&&a(f,s,l),r[l]=r.Array}},function(t,e,i){var n=i(25).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(86),a=Math.max,r=Math.min;t.exports=function(t,e){return(t=n(t))<0?a(t+e,0):r(t,e)}},function(t,e,i){var n=i(86),a=Math.min;t.exports=function(t){return t>0?a(n(t),9007199254740991):0}},function(t,e,i){var n=i(28),a=i(347),r=i(346);t.exports=function(t){return function(e,i,s){var u,o=n(e),l=a(o.length),d=r(s,l);if(t&&i!=i){for(;l>d;)if((u=o[d++])!=u)return!0}else for(;l>d;d++)if((t||d in o)&&o[d]===i)return t||d||0;return!t&&-1}}},function(t,e,i){var n=i(146);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){var n=i(31),a=i(41),r=i(51);t.exports=i(30)?Object.defineProperties:function(t,e){a(t);for(var i,s=r(e),u=s.length,o=0;u>o;)n.f(t,i=s[o++],e[i]);return t}},function(t,e,i){"use strict";var n=i(81),a=i(52),r=i(77),s={};i(36)(s,i(35)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(s,{next:a(1,i)}),r(t,e+" Iterator")}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n=i(86),a=i(85);t.exports=function(t){return function(e,i){var r,s,u=String(a(e)),o=n(i),l=u.length;return o<0||o>=l?t?"":void 0:(r=u.charCodeAt(o))<55296||r>56319||o+1===l||(s=u.charCodeAt(o+1))<56320||s>57343?t?u.charAt(o):r:t?u.slice(o,o+2):s-56320+(r-55296<<10)+65536}}},function(t,e,i){"use strict";var n=i(353)(!0);i(152)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){i(354),i(344),t.exports=i(75).f("iterator")},function(t,e,i){t.exports={default:i(355),__esModule:!0}},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";(function(e){var n=r(i(153)),a=r(i(87));function r(t){return t&&t.__esModule?t:{default:t}}var s=s||{Environment:i(39),Core:i(318),Structure:i(253),Render:i(251),Color:i(20),Transition:i(240),KeyCode:i(113),MouseButton:i(112),Input:i(239),Math:i(8).default,Random:i(107).default,Matrix:i(38),Ease:i(235).Ease,Scene:i(234),Camera:i(227),Module:i(225),Entity:i(213),Pool:i(198),Event:i(194),Audio:i(189),Resource:i(188),Cache:i(185),AssetType:i(11),Loader:i(183),Game:i(169),Path:i(21),WrapMode:i(59).default};(0,a.default)(n.default,s),t.exports=s,e.scintilla=s}).call(this,i(357))}])});